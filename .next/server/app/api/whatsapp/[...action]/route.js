"use strict";(()=>{var t={};t.id=5258,t.ids=[5258],t.modules={30517:t=>{t.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},99524:(t,e,a)=>{a.r(e),a.d(e,{headerHooks:()=>P,originalPathname:()=>y,patchFetch:()=>E,requestAsyncStorage:()=>w,routeModule:()=>f,serverHooks:()=>v,staticGenerationAsyncStorage:()=>m,staticGenerationBailout:()=>j});var n={};a.r(n),a.d(n,{GET:()=>h,POST:()=>d});var s=a(95419),o=a(69108),r=a(99678),i=a(78070);let u=process.env.EVOLUTION_API_URL||"http://localhost:8080",c=process.env.EVOLUTION_API_KEY||"E493AE90-D9CA-4E38-95A7-526487122178",p="frplus_main";async function l(t,e={}){let a=`${u}${t}`,n={"Content-Type":"application/json",apikey:c,...e.headers};try{let t=await fetch(a,{...e,headers:n}),s=await t.json();return{ok:t.ok,status:t.status,data:s}}catch(t){return console.error("Evolution API Error:",t),{ok:!1,status:500,data:{error:"Failed to connect to Evolution API"}}}}async function d(t,{params:e}){let a=e.action[0],n=await t.json().catch(()=>({}));if("create"===a){let t=await l("/instance/create",{method:"POST",body:JSON.stringify({instanceName:p,token:"random_token",qrcode:!0})});return i.Z.json(t.data,{status:t.status})}if("connect"===a){let t=await l(`/instance/connect/${p}`);return i.Z.json(t.data,{status:t.status})}if("status"===a){let t=await l(`/instance/connectionState/${p}`);return i.Z.json(t.data,{status:t.status})}if("send-text"===a){let{phone:t,message:e}=n,a=await l(`/message/sendText/${p}`,{method:"POST",body:JSON.stringify({number:t,options:{delay:1200,presence:"composing",linkPreview:!1},textMessage:{text:e}})});return i.Z.json(a.data,{status:a.status})}return i.Z.json({error:"Invalid action"},{status:400})}async function h(t,{params:e}){let a=e.action[0];if("status"===a){let t=await l(`/instance/connectionState/${p}`);return i.Z.json(t.data,{status:t.status})}if("list"===a){let t=await l("/instance/fetchInstances");return i.Z.json(t.data,{status:t.status})}return i.Z.json({error:"Invalid action"},{status:400})}let f=new s.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/whatsapp/[...action]/route",pathname:"/api/whatsapp/[...action]",filename:"route",bundlePath:"app/api/whatsapp/[...action]/route"},resolvedPagePath:"E:\\FRPlus\\frplus-web\\src\\app\\api\\whatsapp\\[...action]\\route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:w,staticGenerationAsyncStorage:m,serverHooks:v,headerHooks:P,staticGenerationBailout:j}=f,y="/api/whatsapp/[...action]/route";function E(){return(0,r.patchFetch)({serverHooks:v,staticGenerationAsyncStorage:m})}}};var e=require("../../../../webpack-runtime.js");e.C(t);var a=t=>e(e.s=t),n=e.X(0,[1638,6206],()=>a(99524));module.exports=n})();