(()=>{var e={};e.id=8032,e.ids=[8032],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},57147:e=>{"use strict";e.exports=require("fs")},71017:e=>{"use strict";e.exports=require("path")},71267:e=>{"use strict";e.exports=require("worker_threads")},27860:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>l.a,__next_app__:()=>h,originalPathname:()=>x,pages:()=>c,routeModule:()=>m,tree:()=>d});var r=a(50482),s=a(69108),i=a(62563),l=a.n(i),n=a(68300),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);a.d(t,o);let d=["",{children:["dashboard",{children:["relatorios",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,90314)),"E:\\FRPlus\\frplus-web\\src\\app\\dashboard\\relatorios\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,94699)),"E:\\FRPlus\\frplus-web\\src\\app\\dashboard\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,21342)),"E:\\FRPlus\\frplus-web\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,69361,23)),"next/dist/client/components/not-found-error"]}],c=["E:\\FRPlus\\frplus-web\\src\\app\\dashboard\\relatorios\\page.tsx"],x="/dashboard/relatorios/page",h={require:a,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/dashboard/relatorios/page",pathname:"/dashboard/relatorios",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},67519:(e,t,a)=>{Promise.resolve().then(a.bind(a,32749))},48411:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(69224).Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},91917:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(69224).Z)("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]])},46064:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(69224).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},32749:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>g});var r=a(95344),s=a(3729),i=a(66137),l=a(69224);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,l.Z)("FileDown",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]]),o=(0,l.Z)("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]);var d=a(46064),c=a(91917),x=a(89895),h=a(48411),m=a(37121),p=a(50340);function g(){let{orders:e,clients:t,products:l,fabricas:g}=(0,i.e)(),[u,b]=(0,s.useState)("vendas"),[y,j]=(0,s.useState)(()=>{let e=new Date;return e.setMonth(e.getMonth()-1),e.toISOString().split("T")[0]}),[f,v]=(0,s.useState)(new Date().toISOString().split("T")[0]),[N,w]=(0,s.useState)(!1),[S,R]=(0,s.useState)("todas"),[F,P]=(0,s.useState)("todas"),k=(0,s.useRef)(null),C=(0,s.useMemo)(()=>e.filter(e=>{let t=new Date(e.data),a=new Date(y),r=new Date(f);return r.setHours(23,59,59),t>=a&&t<=r}),[e,y,f]),$=(0,s.useMemo)(()=>{let e=C.reduce((e,t)=>e+t.valorTotal,0),t=C.length;return{totalVendas:e,totalPedidos:t,ticketMedio:t>0?e/t:0,vendasPorDia:C.reduce((e,t)=>{let a=new Date(t.data).toLocaleDateString("pt-BR");return e[a]=(e[a]||0)+t.valorTotal,e},{})}},[C]),D=(0,s.useMemo)(()=>{let e=new Map;return C.forEach(t=>{t.itens.forEach(t=>{let a=e.get(t.produtoId)||{nome:t.nomeProduto,qtd:0,valor:0};e.set(t.produtoId,{nome:t.nomeProduto,qtd:a.qtd+t.quantidade,valor:a.valor+t.total})})}),Array.from(e.values()).sort((e,t)=>t.valor-e.valor)},[C]),T=(0,s.useMemo)(()=>{let e=new Map;return C.forEach(t=>{let a=e.get(t.clienteId)||{nome:t.nomeCliente,pedidos:0,valor:0};e.set(t.clienteId,{nome:t.nomeCliente,pedidos:a.pedidos+1,valor:a.valor+t.valorTotal})}),Array.from(e.values()).sort((e,t)=>t.valor-e.valor)},[C]),A=async()=>{w(!0);try{let e=(await a.e(7898).then(a.bind(a,67898))).default,t=(await a.e(4071).then(a.bind(a,4071))).default,r=new e({orientation:"tabela"===u?"portrait":"landscape",unit:"mm",format:"a4"}),s=r.internal.pageSize.getWidth(),i=[37,99,235];r.setFillColor(13,13,13),r.rect(0,0,s,40,"F");try{let e=new Image;e.crossOrigin="anonymous",await new Promise(t=>{e.onload=()=>{let a=document.createElement("canvas");a.width=e.width,a.height=e.height;let s=a.getContext("2d");s?.drawImage(e,0,0);let i=a.toDataURL("image/png"),l=25,n=e.width/e.height*l;n>50&&(n=50,l=e.height/e.width*n),r.addImage(i,"PNG",10,7.5,n,l),t()},e.onerror=()=>t(),e.src="/logo.png"})}catch{}r.setTextColor(255,255,255),r.setFontSize(22),r.setFont("helvetica","bold"),r.text("FRPlus",s/2,15,{align:"center"}),r.setFontSize(10),r.setFont("helvetica","normal"),r.setTextColor(180,180,180),r.text("Sistema de Gest\xe3o Comercial",s/2,20,{align:"center"});let n={vendas:"Relat\xf3rio de Vendas",produtos:"Ranking de Produtos",clientes:"Ranking de Clientes",tabela:"Tabela de Pre\xe7os"};r.setTextColor(255,255,255),r.setFontSize(14),r.setFont("helvetica","bold"),r.text(n[u],s/2,30,{align:"center"}),r.setFontSize(8),r.setFont("helvetica","normal"),r.setTextColor(180,180,180),r.text(`${new Date().toLocaleDateString("pt-BR")}`,s-10,12,{align:"right"}),r.text(`${new Date().toLocaleTimeString("pt-BR")}`,s-10,16,{align:"right"}),"tabela"!==u&&(r.text(`Per\xedodo:`,s-10,24,{align:"right"}),r.text(`${new Date(y).toLocaleDateString("pt-BR")} a ${new Date(f).toLocaleDateString("pt-BR")}`,s-10,28,{align:"right"}));let o=45;if(r.setTextColor(30,30,30),"vendas"===u)r.setFontSize(11),r.setFont("helvetica","bold"),r.text(`Total Vendas: R$ ${$.totalVendas.toLocaleString("pt-BR",{minimumFractionDigits:2})}`,15,o),r.text(`Pedidos: ${$.totalPedidos}`,100,o),r.text(`Ticket M\xe9dio: R$ ${$.ticketMedio.toLocaleString("pt-BR",{minimumFractionDigits:2})}`,150,o),o+=10,t(r,{startY:o,head:[["Pedido","Cliente","Data","Itens","Valor"]],body:C.map(e=>[`#${e.id.slice(-6)}`,e.nomeCliente,new Date(e.data).toLocaleDateString("pt-BR"),e.itens.length.toString(),`R$ ${e.valorTotal.toLocaleString("pt-BR",{minimumFractionDigits:2})}`]),styles:{fontSize:9,cellPadding:3,halign:"center",valign:"middle"},headStyles:{fillColor:i,textColor:255,halign:"center"},columnStyles:{0:{halign:"left"},1:{halign:"left"},4:{halign:"right"}},alternateRowStyles:{fillColor:[245,247,250]},margin:{top:10,left:10,right:10}});else if("produtos"===u)t(r,{startY:o,head:[["#","Produto","Quantidade Vendida","Valor Total"]],body:D.map((e,t)=>[(t+1).toString(),e.nome,e.qtd.toString(),`R$ ${e.valor.toLocaleString("pt-BR",{minimumFractionDigits:2})}`]),styles:{fontSize:9,cellPadding:3,halign:"center"},headStyles:{fillColor:i,textColor:255},columnStyles:{1:{halign:"left"},3:{halign:"right"}},alternateRowStyles:{fillColor:[245,247,250]},foot:[["","TOTAL",D.reduce((e,t)=>e+t.qtd,0).toString(),`R$ ${D.reduce((e,t)=>e+t.valor,0).toLocaleString("pt-BR",{minimumFractionDigits:2})}`]],footStyles:{fillColor:[30,30,30],textColor:255,fontStyle:"bold",halign:"right"},margin:{top:10,left:10,right:10}});else if("clientes"===u)t(r,{startY:o,head:[["#","Cliente","Pedidos","Valor Total"]],body:T.map((e,t)=>[(t+1).toString(),e.nome,e.pedidos.toString(),`R$ ${e.valor.toLocaleString("pt-BR",{minimumFractionDigits:2})}`]),styles:{fontSize:9,cellPadding:3,halign:"center"},headStyles:{fillColor:i,textColor:255},columnStyles:{1:{halign:"left"},3:{halign:"right"}},alternateRowStyles:{fillColor:[245,247,250]},foot:[["","TOTAL",T.reduce((e,t)=>e+t.pedidos,0).toString(),`R$ ${T.reduce((e,t)=>e+t.valor,0).toLocaleString("pt-BR",{minimumFractionDigits:2})}`]],footStyles:{fillColor:[30,30,30],textColor:255,fontStyle:"bold",halign:"right"},margin:{top:10,left:10,right:10}});else if("tabela"===u){"todas"!==S&&(r.setFontSize(11),r.setFont("helvetica","bold"),r.text(`Tabela: ${{todas:"Todas as Tabelas","50a199":"50 a 199 unidades","200a699":"200 a 699 unidades",atacado:"Atacado",avista:"Atacado \xc0 Vista",redes:"Redes"}[S]}`,15,o),o+=8);let e=l.filter(e=>"todas"===F||("sem-fabrica"===F?!e.fabricaId:e.fabricaId===F)).reduce((e,t)=>{let a=t.fabricaId||"sem-fabrica";return e[a]||(e[a]=[]),e[a].push(t),e},{});for(let a of Object.keys(e).sort((e,t)=>{let a="sem-fabrica"===e?"Outros":g.find(t=>t.id===e)?.nome||"Outros",r="sem-fabrica"===t?"Outros":g.find(e=>e.id===t)?.nome||"Outros";return"sem-fabrica"===e?1:"sem-fabrica"===t?-1:a.localeCompare(r)})){let l=e[a],n="sem-fabrica"===a?"OUTROS":(g.find(e=>e.id===a)?.nome||"OUTROS").toUpperCase();o>r.internal.pageSize.getHeight()-40&&(r.addPage(),o=20),r.setFillColor(240,240,240),r.rect(14,o,s-28,8,"F"),r.setFontSize(10),r.setFont("helvetica","bold"),r.setTextColor(50,50,50),r.text(n,16,o+5.5),o+=8;let d=[],c=[];"todas"===S?(d=[["C\xf3digo","Produto","50-199","200-699","Atacado","\xc0 Vista","Redes"]],c=l.map(e=>[e.codigo,e.nome,`R$ ${e.preco50a199?.toFixed(2)||"0.00"}`,`R$ ${e.preco200a699?.toFixed(2)||"0.00"}`,`R$ ${e.precoAtacado?.toFixed(2)||"0.00"}`,`R$ ${e.precoAtacadoAVista?.toFixed(2)||"0.00"}`,`R$ ${e.precoRedes?.toFixed(2)||"0.00"}`])):(d=[["C\xf3digo","Produto","Pre\xe7o"]],c=l.map(e=>{let t="0.00";return"50a199"===S?t=e.preco50a199?.toFixed(2)||"0.00":"200a699"===S?t=e.preco200a699?.toFixed(2)||"0.00":"atacado"===S?t=e.precoAtacado?.toFixed(2)||"0.00":"avista"===S?t=e.precoAtacadoAVista?.toFixed(2)||"0.00":"redes"===S&&(t=e.precoRedes?.toFixed(2)||"0.00"),[e.codigo,e.nome,`R$ ${t}`]})),t(r,{startY:o,head:d,body:c,styles:{fontSize:8,cellPadding:2,valign:"middle",halign:"center"},headStyles:{fillColor:i,textColor:255,halign:"center"},alternateRowStyles:{fillColor:[255,255,255]},margin:{top:10,left:14,right:14},columnStyles:"todas"===S?{0:{cellWidth:20,halign:"left"},1:{cellWidth:"auto",halign:"left"}}:{0:{cellWidth:20,halign:"left"},1:{cellWidth:"auto",halign:"left"},2:{cellWidth:30,halign:"right"}}}),o=r.lastAutoTable.finalY+10}}let d=r.getNumberOfPages();for(let e=1;e<=d;e++)r.setPage(e),r.setFontSize(8),r.setTextColor(150,150,150),r.text(`P\xe1gina ${e} de ${d}`,s/2,r.internal.pageSize.getHeight()-10,{align:"center"}),r.text("FRPlus - Sistema de Gest\xe3o Comercial",15,r.internal.pageSize.getHeight()-10);let c=`${n[u].replace(/ /g,"_")}_${new Date().toISOString().split("T")[0]}.pdf`;r.save(c)}catch(e){console.error("Erro ao exportar PDF:",e)}w(!1)};return(0,r.jsxs)("div",{className:"space-y-5 print:bg-white print:text-black",children:[(0,r.jsxs)("div",{className:"flex flex-col justify-between gap-4 md:flex-row md:items-center print:hidden",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-white",children:"Relat\xf3rios"}),(0,r.jsxs)("p",{className:"text-sm text-gray-400",children:[e.length," pedidos no sistema â€¢ ",C.length," no per\xedodo selecionado"]})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsxs)("button",{onClick:A,disabled:N,className:"flex items-center gap-2 rounded-lg bg-green-600 px-4 py-2 font-medium text-white hover:bg-green-500 transition-all shadow-lg shadow-green-600/20 disabled:opacity-50",children:[r.jsx(n,{className:"h-4 w-4"}),N?"Gerando...":"Exportar PDF"]}),(0,r.jsxs)("button",{onClick:()=>{window.print()},className:"flex items-center gap-2 rounded-lg bg-blue-600 px-4 py-2 font-medium text-white hover:bg-blue-500 transition-all shadow-lg shadow-blue-600/20",children:[r.jsx(o,{className:"h-4 w-4"}),"Imprimir"]})]})]}),r.jsx("div",{className:"form-card print:hidden",children:(0,r.jsxs)("div",{className:"flex flex-wrap items-end gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"label-compact",children:"Tipo de Relat\xf3rio"}),r.jsx("div",{className:"flex gap-1 p-1 rounded-lg bg-white/5 border border-white/10",children:[{id:"vendas",label:"Vendas",icon:d.Z},{id:"produtos",label:"Produtos",icon:c.Z},{id:"clientes",label:"Clientes",icon:x.Z},{id:"tabela",label:"Tabela de Pre\xe7os",icon:h.Z}].map(e=>(0,r.jsxs)("button",{onClick:()=>b(e.id),className:`px-3 py-1.5 text-xs font-medium rounded-md transition-all flex items-center gap-1 ${u===e.id?"bg-blue-600 text-white":"text-gray-400 hover:text-white"}`,children:[r.jsx(e.icon,{className:"h-3 w-3"}),e.label]},e.id))})]}),"tabela"!==u&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"label-compact",children:"Per\xedodo In\xedcio"}),r.jsx("input",{type:"date",value:y,onChange:e=>j(e.target.value),className:"input-compact"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"label-compact",children:"Per\xedodo Fim"}),r.jsx("input",{type:"date",value:f,onChange:e=>v(e.target.value),className:"input-compact"})]})]}),"tabela"===u&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"label-compact",children:"Tabela para Exportar"}),(0,r.jsxs)("select",{value:S,onChange:e=>R(e.target.value),className:"input-compact",children:[r.jsx("option",{value:"todas",children:"Todas as Tabelas"}),r.jsx("option",{value:"50a199",children:"50 a 199 unidades"}),r.jsx("option",{value:"200a699",children:"200 a 699 unidades"}),r.jsx("option",{value:"atacado",children:"Atacado"}),r.jsx("option",{value:"avista",children:"Atacado \xc0 Vista"}),r.jsx("option",{value:"redes",children:"Redes"})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"label-compact",children:"Filtrar por F\xe1brica"}),(0,r.jsxs)("select",{value:F,onChange:e=>P(e.target.value),className:"input-compact",children:[r.jsx("option",{value:"todas",children:"Todas as F\xe1bricas"}),g.sort((e,t)=>e.nome.localeCompare(t.nome)).map(e=>r.jsx("option",{value:e.id,children:e.nome},e.id)),r.jsx("option",{value:"sem-fabrica",children:"Sem F\xe1brica Definida"})]})]})]})]})}),(0,r.jsxs)("div",{ref:k,className:"bg-[#0d0d0d] print:bg-white",children:[(0,r.jsxs)("div",{className:"grid grid-cols-4 gap-3 print:grid-cols-4",children:[r.jsx("div",{className:"form-card",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 rounded-lg bg-green-500/10",children:r.jsx(h.Z,{className:"h-5 w-5 text-green-400"})}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-xs text-gray-400",children:"Total Vendas"}),(0,r.jsxs)("p",{className:"text-xl font-bold text-white print:text-black",children:["R$ ",$.totalVendas.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})]})}),r.jsx("div",{className:"form-card",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 rounded-lg bg-blue-500/10",children:r.jsx(m.Z,{className:"h-5 w-5 text-blue-400"})}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-xs text-gray-400",children:"Pedidos"}),r.jsx("p",{className:"text-xl font-bold text-white print:text-black",children:$.totalPedidos})]})]})}),r.jsx("div",{className:"form-card",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 rounded-lg bg-purple-500/10",children:r.jsx(p.Z,{className:"h-5 w-5 text-purple-400"})}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-xs text-gray-400",children:"Ticket M\xe9dio"}),(0,r.jsxs)("p",{className:"text-xl font-bold text-white print:text-black",children:["R$ ",$.ticketMedio.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})]})}),r.jsx("div",{className:"form-card",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 rounded-lg bg-orange-500/10",children:r.jsx(x.Z,{className:"h-5 w-5 text-orange-400"})}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-xs text-gray-400",children:"Clientes Ativos"}),r.jsx("p",{className:"text-xl font-bold text-white print:text-black",children:T.length})]})]})})]}),"vendas"===u&&(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"form-card",children:[r.jsx("h3",{className:"text-lg font-semibold text-white print:text-black mb-4",children:"Vendas por Dia"}),r.jsx("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full text-sm",children:[r.jsx("thead",{className:"border-b border-white/10 print:border-gray-300",children:(0,r.jsxs)("tr",{children:[r.jsx("th",{className:"text-left py-2 text-gray-400 print:text-gray-600",children:"Data"}),r.jsx("th",{className:"text-right py-2 text-gray-400 print:text-gray-600",children:"Valor"})]})}),r.jsx("tbody",{children:Object.entries($.vendasPorDia).sort((e,t)=>new Date(t[0].split("/").reverse().join("-")).getTime()-new Date(e[0].split("/").reverse().join("-")).getTime()).map(([e,t])=>(0,r.jsxs)("tr",{className:"border-b border-white/5 print:border-gray-200",children:[r.jsx("td",{className:"py-2 text-white print:text-black",children:e}),(0,r.jsxs)("td",{className:"py-2 text-right text-green-400 print:text-green-600 font-medium",children:["R$ ",t.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]},e))})]})})]}),(0,r.jsxs)("div",{className:"form-card",children:[r.jsx("h3",{className:"text-lg font-semibold text-white print:text-black mb-4",children:"Detalhamento de Pedidos"}),r.jsx("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full text-sm",children:[r.jsx("thead",{className:"border-b border-white/10 print:border-gray-300",children:(0,r.jsxs)("tr",{children:[r.jsx("th",{className:"text-left py-2 text-gray-400 print:text-gray-600",children:"Pedido"}),r.jsx("th",{className:"text-left py-2 text-gray-400 print:text-gray-600",children:"Cliente"}),r.jsx("th",{className:"text-left py-2 text-gray-400 print:text-gray-600",children:"Data"}),r.jsx("th",{className:"text-center py-2 text-gray-400 print:text-gray-600",children:"Itens"}),r.jsx("th",{className:"text-right py-2 text-gray-400 print:text-gray-600",children:"Valor"})]})}),r.jsx("tbody",{children:C.sort((e,t)=>new Date(t.data).getTime()-new Date(e.data).getTime()).map(e=>(0,r.jsxs)("tr",{className:"border-b border-white/5 print:border-gray-200",children:[(0,r.jsxs)("td",{className:"py-2 font-mono text-white print:text-black",children:["#",e.id.slice(-6)]}),r.jsx("td",{className:"py-2 text-white print:text-black",children:e.nomeCliente}),r.jsx("td",{className:"py-2 text-gray-400 print:text-gray-600",children:new Date(e.data).toLocaleDateString("pt-BR")}),r.jsx("td",{className:"py-2 text-center text-gray-400 print:text-gray-600",children:e.itens.length}),(0,r.jsxs)("td",{className:"py-2 text-right text-green-400 print:text-green-600 font-medium",children:["R$ ",e.valorTotal.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]},e.id))})]})})]})]}),"produtos"===u&&(0,r.jsxs)("div",{className:"form-card",children:[r.jsx("h3",{className:"text-lg font-semibold text-white print:text-black mb-4",children:"Ranking de Produtos"}),r.jsx("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full text-sm",children:[r.jsx("thead",{className:"border-b border-white/10 print:border-gray-300",children:(0,r.jsxs)("tr",{children:[r.jsx("th",{className:"text-left py-2 text-gray-400 print:text-gray-600",children:"#"}),r.jsx("th",{className:"text-left py-2 text-gray-400 print:text-gray-600",children:"Produto"}),r.jsx("th",{className:"text-center py-2 text-gray-400 print:text-gray-600",children:"Qtd Vendida"}),r.jsx("th",{className:"text-right py-2 text-gray-400 print:text-gray-600",children:"Valor Total"})]})}),r.jsx("tbody",{children:D.map((e,t)=>(0,r.jsxs)("tr",{className:"border-b border-white/5 print:border-gray-200",children:[r.jsx("td",{className:"py-2 text-gray-500",children:t+1}),r.jsx("td",{className:"py-2 text-white print:text-black font-medium",children:e.nome}),r.jsx("td",{className:"py-2 text-center text-gray-400 print:text-gray-600",children:e.qtd}),(0,r.jsxs)("td",{className:"py-2 text-right text-green-400 print:text-green-600 font-medium",children:["R$ ",e.valor.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]},e.nome))}),r.jsx("tfoot",{className:"border-t border-white/20 print:border-gray-400",children:(0,r.jsxs)("tr",{children:[r.jsx("td",{colSpan:2,className:"py-2 font-bold text-white print:text-black",children:"Total"}),r.jsx("td",{className:"py-2 text-center font-bold text-white print:text-black",children:D.reduce((e,t)=>e+t.qtd,0)}),(0,r.jsxs)("td",{className:"py-2 text-right font-bold text-green-400 print:text-green-600",children:["R$ ",D.reduce((e,t)=>e+t.valor,0).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})})]})})]}),"clientes"===u&&(0,r.jsxs)("div",{className:"form-card",children:[r.jsx("h3",{className:"text-lg font-semibold text-white print:text-black mb-4",children:"Ranking de Clientes"}),r.jsx("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full text-sm",children:[r.jsx("thead",{className:"border-b border-white/10 print:border-gray-300",children:(0,r.jsxs)("tr",{children:[r.jsx("th",{className:"text-left py-2 text-gray-400 print:text-gray-600",children:"#"}),r.jsx("th",{className:"text-left py-2 text-gray-400 print:text-gray-600",children:"Cliente"}),r.jsx("th",{className:"text-center py-2 text-gray-400 print:text-gray-600",children:"Pedidos"}),r.jsx("th",{className:"text-right py-2 text-gray-400 print:text-gray-600",children:"Valor Total"})]})}),r.jsx("tbody",{children:T.map((e,t)=>(0,r.jsxs)("tr",{className:"border-b border-white/5 print:border-gray-200",children:[r.jsx("td",{className:"py-2 text-gray-500",children:t+1}),r.jsx("td",{className:"py-2 text-white print:text-black font-medium",children:e.nome}),r.jsx("td",{className:"py-2 text-center text-gray-400 print:text-gray-600",children:e.pedidos}),(0,r.jsxs)("td",{className:"py-2 text-right text-green-400 print:text-green-600 font-medium",children:["R$ ",e.valor.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]},e.nome))}),r.jsx("tfoot",{className:"border-t border-white/20 print:border-gray-400",children:(0,r.jsxs)("tr",{children:[r.jsx("td",{colSpan:2,className:"py-2 font-bold text-white print:text-black",children:"Total"}),r.jsx("td",{className:"py-2 text-center font-bold text-white print:text-black",children:T.reduce((e,t)=>e+t.pedidos,0)}),(0,r.jsxs)("td",{className:"py-2 text-right font-bold text-green-400 print:text-green-600",children:["R$ ",T.reduce((e,t)=>e+t.valor,0).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})})]})})]}),"tabela"===u&&r.jsx("div",{className:"space-y-8",children:(()=>{let e=l.filter(e=>"todas"===F||("sem-fabrica"===F?!e.fabricaId:e.fabricaId===F)).reduce((e,t)=>{let a=t.fabricaId||"sem-fabrica";return e[a]||(e[a]=[]),e[a].push(t),e},{});return Object.keys(e).sort((e,t)=>{let a="sem-fabrica"===e?"Outros":g.find(t=>t.id===e)?.nome||"Outros",r="sem-fabrica"===t?"Outros":g.find(e=>e.id===t)?.nome||"Outros";return"sem-fabrica"===e?1:"sem-fabrica"===t?-1:a.localeCompare(r)}).map(t=>{let a=e[t],s="sem-fabrica"===t?"Outros":g.find(e=>e.id===t)?.nome||"Outros";return(0,r.jsxs)("div",{className:"form-card break-inside-avoid",children:[r.jsx("div",{className:"flex items-center justify-between mb-4 print:mb-2",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx("h3",{className:"text-lg font-bold text-white print:text-black uppercase tracking-wider",children:s}),(0,r.jsxs)("span",{className:"text-sm text-gray-400 print:text-gray-600",children:["(",a.length," itens)"]})]})}),r.jsx("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full text-sm",children:[r.jsx("thead",{className:"border-b border-white/10 print:border-gray-300",children:(0,r.jsxs)("tr",{children:[r.jsx("th",{className:"text-left py-2 text-gray-400 print:text-gray-600",children:"C\xf3digo"}),r.jsx("th",{className:"text-left py-2 text-gray-400 print:text-gray-600",children:"Produto"}),r.jsx("th",{className:"text-right py-2 text-gray-400 print:text-gray-600",children:"50-199"}),r.jsx("th",{className:"text-right py-2 text-gray-400 print:text-gray-600",children:"200-699"}),r.jsx("th",{className:"text-right py-2 text-gray-400 print:text-gray-600",children:"Atacado"}),r.jsx("th",{className:"text-right py-2 text-gray-400 print:text-gray-600",children:"\xc0 Vista"}),r.jsx("th",{className:"text-right py-2 text-gray-400 print:text-gray-600",children:"Redes"})]})}),r.jsx("tbody",{children:a.map(e=>(0,r.jsxs)("tr",{className:"border-b border-white/5 print:border-gray-200 hover:bg-white/5 print:hover:bg-transparent transition-colors",children:[r.jsx("td",{className:"py-2 font-mono text-gray-400 print:text-gray-600 text-xs",children:e.codigo}),r.jsx("td",{className:"py-2 text-white print:text-black font-medium",children:e.nome}),(0,r.jsxs)("td",{className:"py-2 text-right text-green-400 print:text-green-600",children:["R$ ",e.preco50a199?.toFixed(2)||"0.00"]}),(0,r.jsxs)("td",{className:"py-2 text-right text-green-400 print:text-green-600",children:["R$ ",e.preco200a699?.toFixed(2)||"0.00"]}),(0,r.jsxs)("td",{className:"py-2 text-right text-green-400 print:text-green-600",children:["R$ ",e.precoAtacado?.toFixed(2)||"0.00"]}),(0,r.jsxs)("td",{className:"py-2 text-right text-green-400 print:text-green-600",children:["R$ ",e.precoAtacadoAVista?.toFixed(2)||"0.00"]}),(0,r.jsxs)("td",{className:"py-2 text-right text-green-400 print:text-green-600",children:["R$ ",e.precoRedes?.toFixed(2)||"0.00"]})]},e.id))})]})})]},t)})})()})]})]})}},90314:(e,t,a)=>{"use strict";a.r(t),a.d(t,{$$typeof:()=>i,__esModule:()=>s,default:()=>l});let r=(0,a(86843).createProxy)(String.raw`E:\FRPlus\frplus-web\src\app\dashboard\relatorios\page.tsx`),{__esModule:s,$$typeof:i}=r,l=r.default}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[1638,995,7526,3173],()=>a(27860));module.exports=r})();