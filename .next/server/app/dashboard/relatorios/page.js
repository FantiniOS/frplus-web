(()=>{var e={};e.id=8032,e.ids=[8032],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},57147:e=>{"use strict";e.exports=require("fs")},71017:e=>{"use strict";e.exports=require("path")},71267:e=>{"use strict";e.exports=require("worker_threads")},27860:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>l.a,__next_app__:()=>h,originalPathname:()=>x,pages:()=>c,routeModule:()=>m,tree:()=>d});var r=a(50482),s=a(69108),i=a(62563),l=a.n(i),n=a(68300),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);a.d(t,o);let d=["",{children:["dashboard",{children:["relatorios",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,90314)),"E:\\FRPlus\\frplus-web\\src\\app\\dashboard\\relatorios\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,94699)),"E:\\FRPlus\\frplus-web\\src\\app\\dashboard\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,49342)),"E:\\FRPlus\\frplus-web\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,69361,23)),"next/dist/client/components/not-found-error"]}],c=["E:\\FRPlus\\frplus-web\\src\\app\\dashboard\\relatorios\\page.tsx"],x="/dashboard/relatorios/page",h={require:a,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/dashboard/relatorios/page",pathname:"/dashboard/relatorios",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},67519:(e,t,a)=>{Promise.resolve().then(a.bind(a,32749))},25390:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(69224).Z)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},12704:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(69224).Z)("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]])},48411:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(69224).Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},35851:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(69224).Z)("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]])},91917:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(69224).Z)("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]])},46064:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(69224).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},32749:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>j});var r=a(95344),s=a(3729),i=a(66137),l=a(69224);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,l.Z)("FileDown",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]]),o=(0,l.Z)("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]);var d=a(46064),c=a(91917),x=a(89895),h=a(48411),m=a(37121),p=a(50340),g=a(12704),b=a(25390),u=a(35851),y=a(87292);function j(){let{orders:e,clients:t,products:l,fabricas:j,refreshData:f}=(0,i.e)();(0,s.useEffect)(()=>{f()},[f]);let[N,v]=(0,s.useState)("vendas"),[w,S]=(0,s.useState)((()=>{let e=new Date;return e.setMonth(e.getMonth()-1),e.setMinutes(e.getMinutes()-e.getTimezoneOffset()),e.toISOString().split("T")[0]})()),[R,P]=(0,s.useState)((()=>{let e=new Date;return e.setMinutes(e.getMinutes()-e.getTimezoneOffset()),e.toISOString().split("T")[0]})()),[F,k]=(0,s.useState)(!1),[C,$]=(0,s.useState)("todas"),[D,T]=(0,s.useState)("todas"),[A,Z]=(0,s.useState)(null),[q,z]=(0,s.useState)(null),[I,M]=(0,s.useState)(null),O=(0,s.useRef)(null),L=(0,s.useMemo)(()=>{let t=new Date(w);t.setHours(0,0,0,0);let a=new Date(R);return a.setHours(23,59,59,999),e.filter(e=>{let r=new Date(e.data);return r>=t&&r<=a})},[e,w,R]),V=(0,s.useMemo)(()=>{let e=L.reduce((e,t)=>e+t.valorTotal,0),t=L.length,a={},r={};return L.forEach(e=>{let t=new Date(e.data).toLocaleDateString("pt-BR");a[t]=(a[t]||0)+e.valorTotal,r[t]||(r[t]=new Set),e.nomeCliente&&r[t].add(e.nomeCliente.split(" ")[0])}),{totalVendas:e,totalPedidos:t,ticketMedio:t>0?e/t:0,vendasPorDia:a,clientesPorDia:r}},[L]),E=(0,s.useMemo)(()=>{let e=new Map;return L.forEach(t=>{t.itens.forEach(t=>{let a=e.get(t.nomeProduto)||{nome:t.nomeProduto,qtd:0,valor:0};e.set(t.nomeProduto,{nome:t.nomeProduto,qtd:a.qtd+t.quantidade,valor:a.valor+t.total})})}),Array.from(e.values()).sort((e,t)=>t.valor-e.valor)},[L]),B=(0,s.useMemo)(()=>{let e=new Map;return L.forEach(t=>{let a=e.get(t.clienteId)||{id:t.clienteId,nome:t.nomeCliente,pedidos:0,valor:0};e.set(t.clienteId,{id:t.clienteId,nome:t.nomeCliente,pedidos:a.pedidos+1,valor:a.valor+t.valorTotal})}),Array.from(e.values()).sort((e,t)=>t.valor-e.valor)},[L]),_=async()=>{k(!0);try{let e=(await a.e(7898).then(a.bind(a,67898))).default,t=(await a.e(4071).then(a.bind(a,4071))).default,r=new e({orientation:"tabela"===N?"portrait":"landscape",unit:"mm",format:"a4"}),s=r.internal.pageSize.getWidth(),i=[37,99,235];r.setFillColor(13,13,13),r.rect(0,0,s,40,"F");try{let e=new Image;e.crossOrigin="anonymous",await new Promise(t=>{e.onload=()=>{let a=document.createElement("canvas");a.width=e.width,a.height=e.height;let s=a.getContext("2d");s?.drawImage(e,0,0);let i=a.toDataURL("image/png"),l=25,n=e.width/e.height*l;n>50&&(n=50,l=e.height/e.width*n),r.addImage(i,"PNG",10,7.5,n,l),t()},e.onerror=()=>t(),e.src="/logo.png"})}catch{}r.setTextColor(255,255,255),r.setFontSize(22),r.setFont("helvetica","bold"),r.text("FRPlus",s/2,15,{align:"center"}),r.setFontSize(10),r.setFont("helvetica","normal"),r.setTextColor(180,180,180),r.text("Sistema de Gest\xe3o Comercial",s/2,20,{align:"center"});let n={vendas:"Relat\xf3rio de Vendas",produtos:"Ranking de Produtos",clientes:"Ranking de Clientes",tabela:"Tabela de Pre\xe7os"};r.setTextColor(255,255,255),r.setFontSize(14),r.setFont("helvetica","bold"),r.text(n[N],s/2,30,{align:"center"}),r.setFontSize(8),r.setFont("helvetica","normal"),r.setTextColor(180,180,180),r.text(`${new Date().toLocaleDateString("pt-BR")}`,s-10,12,{align:"right"}),r.text(`${new Date().toLocaleTimeString("pt-BR")}`,s-10,16,{align:"right"}),"tabela"!==N&&(r.text(`Per\xedodo:`,s-10,24,{align:"right"}),r.text(`${new Date(w).toLocaleDateString("pt-BR")} a ${new Date(R).toLocaleDateString("pt-BR")}`,s-10,28,{align:"right"}));let o=45;if(r.setTextColor(30,30,30),"vendas"===N)r.setFontSize(11),r.setFont("helvetica","bold"),r.text(`Total Vendas: R$ ${V.totalVendas.toLocaleString("pt-BR",{minimumFractionDigits:2})}`,15,o),r.text(`Pedidos: ${V.totalPedidos}`,100,o),r.text(`Ticket M\xe9dio: R$ ${V.ticketMedio.toLocaleString("pt-BR",{minimumFractionDigits:2})}`,150,o),o+=10,t(r,{startY:o,head:[["Pedido","Cliente","Data","Itens","Valor"]],body:L.map(e=>[`#${e.id.slice(-6)}`,e.nomeCliente||"Cliente Desconhecido",new Date(e.data).toLocaleDateString("pt-BR"),e.itens.length.toString(),`R$ ${e.valorTotal.toLocaleString("pt-BR",{minimumFractionDigits:2})}`]),styles:{fontSize:9,cellPadding:3,halign:"center",valign:"middle"},headStyles:{fillColor:i,textColor:255,halign:"center"},columnStyles:{0:{halign:"left"},1:{halign:"left"},4:{halign:"right"}},alternateRowStyles:{fillColor:[245,247,250]},margin:{top:10,left:10,right:10}});else if("produtos"===N)t(r,{startY:o,head:[["#","Produto","Quantidade Vendida","Valor Total"]],body:E.map((e,t)=>[(t+1).toString(),e.nome,e.qtd.toString(),`R$ ${e.valor.toLocaleString("pt-BR",{minimumFractionDigits:2})}`]),styles:{fontSize:9,cellPadding:3,halign:"center"},headStyles:{fillColor:i,textColor:255},columnStyles:{1:{halign:"left"},3:{halign:"right"}},alternateRowStyles:{fillColor:[245,247,250]},foot:[["","TOTAL",E.reduce((e,t)=>e+t.qtd,0).toString(),`R$ ${E.reduce((e,t)=>e+t.valor,0).toLocaleString("pt-BR",{minimumFractionDigits:2})}`]],footStyles:{fillColor:[30,30,30],textColor:255,fontStyle:"bold",halign:"right"},margin:{top:10,left:10,right:10}});else if("clientes"===N)t(r,{startY:o,head:[["#","Cliente","Pedidos","Valor Total"]],body:B.map((e,t)=>[(t+1).toString(),e.nome,e.pedidos.toString(),`R$ ${e.valor.toLocaleString("pt-BR",{minimumFractionDigits:2})}`]),styles:{fontSize:9,cellPadding:3,halign:"center"},headStyles:{fillColor:i,textColor:255},columnStyles:{1:{halign:"left"},3:{halign:"right"}},alternateRowStyles:{fillColor:[245,247,250]},foot:[["","TOTAL",B.reduce((e,t)=>e+t.pedidos,0).toString(),`R$ ${B.reduce((e,t)=>e+t.valor,0).toLocaleString("pt-BR",{minimumFractionDigits:2})}`]],footStyles:{fillColor:[30,30,30],textColor:255,fontStyle:"bold",halign:"right"},margin:{top:10,left:10,right:10}});else if("tabela"===N){"todas"!==C&&(r.setFontSize(11),r.setFont("helvetica","bold"),r.text(`Tabela: ${{todas:"Todas as Tabelas","50a199":"50 a 199 unidades","200a699":"200 a 699 unidades",atacado:"Atacado",avista:"Atacado \xc0 Vista",redes:"Redes"}[C]}`,15,o),o+=8);let e=l.filter(e=>"todas"===D||("sem-fabrica"===D?!e.fabricaId:e.fabricaId===D)).reduce((e,t)=>{let a=t.fabricaId||"sem-fabrica";return e[a]||(e[a]=[]),e[a].push(t),e},{});for(let a of Object.keys(e).sort((e,t)=>{let a="sem-fabrica"===e?"Outros":j.find(t=>t.id===e)?.nome||"Outros",r="sem-fabrica"===t?"Outros":j.find(e=>e.id===t)?.nome||"Outros";return"sem-fabrica"===e?1:"sem-fabrica"===t?-1:a.localeCompare(r)})){let l=e[a],n="sem-fabrica"===a?"OUTROS":(j.find(e=>e.id===a)?.nome||"OUTROS").toUpperCase();o>r.internal.pageSize.getHeight()-40&&(r.addPage(),o=20),r.setFillColor(240,240,240),r.rect(14,o,s-28,8,"F"),r.setFontSize(10),r.setFont("helvetica","bold"),r.setTextColor(50,50,50),r.text(n,16,o+5.5),o+=8;let d=[],c=[];"todas"===C?(d=[["C\xf3digo","Produto","50-199","200-699","Atacado","\xc0 Vista","Redes"]],c=l.map(e=>[e.codigo,e.nome,`R$ ${e.preco50a199?.toFixed(2)||"0.00"}`,`R$ ${e.preco200a699?.toFixed(2)||"0.00"}`,`R$ ${e.precoAtacado?.toFixed(2)||"0.00"}`,`R$ ${e.precoAtacadoAVista?.toFixed(2)||"0.00"}`,`R$ ${e.precoRedes?.toFixed(2)||"0.00"}`])):(d=[["C\xf3digo","Produto","Pre\xe7o"]],c=l.map(e=>{let t="0.00";return"50a199"===C?t=e.preco50a199?.toFixed(2)||"0.00":"200a699"===C?t=e.preco200a699?.toFixed(2)||"0.00":"atacado"===C?t=e.precoAtacado?.toFixed(2)||"0.00":"avista"===C?t=e.precoAtacadoAVista?.toFixed(2)||"0.00":"redes"===C&&(t=e.precoRedes?.toFixed(2)||"0.00"),[e.codigo,e.nome,`R$ ${t}`]})),t(r,{startY:o,head:d,body:c,styles:{fontSize:8,cellPadding:2,valign:"middle",halign:"center"},headStyles:{fillColor:i,textColor:255,halign:"center"},alternateRowStyles:{fillColor:[255,255,255]},margin:{top:10,left:14,right:14},columnStyles:"todas"===C?{0:{cellWidth:20,halign:"left"},1:{cellWidth:"auto",halign:"left"}}:{0:{cellWidth:20,halign:"left"},1:{cellWidth:"auto",halign:"left"},2:{cellWidth:30,halign:"right"}}}),o=r.lastAutoTable.finalY+10}}let d=r.getNumberOfPages();for(let e=1;e<=d;e++)r.setPage(e),r.setFontSize(8),r.setTextColor(150,150,150),r.text(`P\xe1gina ${e} de ${d}`,s/2,r.internal.pageSize.getHeight()-10,{align:"center"}),r.text("FRPlus - Sistema de Gest\xe3o Comercial",15,r.internal.pageSize.getHeight()-10);let c=`${n[N].replace(/ /g,"_")}_${new Date().toISOString().split("T")[0]}.pdf`;r.save(c)}catch(e){console.error("Erro ao exportar PDF:",e)}k(!1)};return(0,r.jsxs)("div",{className:"space-y-5 print:bg-white print:text-black",children:[(0,r.jsxs)("div",{className:"flex flex-col justify-between gap-4 md:flex-row md:items-center print:hidden",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-white",children:"Relat\xf3rios"}),(0,r.jsxs)("p",{className:"text-sm text-gray-400",children:[e.length," pedidos no sistema â€¢ ",L.length," no per\xedodo selecionado"]})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsxs)("button",{onClick:_,disabled:F,className:"flex items-center gap-2 rounded-lg bg-green-600 px-4 py-2 font-medium text-white hover:bg-green-500 transition-all shadow-lg shadow-green-600/20 disabled:opacity-50",children:[r.jsx(n,{className:"h-4 w-4"}),F?"Gerando...":"Exportar PDF"]}),(0,r.jsxs)("button",{onClick:()=>{window.print()},className:"flex items-center gap-2 rounded-lg bg-blue-600 px-4 py-2 font-medium text-white hover:bg-blue-500 transition-all shadow-lg shadow-blue-600/20",children:[r.jsx(o,{className:"h-4 w-4"}),"Imprimir"]})]})]}),r.jsx("div",{className:"form-card print:hidden",children:(0,r.jsxs)("div",{className:"flex flex-wrap items-end gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"label-compact",children:"Tipo de Relat\xf3rio"}),r.jsx("div",{className:"flex gap-1 p-1 rounded-lg bg-white/5 border border-white/10",children:[{id:"vendas",label:"Vendas",icon:d.Z},{id:"produtos",label:"Produtos",icon:c.Z},{id:"clientes",label:"Clientes",icon:x.Z},{id:"tabela",label:"Tabela de Pre\xe7os",icon:h.Z}].map(e=>(0,r.jsxs)("button",{onClick:()=>v(e.id),className:`px-3 py-1.5 text-xs font-medium rounded-md transition-all flex items-center gap-1 ${N===e.id?"bg-blue-600 text-white":"text-gray-400 hover:text-white"}`,children:[r.jsx(e.icon,{className:"h-3 w-3"}),e.label]},e.id))})]}),"tabela"!==N&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"label-compact",children:"Per\xedodo In\xedcio"}),r.jsx("input",{type:"date",value:w,onChange:e=>S(e.target.value),className:"input-compact"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"label-compact",children:"Per\xedodo Fim"}),r.jsx("input",{type:"date",value:R,onChange:e=>P(e.target.value),className:"input-compact"})]})]}),"tabela"===N&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"label-compact",children:"Tabela para Exportar"}),(0,r.jsxs)("select",{value:C,onChange:e=>$(e.target.value),className:"input-compact",children:[r.jsx("option",{value:"todas",children:"Todas as Tabelas"}),r.jsx("option",{value:"50a199",children:"50 a 199 unidades"}),r.jsx("option",{value:"200a699",children:"200 a 699 unidades"}),r.jsx("option",{value:"atacado",children:"Atacado"}),r.jsx("option",{value:"avista",children:"Atacado \xc0 Vista"}),r.jsx("option",{value:"redes",children:"Redes"})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"label-compact",children:"Filtrar por F\xe1brica"}),(0,r.jsxs)("select",{value:D,onChange:e=>T(e.target.value),className:"input-compact",children:[r.jsx("option",{value:"todas",children:"Todas as F\xe1bricas"}),j.sort((e,t)=>e.nome.localeCompare(t.nome)).map(e=>r.jsx("option",{value:e.id,children:e.nome},e.id)),r.jsx("option",{value:"sem-fabrica",children:"Sem F\xe1brica Definida"})]})]})]})]})}),(0,r.jsxs)("div",{ref:O,className:"bg-[#0d0d0d] print:bg-white",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3 print:grid-cols-4",children:[r.jsx("div",{className:"form-card",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 rounded-lg bg-green-500/10",children:r.jsx(h.Z,{className:"h-5 w-5 text-green-400"})}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-xs text-gray-400",children:"Total Vendas"}),(0,r.jsxs)("p",{className:"text-xl font-bold text-white print:text-black",children:["R$ ",V.totalVendas.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})]})}),r.jsx("div",{className:"form-card",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 rounded-lg bg-blue-500/10",children:r.jsx(m.Z,{className:"h-5 w-5 text-blue-400"})}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-xs text-gray-400",children:"Pedidos"}),r.jsx("p",{className:"text-xl font-bold text-white print:text-black",children:V.totalPedidos})]})]})}),r.jsx("div",{className:"form-card",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 rounded-lg bg-purple-500/10",children:r.jsx(p.Z,{className:"h-5 w-5 text-purple-400"})}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-xs text-gray-400",children:"Ticket M\xe9dio"}),(0,r.jsxs)("p",{className:"text-xl font-bold text-white print:text-black",children:["R$ ",V.ticketMedio.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})]})}),r.jsx("div",{className:"form-card",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 rounded-lg bg-orange-500/10",children:r.jsx(x.Z,{className:"h-5 w-5 text-orange-400"})}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-xs text-gray-400",children:"Clientes Ativos"}),r.jsx("p",{className:"text-xl font-bold text-white print:text-black",children:B.length})]})]})})]}),"vendas"===N&&(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"form-card",children:[r.jsx("h3",{className:"text-lg font-semibold text-white print:text-black mb-4",children:"Vendas por Dia"}),r.jsx("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full text-sm",children:[r.jsx("thead",{className:"border-b border-white/10 print:border-gray-300",children:(0,r.jsxs)("tr",{children:[r.jsx("th",{className:"text-left py-2 text-gray-400 print:text-gray-600",children:"Data"}),r.jsx("th",{className:"text-left py-2 text-gray-400 print:text-gray-600",children:"Clientes"}),r.jsx("th",{className:"text-right py-2 text-gray-400 print:text-gray-600",children:"Valor"})]})}),r.jsx("tbody",{children:Object.entries(V.vendasPorDia).sort((e,t)=>new Date(t[0].split("/").reverse().join("-")).getTime()-new Date(e[0].split("/").reverse().join("-")).getTime()).map(([e,t])=>{let a=V.clientesPorDia?.[e],s=Array.from(a||[]),i=s.slice(0,3).join(", ")+(s.length>3?` e mais ${s.length-3}...`:"");return(0,r.jsxs)("tr",{className:"border-b border-white/5 print:border-gray-200",children:[r.jsx("td",{className:"py-2 text-white print:text-black",children:e}),r.jsx("td",{className:"py-2 text-xs text-gray-400 print:text-gray-600 max-w-[200px] truncate",title:Array.from(a||[]).join(", "),children:i||"-"}),(0,r.jsxs)("td",{className:"py-2 text-right text-green-400 print:text-green-600 font-medium",children:["R$ ",t.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]},e)})})]})})]}),(0,r.jsxs)("div",{className:"form-card",children:[r.jsx("h3",{className:"text-lg font-semibold text-white print:text-black mb-4",children:"Detalhamento de Pedidos"}),r.jsx("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full text-sm",children:[r.jsx("thead",{className:"border-b border-white/10 print:border-gray-300",children:(0,r.jsxs)("tr",{children:[r.jsx("th",{className:"text-left py-2 text-gray-400 print:text-gray-600",children:"Pedido"}),r.jsx("th",{className:"text-left py-2 text-gray-400 print:text-gray-600",children:"Cliente"}),r.jsx("th",{className:"text-left py-2 text-gray-400 print:text-gray-600",children:"Data"}),r.jsx("th",{className:"text-center py-2 text-gray-400 print:text-gray-600",children:"Itens"}),r.jsx("th",{className:"text-right py-2 text-gray-400 print:text-gray-600",children:"Valor"})]})}),r.jsx("tbody",{children:L.sort((e,t)=>new Date(t.data).getTime()-new Date(e.data).getTime()).map(e=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("tr",{className:"border-b border-white/5 print:border-gray-200 cursor-pointer hover:bg-white/5 transition-colors",onClick:()=>z(q===e.id?null:e.id),children:[r.jsx("td",{className:"py-2 font-mono text-white print:text-black",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[q===e.id?r.jsx(g.Z,{size:14,className:"text-gray-400"}):r.jsx(b.Z,{size:14,className:"text-gray-400"}),"#",e.id.slice(-6)]})}),r.jsx("td",{className:"py-2 text-white print:text-black",children:e.nomeCliente||"Cliente Desconhecido"}),r.jsx("td",{className:"py-2 text-gray-400 print:text-gray-600",children:new Date(e.data).toLocaleDateString("pt-BR")}),r.jsx("td",{className:"py-2 text-center text-gray-400 print:text-gray-600",children:e.itens.length}),r.jsx("td",{className:"py-2 text-right text-green-400 print:text-green-600 font-medium",children:(0,r.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,r.jsxs)("span",{children:["R$ ",e.valorTotal.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),r.jsx("button",{onClick:a=>{a.stopPropagation();let r=t.find(t=>t.id===e.clienteId)?.celular||"";if(!r){alert("Cliente sem celular cadastrado");return}let s=`Ol\xe1 *${e.nomeCliente}*, segue o resumo do seu pedido *#${e.id.slice(-6)}*:

`+e.itens.map(e=>`- ${e.quantidade}x ${e.nomeProduto} (R$ ${e.total.toFixed(2)})`).join("\n")+`

*Total: R$ ${e.valorTotal.toFixed(2)}*`,i=r.replace(/\D/g,"");fetch("/api/whatsapp/send-text",{method:"POST",body:JSON.stringify({phone:"55"+i,message:s})}).then(async e=>{e.ok?alert("Mensagem enviada via Evolution API!"):(window.open(`https://wa.me/55${i}?text=${encodeURIComponent(s)}`,"_blank"),alert("Erro na API, abrindo WhatsApp Web..."))})},className:"p-1 rounded bg-green-600/20 text-green-400 hover:bg-green-600 hover:text-white transition-colors",title:"Enviar no WhatsApp",children:r.jsx(u.Z,{size:14})})]})})]},e.id),q===e.id&&r.jsx("tr",{className:"bg-white/5 print:bg-gray-50",children:r.jsx("td",{colSpan:5,className:"p-0",children:r.jsx(y.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"p-4",children:(0,r.jsxs)("div",{className:"bg-black/20 print:bg-white rounded-lg p-3 border border-white/10 print:border-gray-200",children:[(0,r.jsxs)("p",{className:"text-sm font-semibold text-white print:text-black mb-2 flex items-center gap-2",children:[r.jsx(c.Z,{size:14,className:"text-blue-400"}),"Itens do Pedido"]}),(0,r.jsxs)("table",{className:"w-full text-xs",children:[r.jsx("thead",{children:(0,r.jsxs)("tr",{className:"text-gray-400 print:text-gray-600 border-b border-white/10 print:border-gray-200",children:[r.jsx("th",{className:"text-left py-2 font-medium",children:"Produto"}),r.jsx("th",{className:"text-center py-2 font-medium",children:"Qtd"}),r.jsx("th",{className:"text-right py-2 font-medium",children:"Unit\xe1rio"}),r.jsx("th",{className:"text-right py-2 font-medium",children:"Total"})]})}),r.jsx("tbody",{children:e.itens.map(e=>(0,r.jsxs)("tr",{className:"border-b border-white/5 print:border-gray-100 last:border-0",children:[r.jsx("td",{className:"py-2 text-white print:text-black",children:e.nomeProduto}),r.jsx("td",{className:"py-2 text-center text-gray-300 print:text-gray-700",children:e.quantidade}),(0,r.jsxs)("td",{className:"py-2 text-right text-gray-300 print:text-gray-700",children:["R$ ",e.precoUnitario.toFixed(2)]}),(0,r.jsxs)("td",{className:"py-2 text-right text-green-400 print:text-green-600 font-medium",children:["R$ ",e.total.toFixed(2)]})]},e.id||e.produtoId))})]})]})})})})]}))})]})})]})]}),"produtos"===N&&(0,r.jsxs)("div",{className:"form-card",children:[r.jsx("h3",{className:"text-lg font-semibold text-white print:text-black mb-4",children:"Ranking de Produtos"}),r.jsx("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full text-sm",children:[r.jsx("thead",{className:"border-b border-white/10 print:border-gray-300",children:(0,r.jsxs)("tr",{children:[r.jsx("th",{className:"text-left py-2 text-gray-400 print:text-gray-600",children:"#"}),r.jsx("th",{className:"text-left py-2 text-gray-400 print:text-gray-600",children:"Produto"}),r.jsx("th",{className:"text-center py-2 text-gray-400 print:text-gray-600",children:"Qtd Vendida"}),r.jsx("th",{className:"text-right py-2 text-gray-400 print:text-gray-600",children:"Valor Total"})]})}),r.jsx("tbody",{children:E.map((e,t)=>(0,r.jsxs)("tr",{className:"border-b border-white/5 print:border-gray-200",children:[r.jsx("td",{className:"py-2 text-gray-500",children:t+1}),r.jsx("td",{className:"py-2 text-white print:text-black font-medium",children:e.nome}),r.jsx("td",{className:"py-2 text-center text-gray-400 print:text-gray-600",children:e.qtd}),(0,r.jsxs)("td",{className:"py-2 text-right text-green-400 print:text-green-600 font-medium",children:["R$ ",e.valor.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]},e.nome))}),r.jsx("tfoot",{className:"border-t border-white/20 print:border-gray-400",children:(0,r.jsxs)("tr",{children:[r.jsx("td",{colSpan:2,className:"py-2 font-bold text-white print:text-black",children:"Total"}),r.jsx("td",{className:"py-2 text-center font-bold text-white print:text-black",children:E.reduce((e,t)=>e+t.qtd,0)}),(0,r.jsxs)("td",{className:"py-2 text-right font-bold text-green-400 print:text-green-600",children:["R$ ",E.reduce((e,t)=>e+t.valor,0).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})})]})})]}),"clientes"===N&&(0,r.jsxs)("div",{className:"form-card",children:[r.jsx("h3",{className:"text-lg font-semibold text-white print:text-black mb-4",children:"Ranking de Clientes"}),r.jsx("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full text-sm",children:[r.jsx("thead",{className:"border-b border-white/10 print:border-gray-300",children:(0,r.jsxs)("tr",{children:[r.jsx("th",{className:"text-left py-2 text-gray-400 print:text-gray-600",children:"#"}),r.jsx("th",{className:"text-left py-2 text-gray-400 print:text-gray-600",children:"Cliente"}),r.jsx("th",{className:"text-center py-2 text-gray-400 print:text-gray-600",children:"Pedidos"}),r.jsx("th",{className:"text-right py-2 text-gray-400 print:text-gray-600",children:"Valor Total"})]})}),r.jsx("tbody",{children:B.map((e,t)=>(0,r.jsxs)(s.Fragment,{children:[(0,r.jsxs)("tr",{className:"border-b border-white/5 print:border-gray-200 cursor-pointer hover:bg-white/5 transition-colors",onClick:()=>Z(A===e.id?null:e.id),children:[r.jsx("td",{className:"py-2 text-gray-500",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[A===e.id?r.jsx(g.Z,{size:14,className:"text-gray-400"}):r.jsx(b.Z,{size:14,className:"text-gray-400"}),t+1]})}),r.jsx("td",{className:"py-2 text-white print:text-black font-medium",children:e.nome}),r.jsx("td",{className:"py-2 text-center text-gray-400 print:text-gray-600",children:e.pedidos}),(0,r.jsxs)("td",{className:"py-2 text-right text-green-400 print:text-green-600 font-medium",children:["R$ ",e.valor.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),A===e.id&&r.jsx("tr",{className:"bg-white/5 print:bg-gray-50",children:r.jsx("td",{colSpan:4,className:"p-0",children:r.jsx(y.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"p-4",children:(0,r.jsxs)("div",{className:"bg-black/20 print:bg-white rounded-lg p-3 border border-white/10 print:border-gray-200",children:[(0,r.jsxs)("p",{className:"text-sm font-semibold text-white print:text-black mb-2 flex items-center gap-2",children:[r.jsx(m.Z,{size:14,className:"text-blue-400"}),"Hist\xf3rico de Pedidos (Neste Per\xedodo)"]}),(0,r.jsxs)("table",{className:"w-full text-xs",children:[r.jsx("thead",{children:(0,r.jsxs)("tr",{className:"text-gray-400 print:text-gray-600 border-b border-white/10 print:border-gray-200",children:[r.jsx("th",{className:"text-left py-2 font-medium",children:"Data"}),r.jsx("th",{className:"text-center py-2 font-medium",children:"Pedido"}),r.jsx("th",{className:"text-center py-2 font-medium",children:"Itens"}),r.jsx("th",{className:"text-right py-2 font-medium",children:"Total"})]})}),r.jsx("tbody",{children:L.filter(t=>t.clienteId===e.id).sort((e,t)=>new Date(t.data).getTime()-new Date(e.data).getTime()).map(e=>(0,r.jsxs)(s.Fragment,{children:[(0,r.jsxs)("tr",{className:"border-b border-white/5 print:border-gray-100 last:border-0 hover:bg-white/5 cursor-pointer transition-colors",onClick:()=>M(I===e.id?null:e.id),children:[r.jsx("td",{className:"py-2 text-gray-300 print:text-gray-700",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[I===e.id?r.jsx(g.Z,{size:12}):r.jsx(b.Z,{size:12}),new Date(e.data).toLocaleDateString("pt-BR")]})}),(0,r.jsxs)("td",{className:"py-2 text-center text-gray-300 print:text-gray-700 font-mono",children:["#",e.id.slice(-6)]}),r.jsx("td",{className:"py-2 text-center text-gray-300 print:text-gray-700",children:e.itens.length}),(0,r.jsxs)("td",{className:"py-2 text-right text-green-400 print:text-green-600 font-medium",children:["R$ ",e.valorTotal.toFixed(2)]})]}),I===e.id&&r.jsx("tr",{className:"bg-black/20 print:bg-gray-50",children:r.jsx("td",{colSpan:4,className:"p-0",children:r.jsx(y.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"p-3 pl-8",children:(0,r.jsxs)("div",{className:"bg-white/5 print:bg-white rounded border border-white/10 print:border-gray-200 p-2",children:[(0,r.jsxs)("p",{className:"text-xs font-semibold text-gray-400 mb-2 flex items-center gap-2",children:[r.jsx(c.Z,{size:12})," Itens Comprados"]}),(0,r.jsxs)("table",{className:"w-full text-[10px]",children:[r.jsx("thead",{children:(0,r.jsxs)("tr",{className:"text-gray-500 border-b border-white/10",children:[r.jsx("th",{className:"text-left py-1",children:"Produto"}),r.jsx("th",{className:"text-center py-1",children:"Qtd"}),r.jsx("th",{className:"text-right py-1",children:"Total"})]})}),r.jsx("tbody",{children:e.itens.map(e=>(0,r.jsxs)("tr",{className:"border-b border-white/5 last:border-0 hover:bg-white/5",children:[r.jsx("td",{className:"py-1 text-gray-300 print:text-black",children:e.nomeProduto}),r.jsx("td",{className:"py-1 text-center text-gray-400",children:e.quantidade}),(0,r.jsxs)("td",{className:"py-1 text-right text-green-400 print:text-green-600",children:["R$ ",e.total.toFixed(2)]})]},e.id||e.produtoId))})]})]})})})})]},e.id))})]})]})})})})]},e.id))}),r.jsx("tfoot",{className:"border-t border-white/20 print:border-gray-400",children:(0,r.jsxs)("tr",{children:[r.jsx("td",{colSpan:2,className:"py-2 font-bold text-white print:text-black",children:"Total"}),r.jsx("td",{className:"py-2 text-center font-bold text-white print:text-black",children:B.reduce((e,t)=>e+t.pedidos,0)}),(0,r.jsxs)("td",{className:"py-2 text-right font-bold text-green-400 print:text-green-600",children:["R$ ",B.reduce((e,t)=>e+t.valor,0).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})})]})})]}),"tabela"===N&&r.jsx("div",{className:"space-y-8",children:(()=>{let e=l.filter(e=>"todas"===D||("sem-fabrica"===D?!e.fabricaId:e.fabricaId===D)).reduce((e,t)=>{let a=t.fabricaId||"sem-fabrica";return e[a]||(e[a]=[]),e[a].push(t),e},{});return Object.keys(e).sort((e,t)=>{let a="sem-fabrica"===e?"Outros":j.find(t=>t.id===e)?.nome||"Outros",r="sem-fabrica"===t?"Outros":j.find(e=>e.id===t)?.nome||"Outros";return"sem-fabrica"===e?1:"sem-fabrica"===t?-1:a.localeCompare(r)}).map(t=>{let a=e[t],s="sem-fabrica"===t?"Outros":j.find(e=>e.id===t)?.nome||"Outros";return(0,r.jsxs)("div",{className:"form-card break-inside-avoid",children:[r.jsx("div",{className:"flex items-center justify-between mb-4 print:mb-2",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx("h3",{className:"text-lg font-bold text-white print:text-black uppercase tracking-wider",children:s}),(0,r.jsxs)("span",{className:"text-sm text-gray-400 print:text-gray-600",children:["(",a.length," itens)"]})]})}),r.jsx("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full text-sm",children:[r.jsx("thead",{className:"border-b border-white/10 print:border-gray-300",children:(0,r.jsxs)("tr",{children:[r.jsx("th",{className:"text-left py-2 text-gray-400 print:text-gray-600",children:"C\xf3digo"}),r.jsx("th",{className:"text-left py-2 text-gray-400 print:text-gray-600",children:"Produto"}),r.jsx("th",{className:"text-right py-2 text-gray-400 print:text-gray-600",children:"50-199"}),r.jsx("th",{className:"text-right py-2 text-gray-400 print:text-gray-600",children:"200-699"}),r.jsx("th",{className:"text-right py-2 text-gray-400 print:text-gray-600",children:"Atacado"}),r.jsx("th",{className:"text-right py-2 text-gray-400 print:text-gray-600",children:"\xc0 Vista"}),r.jsx("th",{className:"text-right py-2 text-gray-400 print:text-gray-600",children:"Redes"})]})}),r.jsx("tbody",{children:a.map(e=>(0,r.jsxs)("tr",{className:"border-b border-white/5 print:border-gray-200 hover:bg-white/5 print:hover:bg-transparent transition-colors",children:[r.jsx("td",{className:"py-2 font-mono text-gray-400 print:text-gray-600 text-xs",children:e.codigo}),r.jsx("td",{className:"py-2 text-white print:text-black font-medium",children:e.nome}),(0,r.jsxs)("td",{className:"py-2 text-right text-green-400 print:text-green-600",children:["R$ ",e.preco50a199?.toFixed(2)||"0.00"]}),(0,r.jsxs)("td",{className:"py-2 text-right text-green-400 print:text-green-600",children:["R$ ",e.preco200a699?.toFixed(2)||"0.00"]}),(0,r.jsxs)("td",{className:"py-2 text-right text-green-400 print:text-green-600",children:["R$ ",e.precoAtacado?.toFixed(2)||"0.00"]}),(0,r.jsxs)("td",{className:"py-2 text-right text-green-400 print:text-green-600",children:["R$ ",e.precoAtacadoAVista?.toFixed(2)||"0.00"]}),(0,r.jsxs)("td",{className:"py-2 text-right text-green-400 print:text-green-600",children:["R$ ",e.precoRedes?.toFixed(2)||"0.00"]})]},e.id))})]})})]},t)})})()})]})]})}},90314:(e,t,a)=>{"use strict";a.r(t),a.d(t,{$$typeof:()=>i,__esModule:()=>s,default:()=>l});let r=(0,a(86843).createProxy)(String.raw`E:\FRPlus\frplus-web\src\app\dashboard\relatorios\page.tsx`),{__esModule:s,$$typeof:i}=r,l=r.default}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[1638,995,9065,100,6484],()=>a(27860));module.exports=r})();