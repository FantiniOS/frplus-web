(()=>{var e={};e.id=3811,e.ids=[3811],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},67360:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>o.a,__next_app__:()=>p,originalPathname:()=>x,pages:()=>c,routeModule:()=>u,tree:()=>i});var s=a(50482),r=a(69108),l=a(62563),o=a.n(l),d=a(68300),n={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>d[e]);a.d(t,n);let i=["",{children:["dashboard",{children:["pedidos",{children:["novo",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,91688)),"E:\\FRPlus\\frplus-web\\src\\app\\dashboard\\pedidos\\novo\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,94699)),"E:\\FRPlus\\frplus-web\\src\\app\\dashboard\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,49342)),"E:\\FRPlus\\frplus-web\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,69361,23)),"next/dist/client/components/not-found-error"]}],c=["E:\\FRPlus\\frplus-web\\src\\app\\dashboard\\pedidos\\novo\\page.tsx"],x="/dashboard/pedidos/novo/page",p={require:a,loadChunk:()=>Promise.resolve()},u=new s.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/dashboard/pedidos/novo/page",pathname:"/dashboard/pedidos/novo",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:i}})},29016:(e,t,a)=>{Promise.resolve().then(a.bind(a,66666))},63024:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(69224).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},31498:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(69224).Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]])},28765:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(69224).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},18822:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(69224).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},66666:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>p});var s=a(95344),r=a(47664),l=a(63024),o=a(28765),d=a(18822),n=a(31498),i=a(66137),c=a(3729),x=a(8428);function p(){let{clients:e,products:t,addOrder:a,showToast:p,fabricas:u}=(0,i.e)(),m=(0,x.useRouter)(),[h,g]=(0,c.useState)("factory"),[b,y]=(0,c.useState)(""),[j,f]=(0,c.useState)(""),[N,v]=(0,c.useState)(""),[w,C]=(0,c.useState)(""),[P,S]=(0,c.useState)([]),[k,q]=(0,c.useState)(""),[A,Z]=(0,c.useState)(new Date().toISOString().split("T")[0]),[R,F]=(0,c.useState)("preco50a199"),[_,I]=(0,c.useState)("30 dias"),[L,z]=(0,c.useState)("all"),E=e=>{y(e),g("client"),S([])},D=u.find(e=>e.id===b),B=e=>{f(e),g("order")},M=e.find(e=>e.id===j),T=(0,c.useMemo)(()=>N?e.filter(e=>(e.nomeFantasia||e.razaoSocial||"").toLowerCase().includes(N.toLowerCase())||e.cnpj.includes(N)||(e.cidade||"").toLowerCase().includes(N.toLowerCase())):e,[e,N]),$=(0,c.useMemo)(()=>{if("order"!==h)return[];let e=t.filter(e=>e.fabricaId===b);if(w){let t=w.toLowerCase();e=e.filter(e=>e.nome.toLowerCase().includes(t)||e.codigo.toLowerCase().includes(t))}return"all"!==L&&(e=e.filter(e=>(e.categoria||"Geral")===L)),e},[t,w,b,L,h]),V=(0,c.useMemo)(()=>{let e=new Set;return t.filter(e=>e.fabricaId===b).forEach(t=>e.add(t.categoria||"Geral")),Array.from(e).sort()},[t,b]),G=(e,t)=>{switch(t){case"200a699":return Number(e.preco200a699);case"atacado":return Number(e.precoAtacado);case"atacadoAVista":return Number(e.precoAtacadoAVista);case"redes":return Number(e.precoRedes);default:return Number(e.preco50a199)}},U=e=>G(e,R),O=e=>{F(e),S(a=>a.map(a=>{let s=t.find(e=>e.id===a.produtoId);if(!s)return a;let r=G(s,e);return{...a,precoUnitario:r,total:r*a.quantidade}}))},H=(e,t,a)=>{let s=U(a);if(t<=0){S(t=>t.filter(t=>t.produtoId!==e));return}S(r=>r.find(t=>t.produtoId===e)?r.map(a=>a.produtoId===e?{...a,quantidade:t,total:t*s}:a):[...r,{produtoId:e,nomeProduto:a.nome,quantidade:t,precoUnitario:s,total:t*s}])},J=(e,t)=>{if("Enter"===e.key||"ArrowDown"===e.key){e.preventDefault();let a=document.getElementById(`qtd-${t+1}`);a?.focus()}if("ArrowUp"===e.key){e.preventDefault();let a=document.getElementById(`qtd-${t-1}`);a?.focus()}},K=P.reduce((e,t)=>e+t.total,0),Q=P.reduce((e,t)=>e+t.quantidade,0);return"factory"===h?(0,s.jsxs)("div",{className:"h-[calc(100vh-100px)] flex flex-col items-center justify-center animate-in fade-in zoom-in duration-300",children:[s.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Novo Pedido"}),s.jsx("p",{className:"text-gray-400 mb-8",children:"Passo 1: Selecione a Representada"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 w-full max-w-4xl px-4",children:u.map(e=>(0,s.jsxs)("button",{onClick:()=>E(e.id),className:"bg-white/5 border border-white/10 hover:bg-blue-600/20 hover:border-blue-500 p-8 rounded-xl transition-all group text-left relative overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500/0 to-blue-500/0 group-hover:to-blue-500/10 transition-all"}),s.jsx(r.Z,{className:"h-8 w-8 text-gray-400 group-hover:text-blue-400 mb-4"}),s.jsx("h3",{className:"text-xl font-bold text-white mb-1 relative z-10",children:e.nome}),(0,s.jsxs)("p",{className:"text-sm text-gray-500 group-hover:text-gray-300 relative z-10",children:[t.filter(t=>t.fabricaId===e.id).length," produtos"]})]},e.id))})]}):"client"===h?s.jsx("div",{className:"h-[calc(100vh-100px)] flex flex-col items-center animate-in slide-in-from-right duration-300",children:(0,s.jsxs)("div",{className:"w-full max-w-5xl px-4 pt-8 flex flex-col h-full",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,s.jsxs)("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-white",children:"Selecione o Cliente"}),(0,s.jsxs)("p",{className:"text-gray-400 flex items-center gap-2",children:[s.jsx(r.Z,{className:"h-3 w-3"}),"Pedido para: ",s.jsx("span",{className:"text-blue-400",children:D?.nome})]})]}),(0,s.jsxs)("button",{onClick:()=>g("factory"),className:"text-gray-400 hover:text-white flex items-center gap-2",children:[s.jsx(l.Z,{className:"h-4 w-4"})," Voltar"]})]}),(0,s.jsxs)("div",{className:"relative mb-6",children:[s.jsx(o.Z,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-500"}),s.jsx("input",{autoFocus:!0,type:"text",value:N,onChange:e=>v(e.target.value),placeholder:"Buscar por Raz\xe3o Social, Nome Fantasia, CNPJ ou Cidade...",className:"w-full bg-gray-900 border border-gray-700 rounded-xl text-lg px-12 py-4 focus:border-blue-500 outline-none text-white shadow-lg"})]}),(0,s.jsxs)("div",{className:"flex-1 overflow-y-auto bg-gray-900/50 border border-gray-800 rounded-xl shadow-inner scrollbar-thin scrollbar-thumb-gray-700",children:[(0,s.jsxs)("table",{className:"w-full text-left border-collapse",children:[s.jsx("thead",{className:"bg-gray-800/50 sticky top-0 backdrop-blur-sm z-10",children:(0,s.jsxs)("tr",{children:[s.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase",children:"Cliente / Raz\xe3o Social"}),s.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase",children:"CNPJ"}),s.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase",children:"Cidade/UF"}),s.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase text-right",children:"A\xe7\xe3o"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-800",children:T.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-blue-600/10 transition-colors group cursor-pointer",onClick:()=>B(e.id),children:[(0,s.jsxs)("td",{className:"p-4",children:[s.jsx("div",{className:"font-bold text-white group-hover:text-blue-300",children:e.nomeFantasia}),s.jsx("div",{className:"text-xs text-gray-500",children:e.razaoSocial})]}),s.jsx("td",{className:"p-4 text-sm text-gray-400 font-mono",children:e.cnpj}),(0,s.jsxs)("td",{className:"p-4 text-sm text-gray-400",children:[e.cidade," ",(0,s.jsxs)("span",{className:"text-gray-600 text-xs",children:["/ ",e.estado]})]}),s.jsx("td",{className:"p-4 text-right",children:s.jsx("button",{className:"bg-blue-600/20 text-blue-400 p-2 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity",children:s.jsx(l.Z,{className:"h-4 w-4 rotate-180"})})})]},e.id))})]}),0===T.length&&(0,s.jsxs)("div",{className:"p-12 text-center text-gray-500",children:[s.jsx(d.Z,{className:"h-12 w-12 mx-auto mb-4 opacity-20"}),(0,s.jsxs)("p",{children:['Nenhum cliente encontrado com "',N,'"']})]})]})]})}):(0,s.jsxs)("div",{className:"h-[calc(100vh-100px)] flex flex-col bg-gray-900 text-white animate-in slide-in-from-right duration-300",children:[(0,s.jsxs)("div",{className:"h-14 bg-gray-800 border-b border-gray-700 flex items-center justify-between px-4 sticky top-0 z-20 shadow-md",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("button",{onClick:()=>g("client"),className:"text-gray-400 hover:text-white flex items-center gap-2 text-sm font-medium",children:[s.jsx(l.Z,{className:"h-4 w-4"}),"Trocar Cliente"]}),s.jsx("div",{className:"h-6 w-px bg-gray-600 mx-2"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[s.jsx(r.Z,{className:"h-4 w-4 text-blue-400"}),s.jsx("span",{className:"font-bold text-lg",children:D?.nome})]}),s.jsx("div",{className:"h-6 w-px bg-gray-600 mx-2"}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(d.Z,{className:"h-4 w-4 text-gray-400"}),s.jsx("span",{className:"font-medium text-gray-300",children:M?.nomeFantasia})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("div",{className:"text-right",children:[s.jsx("p",{className:"text-xs text-gray-400 uppercase",children:"Total do Pedido"}),s.jsx("p",{className:"text-xl font-bold text-green-400 leading-none",children:K.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})})]}),(0,s.jsxs)("button",{onClick:()=>j?0===P.length?p("Adicione produtos","error"):void(a({clienteId:j,fabricaId:b,nomeCliente:M?.nomeFantasia||"",data:new Date(A+"T12:00:00").toISOString(),itens:P,valorTotal:K,observacoes:k,status:"Pendente",tabelaPreco:R,condicaoPagamento:_}),m.push("/dashboard/pedidos")):p("Selecione um cliente","error"),disabled:0===P.length,className:"bg-green-600 hover:bg-green-500 text-white px-6 py-2 rounded font-bold text-sm disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[s.jsx(n.Z,{className:"h-4 w-4"}),"FINALIZAR (F2)"]})]})]}),(0,s.jsxs)("div",{className:"flex-1 flex overflow-hidden",children:[(0,s.jsxs)("div",{className:"flex-1 flex flex-col border-r border-gray-700",children:[(0,s.jsxs)("div",{className:"bg-gray-800 p-2 flex gap-2 border-b border-gray-700",children:[(0,s.jsxs)("div",{className:"relative flex-1",children:[s.jsx(o.Z,{className:"absolute left-2 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-500"}),s.jsx("input",{autoFocus:!0,type:"text",value:w,onChange:e=>C(e.target.value),placeholder:`Buscar produto em ${D?.nome}...`,className:"w-full bg-gray-900 border border-gray-600 rounded text-sm px-8 py-1 focus:border-blue-500 outline-none text-white h-8"})]}),(0,s.jsxs)("select",{value:L,onChange:e=>z(e.target.value),className:"bg-gray-900 border border-gray-600 rounded text-sm px-3 py-1 outline-none text-white h-8 w-48",children:[s.jsx("option",{value:"all",children:"Todas Categorias"}),V.map(e=>s.jsx("option",{value:e,children:e},e))]})]}),(0,s.jsxs)("div",{className:"flex-1 overflow-auto bg-gray-900",children:[(0,s.jsxs)("table",{className:"w-full text-left border-collapse",children:[s.jsx("thead",{className:"bg-gray-800 text-xs text-gray-400 uppercase font-semibold sticky top-0 z-10 shadow-sm",children:(0,s.jsxs)("tr",{children:[s.jsx("th",{className:"px-3 py-2 border-b border-gray-700 w-20",children:"C\xf3d"}),s.jsx("th",{className:"px-3 py-2 border-b border-gray-700",children:"Produto"}),s.jsx("th",{className:"px-3 py-2 border-b border-gray-700 w-32",children:"Categ."}),s.jsx("th",{className:"px-3 py-2 border-b border-gray-700 w-28 text-right",children:"Pre\xe7o"}),s.jsx("th",{className:"px-3 py-2 border-b border-gray-700 w-24 text-center bg-gray-700/50",children:"Qtd."}),s.jsx("th",{className:"px-3 py-2 border-b border-gray-700 w-32 text-right",children:"Total"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-800",children:$.map((e,t)=>{let a=P.find(t=>t.produtoId===e.id),r=a?.quantidade||0,l=U(e);return(0,s.jsxs)("tr",{className:`
                                                group transition-colors 
                                                ${r>0?"bg-blue-900/20":"even:bg-gray-800/30 hover:bg-gray-800"}
                                            `,children:[s.jsx("td",{className:"px-3 py-1.5 text-xs text-gray-500 font-mono border-r border-gray-800/50",children:e.codigo}),s.jsx("td",{className:"px-3 py-1.5 text-sm font-medium text-gray-200 border-r border-gray-800/50",children:e.nome}),s.jsx("td",{className:"px-3 py-1.5 text-xs text-gray-500 border-r border-gray-800/50 truncate max-w-[100px]",children:e.categoria||"-"}),s.jsx("td",{className:"px-3 py-1.5 text-sm text-gray-400 text-right border-r border-gray-800/50",children:l.toLocaleString("pt-BR",{minimumFractionDigits:2})}),s.jsx("td",{className:"px-1 py-1 text-center border-r border-gray-800/50 bg-gray-800/20",children:s.jsx("input",{id:`qtd-${t}`,type:"number",min:"0",value:r||"",onKeyDown:e=>J(e,t),onChange:t=>H(e.id,Number(t.target.value),e),className:`
                                                        w-full text-center bg-transparent outline-none font-bold text-sm
                                                        ${r>0?"text-blue-400":"text-gray-600 focus:text-white"}
                                                    `,placeholder:"-"})}),s.jsx("td",{className:"px-3 py-1.5 text-sm text-right",children:r>0?s.jsx("span",{className:"text-green-400 font-bold",children:(r*l).toLocaleString("pt-BR",{minimumFractionDigits:2})}):s.jsx("span",{className:"text-gray-700",children:"-"})})]},e.id)})})]}),0===$.length&&s.jsx("div",{className:"p-8 text-center text-gray-500",children:"Nenhum produto encontrado."})]})]}),(0,s.jsxs)("div",{className:"w-80 bg-gray-900 border-l border-gray-700 flex flex-col",children:[(0,s.jsxs)("div",{className:"p-4 space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-xs uppercase font-bold text-gray-500",children:"Cliente Selecionado"}),(0,s.jsxs)("div",{className:"bg-gray-800 border-l-4 border-blue-500 p-3 rounded",children:[s.jsx("div",{className:"font-bold text-white leading-tight",children:M?.nomeFantasia}),s.jsx("div",{className:"text-xs text-gray-400 mt-1",children:M?.cnpj}),(0,s.jsxs)("div",{className:"text-xs text-gray-500 mt-0.5",children:[M?.cidade,"/",M?.estado]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,s.jsxs)("div",{className:"space-y-1",children:[s.jsx("label",{className:"text-xs uppercase font-bold text-gray-500",children:"Tabela"}),(0,s.jsxs)("select",{value:R,onChange:e=>O(e.target.value),className:"w-full bg-gray-800 border border-gray-700 rounded text-xs px-2 py-1.5 outline-none text-white",children:[s.jsx("option",{value:"preco50a199",children:"Padr\xe3o"}),s.jsx("option",{value:"preco200a699",children:"200 a 699"}),s.jsx("option",{value:"atacado",children:"Atacado"}),s.jsx("option",{value:"atacadoAVista",children:"Atacado \xe0 Vista"}),s.jsx("option",{value:"redes",children:"Redes"})]})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[s.jsx("label",{className:"text-xs uppercase font-bold text-gray-500",children:"Pagto."}),(0,s.jsxs)("select",{value:_,onChange:e=>I(e.target.value),className:"w-full bg-gray-800 border border-gray-700 rounded text-xs px-2 py-1.5 outline-none text-white",children:[s.jsx("option",{children:"A Vista"}),s.jsx("option",{children:"30 Dias"}),s.jsx("option",{children:"30/60 Dias"})]})]})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[s.jsx("label",{className:"text-xs uppercase font-bold text-gray-500",children:"Data de Emiss\xe3o"}),s.jsx("input",{type:"date",value:A,onChange:e=>Z(e.target.value),className:"w-full bg-gray-800 border border-gray-700 rounded text-xs px-2 py-1.5 outline-none text-white"})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[s.jsx("label",{className:"text-xs uppercase font-bold text-gray-500",children:"Observa\xe7\xf5es"}),s.jsx("textarea",{value:k,onChange:e=>q(e.target.value),rows:4,className:"w-full bg-gray-800 border border-gray-700 rounded text-xs px-2 py-1.5 outline-none text-white resize-none",placeholder:"..."})]})]}),(0,s.jsxs)("div",{className:"mt-auto p-4 bg-gray-800/50 border-t border-gray-700",children:[(0,s.jsxs)("div",{className:"flex justify-between text-sm mb-1",children:[s.jsx("span",{className:"text-gray-500",children:"Itens"}),s.jsx("span",{className:"text-white font-mono",children:Q})]}),(0,s.jsxs)("div",{className:"flex justify-between text-lg font-bold mb-4",children:[s.jsx("span",{className:"text-gray-400",children:"Total"}),s.jsx("span",{className:"text-green-400",children:K.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})})]})]})]})]})]})}},91688:(e,t,a)=>{"use strict";a.r(t),a.d(t,{$$typeof:()=>l,__esModule:()=>r,default:()=>o});let s=(0,a(86843).createProxy)(String.raw`E:\FRPlus\frplus-web\src\app\dashboard\pedidos\novo\page.tsx`),{__esModule:r,$$typeof:l}=s,o=s.default}};var t=require("../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[1638,995,9065,5187,6484],()=>a(67360));module.exports=s})();