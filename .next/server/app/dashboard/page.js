(()=>{var e={};e.id=7702,e.ids=[7702],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},15706:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>o,routeModule:()=>h,tree:()=>c});var a=s(50482),r=s(69108),l=s(62563),i=s.n(l),n=s(68300),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);s.d(t,d);let c=["",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,99468)),"E:\\FRPlus\\frplus-web\\src\\app\\dashboard\\page.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,94699)),"E:\\FRPlus\\frplus-web\\src\\app\\dashboard\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,49342)),"E:\\FRPlus\\frplus-web\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,69361,23)),"next/dist/client/components/not-found-error"]}],o=["E:\\FRPlus\\frplus-web\\src\\app\\dashboard\\page.tsx"],x="/dashboard/page",m={require:s,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/dashboard/page",pathname:"/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},48388:(e,t,s)=>{Promise.resolve().then(s.bind(s,42707))},45961:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(69224).Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},48411:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(69224).Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},91917:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(69224).Z)("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]])},12401:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(69224).Z)("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]])},46064:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(69224).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},42707:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>N});var a=s(95344),r=s(48411),l=s(69224);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,l.Z)("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);var n=s(12401),d=s(46064),c=s(89895),o=s(91917),x=s(66137),m=s(56506),h=s(3729),p=s(35341);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let u=(0,l.Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);var b=s(45961),g=s(35851);function j(){let[e,t]=(0,h.useState)([]),[s,r]=(0,h.useState)([]),[l,i]=(0,h.useState)([]),[n,c]=(0,h.useState)(!0),[o,x]=(0,h.useState)({inactive:{total:0,vermelho:0,laranja:0,amarelo:0},opportunities:{total:0},insights:{total:0}});(0,h.useEffect)(()=>{(async()=>{try{let[e,s,a]=await Promise.all([fetch("/api/ai/inactive-clients?days=30"),fetch("/api/ai/opportunities"),fetch("/api/ai/sales-insights")]);if(e.ok){let s=await e.json();t(s.clients?.slice(0,5)||[]),x(e=>({...e,inactive:s.summary}))}if(s.ok){let e=await s.json();r(e.opportunities?.slice(0,5)||[]),x(t=>({...t,opportunities:{total:e.summary?.total||0}}))}if(a.ok){let e=await a.json();i(e.insights?.slice(0,5)||[]),x(t=>({...t,insights:{total:e.summary?.total||0}}))}}catch(e){console.error("Error fetching AI insights:",e)}finally{c(!1)}})()},[]);let j={vermelho:"bg-red-500/20 text-red-400 border-red-500/30",laranja:"bg-orange-500/20 text-orange-400 border-orange-500/30",amarelo:"bg-yellow-500/20 text-yellow-400 border-yellow-500/30",verde:"bg-green-500/20 text-green-400 border-green-500/30"},N={alta:"bg-red-500/10 text-red-400",media:"bg-yellow-500/10 text-yellow-400",baixa:"bg-green-500/10 text-green-400"};return n?a.jsx("div",{className:"grid gap-4 md:grid-cols-3",children:[1,2,3].map(e=>(0,a.jsxs)("div",{className:"rounded-xl border border-white/10 bg-white/5 p-6 animate-pulse",children:[a.jsx("div",{className:"h-4 bg-white/10 rounded w-1/2 mb-4"}),(0,a.jsxs)("div",{className:"space-y-3",children:[a.jsx("div",{className:"h-3 bg-white/10 rounded"}),a.jsx("div",{className:"h-3 bg-white/10 rounded w-3/4"})]})]},e))}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 rounded-lg bg-purple-500/20",children:a.jsx(p.Z,{className:"h-5 w-5 text-purple-400"})}),(0,a.jsxs)("div",{children:[a.jsx("h2",{className:"text-lg font-semibold text-white",children:"Intelig\xeancia Comercial"}),a.jsx("p",{className:"text-xs text-gray-400",children:"Insights automatizados para alavancar suas vendas"})]})]}),(0,a.jsxs)(m.default,{href:"/dashboard/ai-insights",className:"text-xs text-purple-400 hover:text-purple-300 flex items-center gap-1",children:["Ver An\xe1lise Completa ",a.jsx(u,{className:"h-3 w-3"})]})]}),(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,a.jsxs)("div",{className:"rounded-xl border border-white/10 bg-white/5 p-4 backdrop-blur-sm",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(b.Z,{className:"h-4 w-4 text-red-400"}),a.jsx("span",{className:"text-sm font-medium text-white",children:"Clientes Inativos"})]}),a.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-red-500/20 text-red-400",children:o.inactive.total})]}),0===e.length?a.jsx("p",{className:"text-xs text-gray-500 text-center py-4",children:"Nenhum cliente inativo"}):a.jsx("div",{className:"space-y-2",children:e.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-2 rounded-lg bg-white/5 hover:bg-white/10 transition-colors",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-xs font-medium text-white truncate",children:e.nomeFantasia}),a.jsx("p",{className:"text-[10px] text-gray-500",children:e.diasInativo?`${e.diasInativo} dias sem comprar`:"Nunca comprou"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[a.jsx("span",{className:`w-2 h-2 rounded-full ${j[e.alertLevel].split(" ")[0]}`}),a.jsx("a",{href:`https://wa.me/55${e.telefone?.replace(/\D/g,"")}`,target:"_blank",className:"p-1 hover:bg-green-500/20 rounded",children:a.jsx(g.Z,{className:"h-3 w-3 text-green-400"})})]})]},e.id))})]}),(0,a.jsxs)("div",{className:"rounded-xl border border-white/10 bg-white/5 p-4 backdrop-blur-sm",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(p.Z,{className:"h-4 w-4 text-yellow-400"}),a.jsx("span",{className:"text-sm font-medium text-white",children:"Oportunidades"})]}),a.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-yellow-500/20 text-yellow-400",children:o.opportunities.total})]}),0===s.length?a.jsx("p",{className:"text-xs text-gray-500 text-center py-4",children:"Nenhuma oportunidade identificada"}):a.jsx("div",{className:"space-y-2",children:s.map((e,t)=>(0,a.jsxs)("div",{className:"p-2 rounded-lg bg-white/5 hover:bg-white/10 transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[a.jsx("p",{className:"text-xs font-medium text-white truncate",children:e.clienteNome}),a.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded ${N[e.priority]}`,children:"upgrade"===e.type?"⬆️":"crossSell"===e.type?"\uD83D\uDED2":"\uD83D\uDCC5"})]}),a.jsx("p",{className:"text-[10px] text-gray-400 line-clamp-2",children:e.description})]},t))})]}),(0,a.jsxs)("div",{className:"rounded-xl border border-white/10 bg-white/5 p-4 backdrop-blur-sm",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(d.Z,{className:"h-4 w-4 text-blue-400"}),a.jsx("span",{className:"text-sm font-medium text-white",children:"Alavancagem"})]}),a.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-blue-500/20 text-blue-400",children:o.insights.total})]}),0===l.length?a.jsx("p",{className:"text-xs text-gray-500 text-center py-4",children:"Nenhum insight dispon\xedvel"}):a.jsx("div",{className:"space-y-2",children:l.map((e,t)=>(0,a.jsxs)("div",{className:"p-2 rounded-lg bg-white/5 hover:bg-white/10 transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[a.jsx("p",{className:"text-xs font-medium text-white truncate",children:e.clienteNome}),a.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded ${N[e.priority]}`,children:e.priority})]}),a.jsx("p",{className:"text-[10px] text-gray-400",children:e.description}),a.jsx("p",{className:"text-[10px] text-blue-400 mt-1",children:e.metric})]},t))})]})]})]})}function N(){let{getDashboardStats:e,orders:t,products:s}=(0,x.e)(),l=e(),h=Array.from({length:7},(e,t)=>{let s=new Date;return s.setDate(s.getDate()-(6-t)),s.toISOString().split("T")[0]}).map(e=>{let s=t.filter(t=>t.data.startsWith(e)).reduce((e,t)=>e+t.valorTotal,0);return{date:e,value:s}}),p=Math.max(...h.map(e=>e.value),1),u=new Map;t.forEach(e=>{e.itens.forEach(e=>{let t=u.get(e.produtoId)||0;u.set(e.produtoId,t+e.quantidade)})});let b=Array.from(u.entries()).map(([e,t])=>{let a=s.find(t=>t.id===e);return{name:a?.nome||"Produto Desconhecido",qtd:t,total:(a?.preco50a199||0)*t}}).sort((e,t)=>t.qtd-e.qtd).slice(0,4),g=[...t].sort((e,t)=>new Date(t.data).getTime()-new Date(e.data).getTime()).slice(0,5);return(0,a.jsxs)("div",{className:"space-y-8 animate-in fade-in duration-500",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white",children:"Bom dia, Fantini"}),a.jsx("p",{className:"text-gray-400",children:"Aqui est\xe1 o resumo da sua opera\xe7\xe3o hoje."})]}),a.jsx(m.default,{href:"/dashboard/pedidos/novo",children:a.jsx("button",{className:"rounded-lg bg-blue-600 px-4 py-2 text-sm font-semibold text-white hover:bg-blue-500 transition-colors shadow-lg shadow-blue-900/20",children:"+ Novo Pedido"})})]}),(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,a.jsxs)("div",{className:"rounded-xl border border-white/10 bg-white/5 p-6 backdrop-blur-sm",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between space-y-0 pb-2",children:[a.jsx("span",{className:"text-sm font-medium text-gray-400",children:"Vendas Totais"}),a.jsx(r.Z,{className:"h-4 w-4 text-green-500"})]}),(0,a.jsxs)("div",{className:"text-2xl font-bold text-white",children:["R$ ",l.totalSales.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),(0,a.jsxs)("p",{className:"text-xs text-green-500 flex items-center mt-1",children:[a.jsx(i,{className:"h-3 w-3 mr-1"})," Crescimento cont\xednuo"]})]}),(0,a.jsxs)("div",{className:"rounded-xl border border-white/10 bg-white/5 p-6 backdrop-blur-sm",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between space-y-0 pb-2",children:[a.jsx("span",{className:"text-sm font-medium text-gray-400",children:"Pedidos"}),a.jsx(n.Z,{className:"h-4 w-4 text-blue-500"})]}),a.jsx("div",{className:"text-2xl font-bold text-white",children:l.totalOrders}),(0,a.jsxs)("p",{className:"text-xs text-blue-500 flex items-center mt-1",children:[a.jsx(d.Z,{className:"h-3 w-3 mr-1"})," Volume atual"]})]}),(0,a.jsxs)("div",{className:"rounded-xl border border-white/10 bg-white/5 p-6 backdrop-blur-sm",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between space-y-0 pb-2",children:[a.jsx("span",{className:"text-sm font-medium text-gray-400",children:"Base de Clientes"}),a.jsx(c.Z,{className:"h-4 w-4 text-orange-500"})]}),a.jsx("div",{className:"text-2xl font-bold text-white",children:l.newClients}),a.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Clientes cadastrados"})]}),(0,a.jsxs)("div",{className:"rounded-xl border border-white/10 bg-white/5 p-6 backdrop-blur-sm",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between space-y-0 pb-2",children:[a.jsx("span",{className:"text-sm font-medium text-gray-400",children:"Produtos"}),a.jsx(o.Z,{className:"h-4 w-4 text-pink-500"})]}),a.jsx("div",{className:"text-2xl font-bold text-white",children:s.length}),a.jsx("p",{className:"text-xs text-pink-500 flex items-center mt-1",children:"Itens cadastrados"})]})]}),(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-7",children:[(0,a.jsxs)("div",{className:"col-span-4 rounded-xl border border-white/10 bg-white/5 p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-white",children:"Vendas (\xdaltimos 7 dias)"}),a.jsx("span",{className:"text-xs text-gray-400",children:"Atualizado em tempo real"})]}),a.jsx("div",{className:"flex h-64 items-end justify-between space-x-2 pt-4 border-b border-white/5 pb-2",children:h.map((e,t)=>{let s=e.value/p*100;return(0,a.jsxs)("div",{className:"group relative flex-1 flex flex-col justify-end items-center gap-2 h-full",children:[a.jsx("div",{className:"w-full rounded-t-sm bg-blue-600 hover:bg-blue-400 transition-all duration-500 ease-out",style:{height:`${s}%`,minHeight:"4px"}}),(0,a.jsxs)("div",{className:"absolute -top-10 left-1/2 -translate-x-1/2 rounded bg-white px-2 py-1 text-xs font-bold text-black opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-10",children:["R$ ",e.value.toFixed(0)]})]},t)})}),a.jsx("div",{className:"mt-2 flex justify-between text-xs text-gray-500 uppercase",children:h.map((e,t)=>a.jsx("span",{className:"flex-1 text-center truncate px-1",children:new Date(e.date).toLocaleDateString("pt-BR",{weekday:"short"})},t))})]}),(0,a.jsxs)("div",{className:"col-span-3 space-y-4",children:[(0,a.jsxs)("div",{className:"rounded-xl border border-white/10 bg-white/5 p-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-4 text-white",children:[a.jsx(o.Z,{className:"h-4 w-4 text-purple-400"}),a.jsx("h3",{className:"text-lg font-semibold",children:"Mais Vendidos"})]}),a.jsx("div",{className:"space-y-4",children:0===b.length?a.jsx("p",{className:"text-sm text-gray-500",children:"Sem dados de vendas."}):b.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-purple-500/10 text-xs font-bold text-purple-400",children:t+1}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-white",children:e.name}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:[e.qtd," unidades"]})]})]}),(0,a.jsxs)("span",{className:"text-sm font-medium text-white",children:["R$ ",e.total.toFixed(0)]})]},t))})]}),(0,a.jsxs)("div",{className:"rounded-xl border border-white/10 bg-white/5 p-6",children:[a.jsx("h3",{className:"mb-4 text-lg font-semibold text-white",children:"\xdaltimos Pedidos"}),(0,a.jsxs)("div",{className:"space-y-3",children:[0===g.length?a.jsx("p",{className:"text-sm text-gray-500",children:"Nenhuma venda recente."}):g.slice(0,3).map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center justify-between border-b border-white/5 pb-2 last:border-0 last:pb-0",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-white",children:e.nomeCliente}),a.jsx("p",{className:"text-xs text-gray-500",children:new Date(e.data).toLocaleDateString()})]}),a.jsx("div",{className:"text-right",children:(0,a.jsxs)("p",{className:"text-sm font-bold text-white",children:["R$ ",e.valorTotal.toFixed(2)]})})]},t)),g.length>0&&a.jsx(m.default,{href:"/dashboard/pedidos",className:"block text-center text-xs text-blue-400 hover:text-blue-300 mt-2",children:"Ver todos"})]})]})]})]}),a.jsx(j,{})]})}},99468:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>l,__esModule:()=>r,default:()=>i});let a=(0,s(86843).createProxy)(String.raw`E:\FRPlus\frplus-web\src\app\dashboard\page.tsx`),{__esModule:r,$$typeof:l}=a,i=a.default}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[1638,995,9065,5187,6484],()=>s(15706));module.exports=a})();