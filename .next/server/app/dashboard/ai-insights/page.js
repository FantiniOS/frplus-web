(()=>{var e={};e.id=2494,e.ids=[2494],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},49276:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>p,originalPathname:()=>x,pages:()=>o,routeModule:()=>h,tree:()=>d});var a=s(50482),i=s(69108),r=s(62563),l=s.n(r),n=s(68300),c={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);s.d(t,c);let d=["",{children:["dashboard",{children:["ai-insights",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,14108)),"E:\\FRPlus\\frplus-web\\src\\app\\dashboard\\ai-insights\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,94699)),"E:\\FRPlus\\frplus-web\\src\\app\\dashboard\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,49342)),"E:\\FRPlus\\frplus-web\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,69361,23)),"next/dist/client/components/not-found-error"]}],o=["E:\\FRPlus\\frplus-web\\src\\app\\dashboard\\ai-insights\\page.tsx"],x="/dashboard/ai-insights/page",p={require:s,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/dashboard/ai-insights/page",pathname:"/dashboard/ai-insights",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},80243:(e,t,s)=>{Promise.resolve().then(s.bind(s,8842))},45961:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(69224).Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},63024:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(69224).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},17418:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(69224).Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},33733:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(69224).Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},46064:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(69224).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},8842:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>g});var a=s(95344),i=s(3729),r=s(56506),l=s(45961),n=s(35341),c=s(46064),d=s(63024),o=s(33733),x=s(17418),p=s(35851),h=s(69224);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let m=(0,h.Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),u=(0,h.Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);function g(){let[e,t]=(0,i.useState)("inactive"),[s,h]=(0,i.useState)(15),[g,b]=(0,i.useState)(!0),[y,j]=(0,i.useState)([]),[N,v]=(0,i.useState)([]),[f,w]=(0,i.useState)([]),[k,P]=(0,i.useState)({inactive:{total:0,vermelho:0,laranja:0,amarelo:0},opportunities:{total:0,upgrade:0,crossSell:0,seasonal:0},insights:{total:0,lowTicket:0,decliningVolume:0,untappedPotential:0}}),D=(0,i.useCallback)(async()=>{b(!0);try{let[e,t,a]=await Promise.all([fetch(`/api/ai/inactive-clients?days=${s}`),fetch("/api/ai/opportunities"),fetch("/api/ai/sales-insights")]);if(e.ok){let t=await e.json();j(t.clients||[]),P(e=>({...e,inactive:t.summary}))}if(t.ok){let e=await t.json();v(e.opportunities||[]),P(t=>({...t,opportunities:e.summary}))}if(a.ok){let e=await a.json();w(e.insights||[]),P(t=>({...t,insights:e.summary}))}}catch(e){console.error("Error fetching AI data:",e)}finally{b(!1)}},[s]);(0,i.useEffect)(()=>{D()},[D]);let Z={vermelho:"bg-red-500/20 text-red-400 border-red-500/30",laranja:"bg-orange-500/20 text-orange-400 border-orange-500/30",amarelo:"bg-yellow-500/20 text-yellow-400 border-yellow-500/30",verde:"bg-green-500/20 text-green-400 border-green-500/30"},_={alta:"bg-red-500/10 text-red-400 border-red-500/20",media:"bg-yellow-500/10 text-yellow-400 border-yellow-500/20",baixa:"bg-green-500/10 text-green-400 border-green-500/20"},C=[{id:"inactive",label:"Clientes Inativos",icon:l.Z,color:"text-red-400",count:k.inactive.total},{id:"opportunities",label:"Oportunidades",icon:n.Z,color:"text-yellow-400",count:k.opportunities.total},{id:"insights",label:"Alavancagem",icon:c.Z,color:"text-blue-400",count:k.insights.total}];return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[a.jsx(r.default,{href:"/dashboard",className:"rounded-lg bg-white/5 p-2 hover:bg-white/10 transition-colors",children:a.jsx(d.Z,{className:"h-5 w-5 text-gray-400"})}),(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-white",children:"Intelig\xeancia Comercial"}),a.jsx("p",{className:"text-sm text-gray-400",children:"An\xe1lise de clientes e oportunidades de neg\xf3cio"})]})]}),(0,a.jsxs)("button",{onClick:D,disabled:g,className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-purple-600/20 text-purple-400 hover:bg-purple-600/30 transition-colors disabled:opacity-50",children:[a.jsx(o.Z,{className:`h-4 w-4 ${g?"animate-spin":""}`}),"Atualizar"]})]}),a.jsx("div",{className:"flex gap-2 p-1 rounded-xl bg-white/5",children:C.map(s=>(0,a.jsxs)("button",{onClick:()=>t(s.id),className:`flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-lg text-sm font-medium transition-all ${e===s.id?"bg-white/10 text-white":"text-gray-400 hover:text-white hover:bg-white/5"}`,children:[a.jsx(s.icon,{className:`h-4 w-4 ${e===s.id?s.color:""}`}),s.label,a.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded-full ${e===s.id?"bg-white/20":"bg-white/5"}`,children:s.count})]},s.id))}),a.jsx("div",{className:"rounded-xl border border-white/10 bg-white/5 p-6 backdrop-blur-sm",children:g?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx("div",{className:"w-8 h-8 border-2 border-purple-500 border-t-transparent rounded-full animate-spin"})}):(0,a.jsxs)(a.Fragment,{children:["inactive"===e&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 pb-4 border-b border-white/10",children:[a.jsx(x.Z,{className:"h-4 w-4 text-gray-400"}),a.jsx("span",{className:"text-sm text-gray-400",children:"Mostrar clientes inativos h\xe1:"}),[15,30,60].map(e=>(0,a.jsxs)("button",{onClick:()=>h(e),className:`px-3 py-1 rounded-lg text-sm transition-colors ${s===e?"bg-purple-600 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:[e,"+ dias"]},e))]}),(0,a.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"p-3 rounded-lg bg-white/5 text-center",children:[a.jsx("p",{className:"text-2xl font-bold text-white",children:k.inactive.total}),a.jsx("p",{className:"text-xs text-gray-400",children:"Total"})]}),(0,a.jsxs)("div",{className:"p-3 rounded-lg bg-red-500/10 text-center",children:[a.jsx("p",{className:"text-2xl font-bold text-red-400",children:k.inactive.vermelho}),a.jsx("p",{className:"text-xs text-gray-400",children:"60+ dias"})]}),(0,a.jsxs)("div",{className:"p-3 rounded-lg bg-orange-500/10 text-center",children:[a.jsx("p",{className:"text-2xl font-bold text-orange-400",children:k.inactive.laranja}),a.jsx("p",{className:"text-xs text-gray-400",children:"30-59 dias"})]}),(0,a.jsxs)("div",{className:"p-3 rounded-lg bg-yellow-500/10 text-center",children:[a.jsx("p",{className:"text-2xl font-bold text-yellow-400",children:k.inactive.amarelo}),a.jsx("p",{className:"text-xs text-gray-400",children:"15-29 dias"})]})]}),(0,a.jsxs)("div",{className:"overflow-x-auto",children:[(0,a.jsxs)("table",{className:"w-full text-sm",children:[a.jsx("thead",{className:"bg-white/5 text-xs uppercase text-gray-400",children:(0,a.jsxs)("tr",{children:[a.jsx("th",{className:"px-4 py-3 text-left",children:"Cliente"}),a.jsx("th",{className:"px-4 py-3 text-left",children:"Cidade"}),a.jsx("th",{className:"px-4 py-3 text-center",children:"Dias Inativo"}),a.jsx("th",{className:"px-4 py-3 text-right",children:"Total Gasto"}),a.jsx("th",{className:"px-4 py-3 text-center",children:"Pedidos"}),a.jsx("th",{className:"px-4 py-3 text-center",children:"A\xe7\xf5es"})]})}),a.jsx("tbody",{className:"divide-y divide-white/5",children:y.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-white/5",children:[(0,a.jsxs)("td",{className:"px-4 py-3",children:[a.jsx("p",{className:"font-medium text-white",children:e.nomeFantasia}),a.jsx("p",{className:"text-xs text-gray-500",children:e.razaoSocial})]}),a.jsx("td",{className:"px-4 py-3 text-gray-300",children:e.cidade}),a.jsx("td",{className:"px-4 py-3 text-center",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${Z[e.alertLevel]}`,children:e.diasInativo?`${e.diasInativo} dias`:"Nunca comprou"})}),(0,a.jsxs)("td",{className:"px-4 py-3 text-right text-white",children:["R$ ",e.totalGasto.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),a.jsx("td",{className:"px-4 py-3 text-center text-gray-300",children:e.totalPedidos}),a.jsx("td",{className:"px-4 py-3",children:(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[a.jsx("a",{href:`https://wa.me/55${(e.celular||e.telefone)?.replace(/\D/g,"")}`,target:"_blank",className:"p-2 rounded-lg bg-green-500/10 text-green-400 hover:bg-green-500/20 transition-colors",title:"WhatsApp",children:a.jsx(p.Z,{className:"h-4 w-4"})}),a.jsx("a",{href:`mailto:${e.email}`,className:"p-2 rounded-lg bg-blue-500/10 text-blue-400 hover:bg-blue-500/20 transition-colors",title:"Email",children:a.jsx(m,{className:"h-4 w-4"})}),a.jsx("a",{href:`tel:${e.telefone}`,className:"p-2 rounded-lg bg-purple-500/10 text-purple-400 hover:bg-purple-500/20 transition-colors",title:"Ligar",children:a.jsx(u,{className:"h-4 w-4"})})]})})]},e.id))})]}),0===y.length&&a.jsx("p",{className:"text-center text-gray-500 py-8",children:"Nenhum cliente inativo encontrado"})]})]}),"opportunities"===e&&a.jsx("div",{className:"space-y-4",children:0===N.length?a.jsx("p",{className:"text-center text-gray-500 py-8",children:"Nenhuma oportunidade identificada"}):a.jsx("div",{className:"grid gap-3",children:N.map((e,t)=>(0,a.jsxs)("div",{className:"p-4 rounded-lg bg-white/5 hover:bg-white/10 transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"text-lg",children:"upgrade"===e.type?"⬆️":"crossSell"===e.type?"\uD83D\uDED2":"seasonal"===e.type?"\uD83D\uDCC5":"\uD83D\uDD04"}),a.jsx("p",{className:"font-medium text-white",children:e.clienteNome})]}),a.jsx("span",{className:`px-2 py-1 rounded-full text-xs border ${_[e.priority]}`,children:e.priority})]}),a.jsx("p",{className:"text-sm text-gray-400 mb-3",children:e.description}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-xs text-purple-400 uppercase",children:e.type}),a.jsx("button",{className:"px-3 py-1 rounded-lg bg-purple-600/20 text-purple-400 text-sm hover:bg-purple-600/30 transition-colors",children:e.actionLabel})]})]},t))})}),"insights"===e&&a.jsx("div",{className:"space-y-4",children:0===f.length?a.jsx("p",{className:"text-center text-gray-500 py-8",children:"Nenhum insight dispon\xedvel"}):a.jsx("div",{className:"grid gap-3",children:f.map((e,t)=>(0,a.jsxs)("div",{className:"p-4 rounded-lg bg-white/5 hover:bg-white/10 transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"text-lg",children:"lowTicket"===e.type?"\uD83D\uDCB0":"decliningVolume"===e.type?"\uD83D\uDCC9":"\uD83C\uDFAF"}),a.jsx("p",{className:"font-medium text-white",children:e.clienteNome})]}),a.jsx("span",{className:`px-2 py-1 rounded-full text-xs border ${_[e.priority]}`,children:e.priority})]}),a.jsx("p",{className:"text-sm text-gray-400",children:e.description}),a.jsx("p",{className:"text-sm text-blue-400 mt-1",children:e.metric}),(0,a.jsxs)("div",{className:"flex items-center justify-between mt-3",children:[a.jsx("span",{className:"text-xs text-purple-400 uppercase",children:e.type}),a.jsx("button",{className:"px-3 py-1 rounded-lg bg-blue-600/20 text-blue-400 text-sm hover:bg-blue-600/30 transition-colors",children:e.actionLabel})]})]},t))})})]})})]})}},14108:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>r,__esModule:()=>i,default:()=>l});let a=(0,s(86843).createProxy)(String.raw`E:\FRPlus\frplus-web\src\app\dashboard\ai-insights\page.tsx`),{__esModule:i,$$typeof:r}=a,l=a.default}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[1638,995,9065,5187,6484],()=>s(49276));module.exports=a})();