exports.id=3173,exports.ids=[3173],exports.modules={98161:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,2583,23)),Promise.resolve().then(t.t.bind(t,26840,23)),Promise.resolve().then(t.t.bind(t,38771,23)),Promise.resolve().then(t.t.bind(t,13225,23)),Promise.resolve().then(t.t.bind(t,9295,23)),Promise.resolve().then(t.t.bind(t,43982,23))},59483:(e,r,t)=>{Promise.resolve().then(t.bind(t,61695))},12004:(e,r,t)=>{Promise.resolve().then(t.bind(t,67007))},61695:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>j});var a=t(95344),s=t(56506),o=t(2273),i=t(35341),c=t(89895),l=t(73714),n=t(47664),d=t(37121),u=t(50340),h=t(23485),m=t(13746),f=t(48120),p=t(85814);function x(){let{usuario:e,logout:r,isAdmin:t}=(0,p.a)(),x=[{title:"Principal",items:[{icon:o.Z,label:"Vis\xe3o Geral",href:"/dashboard"},{icon:i.Z,label:"Intelig\xeancia",href:"/dashboard/ai-insights"}]},{title:"Cadastros",items:[{icon:c.Z,label:"Clientes",href:"/dashboard/clientes"},{icon:l.Z,label:"Produtos",href:"/dashboard/produtos"},{icon:n.Z,label:"F\xe1bricas",href:"/dashboard/fabricas"}]},{title:"Gest\xe3o",items:[{icon:d.Z,label:"Pedidos",href:"/dashboard/pedidos"},{icon:u.Z,label:"Relat\xf3rios",href:"/dashboard/relatorios"}]}];return t&&x.push({title:"Administra\xe7\xe3o",items:[{icon:h.Z,label:"Usu\xe1rios",href:"/dashboard/usuarios"}]}),a.jsx("aside",{className:"fixed left-0 top-0 z-40 h-screen w-64 border-r border-white/10 bg-black text-white",children:(0,a.jsxs)("div",{className:"flex h-full flex-col px-3 py-4",children:[a.jsx("div",{className:"mb-8 flex items-center px-2",children:a.jsx("img",{src:"/logo.png",alt:"Logo",className:"h-10 w-auto mr-3"})}),a.jsx("nav",{className:"flex-1 space-y-6 overflow-y-auto",children:x.map(e=>(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"px-3 text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2",children:e.title}),a.jsx("div",{className:"space-y-1",children:e.items.map(e=>(0,a.jsxs)(s.default,{href:e.href,className:"flex items-center rounded-lg px-3 py-2 text-sm font-medium text-gray-300 hover:bg-white/5 hover:text-white transition-colors",children:[a.jsx(e.icon,{className:"mr-3 h-5 w-5 text-gray-400"}),e.label]},e.href))})]},e.title))}),(0,a.jsxs)("div",{className:"border-t border-white/10 pt-4 space-y-2",children:[e&&(0,a.jsxs)("div",{className:"px-3 py-2 rounded-lg bg-white/5",children:[a.jsx("p",{className:"text-sm font-medium text-white truncate",children:e.nome}),a.jsx("p",{className:"text-xs text-gray-500",children:"admin"===e.role?"Administrador":"Vendedor"})]}),(0,a.jsxs)(s.default,{href:"/dashboard/configuracoes",className:"flex items-center rounded-lg px-3 py-2.5 text-sm font-medium text-gray-300 hover:bg-white/5 hover:text-white",children:[a.jsx(m.Z,{className:"mr-3 h-5 w-5 text-gray-400"}),"Configura\xe7\xf5es"]}),(0,a.jsxs)("button",{onClick:r,className:"mt-1 flex w-full items-center rounded-lg px-3 py-2.5 text-sm font-medium text-red-400 hover:bg-red-500/10",children:[a.jsx(f.Z,{className:"mr-3 h-5 w-5"}),"Sair"]})]})]})})}var b=t(8428),y=t(3729),g=t(42739);function w({children:e}){let{usuario:r,loading:t}=(0,p.a)(),s=(0,b.useRouter)();return((0,y.useEffect)(()=>{t||r||s.push("/")},[r,t,s]),t)?a.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:a.jsx(g.Z,{className:"h-8 w-8 animate-spin text-blue-500"})}):r?(0,a.jsxs)("div",{className:"min-h-screen bg-black text-white flex",children:[a.jsx(x,{}),a.jsx("main",{className:"flex-1 ml-64 bg-gradient-to-br from-black to-gray-900",children:a.jsx("div",{className:"container mx-auto p-8 min-h-screen",children:e})})]}):null}function j({children:e}){return a.jsx(w,{children:e})}},67007:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>i});var a=t(95344);t(23824);var s=t(66137),o=t(85814);function i({children:e}){return a.jsx("html",{lang:"pt-br",children:a.jsx("body",{className:"antialiased bg-black text-white h-screen w-screen selection:bg-blue-500 selection:text-white",children:a.jsx(o.H,{children:a.jsx(s.F,{children:e})})})})}},85814:(e,r,t)=>{"use strict";t.d(r,{H:()=>c,a:()=>l});var a=t(95344),s=t(3729),o=t(8428);let i=(0,s.createContext)(null);function c({children:e}){let[r,t]=(0,s.useState)(null),[c,l]=(0,s.useState)(!0),n=(0,o.useRouter)();(0,s.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/auth/me");if(e.ok){let r=await e.json();t(r.usuario)}}catch(e){console.error("Auth check failed:",e)}finally{l(!1)}})()},[]);let d=async(e,r)=>{try{let a=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({identifier:e,senha:r})}),s=await a.json();if(a.ok)return t(s.usuario),{success:!0};return{success:!1,error:s.error||"Erro ao fazer login"}}catch{return{success:!1,error:"Erro de conex\xe3o"}}},u=async()=>{try{await fetch("/api/auth/me",{method:"DELETE"})}catch(e){console.error("Logout error:",e)}finally{t(null),n.push("/")}};return a.jsx(i.Provider,{value:{usuario:r,loading:c,login:d,logout:u,isAdmin:r?.role==="admin"},children:e})}function l(){let e=(0,s.useContext)(i);if(!e)throw Error("useAuth must be used within AuthProvider");return e}},66137:(e,r,t)=>{"use strict";t.d(r,{F:()=>m,e:()=>f});var a=t(95344),s=t(3729),o=t(7060),i=t(66138),c=t(91991),l=t(14513),n=t(99119),d=t(87292);function u({message:e,type:r,isVisible:t=!0,onClose:u}){return(0,s.useEffect)(()=>{if(t){let e=setTimeout(()=>{u()},3e3);return()=>clearTimeout(e)}},[t,u]),a.jsx(n.M,{children:t&&(0,a.jsxs)(d.E.div,{initial:{opacity:0,y:50,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:.9},className:"fixed bottom-6 right-6 z-50 flex items-center gap-3 rounded-xl border border-white/10 bg-black/80 px-4 py-3 text-sm text-white shadow-2xl backdrop-blur-md",children:[(0,a.jsxs)("div",{className:`rounded-full p-1 ${"success"===r?"bg-green-500/20 text-green-500":"error"===r?"bg-red-500/20 text-red-500":"bg-blue-500/20 text-blue-500"}`,children:["success"===r&&a.jsx(o.Z,{className:"h-4 w-4"}),"error"===r&&a.jsx(i.Z,{className:"h-4 w-4"}),"info"===r&&a.jsx(c.Z,{className:"h-4 w-4"})]}),a.jsx("span",{className:"font-medium pr-2",children:e}),a.jsx("button",{onClick:u,className:"ml-2 rounded-lg p-1 text-gray-400 hover:bg-white/10 hover:text-white transition-colors",children:a.jsx(l.Z,{className:"h-3 w-3"})})]})})}let h=(0,s.createContext)(void 0);function m({children:e}){let[r,t]=(0,s.useState)([]),[o,i]=(0,s.useState)([]),[c,l]=(0,s.useState)([]),[n,d]=(0,s.useState)([]),[m,f]=(0,s.useState)(!0),[p,x]=(0,s.useState)(null),[b,y]=(0,s.useState)(null),g=(0,s.useCallback)((e,r)=>{y({message:e,type:r})},[]),w=(0,s.useCallback)(async()=>{f(!0);try{let[e,r,a,s]=await Promise.all([fetch("/api/clients"),fetch("/api/products"),fetch("/api/orders"),fetch("/api/fabricas")]);e.ok&&t(await e.json()),r.ok&&i(await r.json()),a.ok&&l(await a.json()),s.ok&&d(await s.json())}catch(e){console.error("Error fetching data:",e),g("Erro ao carregar dados","error")}finally{f(!1)}},[g]);(0,s.useEffect)(()=>{w();let e=localStorage.getItem("frplus_user");e&&x(e)},[w]);let j=async e=>{try{let r=await fetch("/api/clients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(r.ok){let e=await r.json();t(r=>[...r,e]),g("Cliente cadastrado com sucesso!","success")}else g("Erro ao cadastrar cliente","error")}catch(e){console.error("Error adding client:",e),g("Erro ao cadastrar cliente","error")}},E=async(e,r)=>{try{let a=await fetch(`/api/clients/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(a.ok){let r=await a.json();t(t=>t.map(t=>t.id===e?r:t)),g("Cliente atualizado com sucesso!","success")}}catch(e){console.error("Error updating client:",e),g("Erro ao atualizar cliente","error")}},v=async e=>{try{(await fetch(`/api/clients/${e}`,{method:"DELETE"})).ok&&(t(r=>r.filter(r=>r.id!==e)),g("Cliente exclu\xeddo com sucesso!","success"))}catch(e){console.error("Error removing client:",e),g("Erro ao excluir cliente","error")}},N=async e=>{try{(await fetch("/api/products",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok?(await w(),g("Produto cadastrado com sucesso!","success")):g("Erro ao cadastrar produto","error")}catch(e){console.error("Error adding product:",e),g("Erro ao cadastrar produto","error")}},P=async(e,r)=>{try{(await fetch(`/api/products/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})).ok&&(await w(),g("Produto atualizado com sucesso!","success"))}catch(e){console.error("Error updating product:",e),g("Erro ao atualizar produto","error")}},k=async e=>{try{(await fetch(`/api/products/${e}`,{method:"DELETE"})).ok&&(i(r=>r.filter(r=>r.id!==e)),g("Produto exclu\xeddo com sucesso!","success"))}catch(e){console.error("Error removing product:",e),g("Erro ao excluir produto","error")}},S=async e=>{try{(await fetch("/api/orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok?(await w(),g("Pedido cadastrado com sucesso!","success")):g("Erro ao cadastrar pedido","error")}catch(e){console.error("Error adding order:",e),g("Erro ao cadastrar pedido","error")}},T=async(e,r)=>{try{(await fetch(`/api/orders/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})).ok&&(await w(),g("Pedido atualizado com sucesso!","success"))}catch(e){console.error("Error updating order:",e),g("Erro ao atualizar pedido","error")}},C=async e=>{try{(await fetch(`/api/orders/${e}`,{method:"DELETE"})).ok&&(l(r=>r.filter(r=>r.id!==e)),g("Pedido exclu\xeddo com sucesso!","success"))}catch(e){console.error("Error removing order:",e),g("Erro ao excluir pedido","error")}},O=async e=>{try{let r=await fetch("/api/fabricas",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(r.ok){let e=await r.json();d(r=>[...r,e]),g("F\xe1brica cadastrada com sucesso!","success")}}catch(e){console.error("Error adding fabrica:",e),g("Erro ao cadastrar f\xe1brica","error")}},Z=async(e,r)=>{try{(await fetch(`/api/fabricas/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})).ok&&(await w(),g("F\xe1brica atualizada com sucesso!","success"))}catch(e){console.error("Error updating fabrica:",e),g("Erro ao atualizar f\xe1brica","error")}},$=async e=>{try{(await fetch(`/api/fabricas/${e}`,{method:"DELETE"})).ok&&(d(r=>r.filter(r=>r.id!==e)),g("F\xe1brica exclu\xedda com sucesso!","success"))}catch(e){console.error("Error removing fabrica:",e),g("Erro ao excluir f\xe1brica","error")}};return(0,a.jsxs)(h.Provider,{value:{clients:r,products:o,orders:c,fabricas:n,loading:m,addClient:j,updateClient:E,removeClient:v,addProduct:N,updateProduct:P,removeProduct:k,addOrder:S,updateOrder:T,removeOrder:C,addFabrica:O,updateFabrica:Z,removeFabrica:$,getDashboardStats:()=>({totalSales:c.reduce((e,r)=>e+r.valorTotal,0),totalOrders:c.length,newClients:r.length,totalProducts:o.length}),showToast:g,user:p,login:e=>{x(e),localStorage.setItem("frplus_user",e)},logout:()=>{x(null),localStorage.removeItem("frplus_user")},refreshData:w},children:[e,b&&a.jsx(u,{message:b.message,type:b.type,onClose:()=>y(null)})]})}function f(){let e=(0,s.useContext)(h);if(void 0===e)throw Error("useData must be used within a DataProvider");return e}},94699:(e,r,t)=>{"use strict";t.r(r),t.d(r,{$$typeof:()=>o,__esModule:()=>s,default:()=>i});let a=(0,t(86843).createProxy)(String.raw`E:\FRPlus\frplus-web\src\app\dashboard\layout.tsx`),{__esModule:s,$$typeof:o}=a,i=a.default},21342:(e,r,t)=>{"use strict";t.r(r),t.d(r,{$$typeof:()=>o,__esModule:()=>s,default:()=>i});let a=(0,t(86843).createProxy)(String.raw`E:\FRPlus\frplus-web\src\app\layout.tsx`),{__esModule:s,$$typeof:o}=a,i=a.default},23824:()=>{}};