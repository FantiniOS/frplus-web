(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{71313:function(e,t,r){Promise.resolve().then(r.bind(r,82108))},98998:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let o=(0,r(87461).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},46578:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let o=(0,r(87461).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},28814:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let o=(0,r(87461).Z)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},52235:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let o=(0,r(87461).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},47907:function(e,t,r){"use strict";var o=r(15313);r.o(o,"useRouter")&&r.d(t,{useRouter:function(){return o.useRouter}})},82108:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return c}});var o=r(3827);r(63385);var a=r(5590),s=r(83779);function c(e){let{children:t}=e;return(0,o.jsx)("html",{lang:"pt-br",children:(0,o.jsx)("body",{className:"antialiased bg-black text-white h-screen w-screen selection:bg-blue-500 selection:text-white",children:(0,o.jsx)(s.H,{children:(0,o.jsx)(a.F,{children:t})})})})}},83779:function(e,t,r){"use strict";r.d(t,{H:function(){return n},a:function(){return i}});var o=r(3827),a=r(64090),s=r(47907);let c=(0,a.createContext)(null);function n(e){let{children:t}=e,[r,n]=(0,a.useState)(null),[i,l]=(0,a.useState)(!0),u=(0,s.useRouter)();(0,a.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/auth/me");if(e.ok){let t=await e.json();n(t.usuario)}}catch(e){console.error("Auth check failed:",e)}finally{l(!1)}})()},[]);let d=async(e,t)=>{try{let r=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({identifier:e,senha:t})}),o=await r.json();if(r.ok)return n(o.usuario),{success:!0};return{success:!1,error:o.error||"Erro ao fazer login"}}catch(e){return{success:!1,error:"Erro de conex\xe3o"}}},h=async()=>{try{await fetch("/api/auth/me",{method:"DELETE"})}catch(e){console.error("Logout error:",e)}finally{n(null),u.push("/")}};return(0,o.jsx)(c.Provider,{value:{usuario:r,loading:i,login:d,logout:h,isAdmin:(null==r?void 0:r.role)==="admin"},children:t})}function i(){let e=(0,a.useContext)(c);if(!e)throw Error("useAuth must be used within AuthProvider");return e}},5590:function(e,t,r){"use strict";r.d(t,{F:function(){return f},e:function(){return p}});var o=r(3827),a=r(64090),s=r(46578),c=r(98998),n=r(28814),i=r(52235),l=r(28745),u=r(38371);function d(e){let{message:t,type:r,isVisible:d=!0,onClose:h}=e;return(0,a.useEffect)(()=>{if(d){let e=setTimeout(()=>{h()},3e3);return()=>clearTimeout(e)}},[d,h]),(0,o.jsx)(l.M,{children:d&&(0,o.jsxs)(u.E.div,{initial:{opacity:0,y:50,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:.9},className:"fixed bottom-6 right-6 z-50 flex items-center gap-3 rounded-xl border border-white/10 bg-black/80 px-4 py-3 text-sm text-white shadow-2xl backdrop-blur-md",children:[(0,o.jsxs)("div",{className:"rounded-full p-1 ".concat("success"===r?"bg-green-500/20 text-green-500":"error"===r?"bg-red-500/20 text-red-500":"bg-blue-500/20 text-blue-500"),children:["success"===r&&(0,o.jsx)(s.Z,{className:"h-4 w-4"}),"error"===r&&(0,o.jsx)(c.Z,{className:"h-4 w-4"}),"info"===r&&(0,o.jsx)(n.Z,{className:"h-4 w-4"})]}),(0,o.jsx)("span",{className:"font-medium pr-2",children:t}),(0,o.jsx)("button",{onClick:h,className:"ml-2 rounded-lg p-1 text-gray-400 hover:bg-white/10 hover:text-white transition-colors",children:(0,o.jsx)(i.Z,{className:"h-3 w-3"})})]})})}let h=(0,a.createContext)(void 0);function f(e){let{children:t}=e,[r,s]=(0,a.useState)([]),[c,n]=(0,a.useState)([]),[i,l]=(0,a.useState)([]),[u,f]=(0,a.useState)([]),[p,m]=(0,a.useState)(!0),[y,g]=(0,a.useState)(null),[E,x]=(0,a.useState)(null),b=(0,a.useCallback)((e,t)=>{x({message:e,type:t})},[]),w=(0,a.useCallback)(async()=>{m(!0);try{let[e,t,r,o]=await Promise.all([fetch("/api/clients"),fetch("/api/products"),fetch("/api/orders"),fetch("/api/fabricas")]);e.ok&&s(await e.json()),t.ok&&n(await t.json()),r.ok&&l(await r.json()),o.ok&&f(await o.json())}catch(e){console.error("Error fetching data:",e),b("Erro ao carregar dados","error")}finally{m(!1)}},[b]);(0,a.useEffect)(()=>{w();let e=localStorage.getItem("frplus_user");e&&g(e)},[w]);let k=async e=>{try{let t=await fetch("/api/clients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(t.ok){let e=await t.json();s(t=>[...t,e]),b("Cliente cadastrado com sucesso!","success")}else b("Erro ao cadastrar cliente","error")}catch(e){console.error("Error adding client:",e),b("Erro ao cadastrar cliente","error")}},j=async(e,t)=>{try{let r=await fetch("/api/clients/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(r.ok){let t=await r.json();s(r=>r.map(r=>r.id===e?t:r)),b("Cliente atualizado com sucesso!","success")}}catch(e){console.error("Error updating client:",e),b("Erro ao atualizar cliente","error")}},v=async e=>{try{(await fetch("/api/clients/".concat(e),{method:"DELETE"})).ok&&(s(t=>t.filter(t=>t.id!==e)),b("Cliente exclu\xeddo com sucesso!","success"))}catch(e){console.error("Error removing client:",e),b("Erro ao excluir cliente","error")}},C=async e=>{try{(await fetch("/api/products",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok?(await w(),b("Produto cadastrado com sucesso!","success")):b("Erro ao cadastrar produto","error")}catch(e){console.error("Error adding product:",e),b("Erro ao cadastrar produto","error")}},S=async(e,t)=>{try{(await fetch("/api/products/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).ok&&(await w(),b("Produto atualizado com sucesso!","success"))}catch(e){console.error("Error updating product:",e),b("Erro ao atualizar produto","error")}},P=async e=>{try{(await fetch("/api/products/".concat(e),{method:"DELETE"})).ok&&(n(t=>t.filter(t=>t.id!==e)),b("Produto exclu\xeddo com sucesso!","success"))}catch(e){console.error("Error removing product:",e),b("Erro ao excluir produto","error")}},T=async e=>{try{(await fetch("/api/orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok?(await w(),b("Pedido cadastrado com sucesso!","success")):b("Erro ao cadastrar pedido","error")}catch(e){console.error("Error adding order:",e),b("Erro ao cadastrar pedido","error")}},N=async(e,t)=>{try{(await fetch("/api/orders/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).ok&&(await w(),b("Pedido atualizado com sucesso!","success"))}catch(e){console.error("Error updating order:",e),b("Erro ao atualizar pedido","error")}},O=async e=>{try{(await fetch("/api/orders/".concat(e),{method:"DELETE"})).ok&&(l(t=>t.filter(t=>t.id!==e)),b("Pedido exclu\xeddo com sucesso!","success"))}catch(e){console.error("Error removing order:",e),b("Erro ao excluir pedido","error")}},z=async e=>{try{let t=await fetch("/api/fabricas",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(t.ok){let e=await t.json();f(t=>[...t,e]),b("F\xe1brica cadastrada com sucesso!","success")}}catch(e){console.error("Error adding fabrica:",e),b("Erro ao cadastrar f\xe1brica","error")}},R=async(e,t)=>{try{(await fetch("/api/fabricas/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).ok&&(await w(),b("F\xe1brica atualizada com sucesso!","success"))}catch(e){console.error("Error updating fabrica:",e),b("Erro ao atualizar f\xe1brica","error")}},M=async e=>{try{(await fetch("/api/fabricas/".concat(e),{method:"DELETE"})).ok&&(f(t=>t.filter(t=>t.id!==e)),b("F\xe1brica exclu\xedda com sucesso!","success"))}catch(e){console.error("Error removing fabrica:",e),b("Erro ao excluir f\xe1brica","error")}};return(0,o.jsxs)(h.Provider,{value:{clients:r,products:c,orders:i,fabricas:u,loading:p,addClient:k,updateClient:j,removeClient:v,addProduct:C,updateProduct:S,removeProduct:P,addOrder:T,updateOrder:N,removeOrder:O,addFabrica:z,updateFabrica:R,removeFabrica:M,getDashboardStats:()=>({totalSales:i.reduce((e,t)=>e+t.valorTotal,0),totalOrders:i.length,newClients:r.length,totalProducts:c.length}),showToast:b,user:y,login:e=>{g(e),localStorage.setItem("frplus_user",e)},logout:()=>{g(null),localStorage.removeItem("frplus_user")},refreshData:w},children:[t,E&&(0,o.jsx)(d,{message:E.message,type:E.type,onClose:()=>x(null)})]})}function p(){let e=(0,a.useContext)(h);if(void 0===e)throw Error("useData must be used within a DataProvider");return e}},63385:function(){},28745:function(e,t,r){"use strict";r.d(t,{M:function(){return g}});var o=r(3827),a=r(64090),s=r(53856),c=r(72435),n=r(24561),i=r(93449);class l extends a.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=this.props.sizeRef.current;e.height=t.offsetHeight||0,e.width=t.offsetWidth||0,e.top=t.offsetTop,e.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function u(e){let{children:t,isPresent:r}=e,s=(0,a.useId)(),c=(0,a.useRef)(null),n=(0,a.useRef)({width:0,height:0,top:0,left:0}),{nonce:u}=(0,a.useContext)(i._);return(0,a.useInsertionEffect)(()=>{let{width:e,height:t,top:o,left:a}=n.current;if(r||!c.current||!e||!t)return;c.current.dataset.motionPopId=s;let i=document.createElement("style");return u&&(i.nonce=u),document.head.appendChild(i),i.sheet&&i.sheet.insertRule('\n          [data-motion-pop-id="'.concat(s,'"] {\n            position: absolute !important;\n            width: ').concat(e,"px !important;\n            height: ").concat(t,"px !important;\n            top: ").concat(o,"px !important;\n            left: ").concat(a,"px !important;\n          }\n        ")),()=>{document.head.removeChild(i)}},[r]),(0,o.jsx)(l,{isPresent:r,childRef:c,sizeRef:n,children:a.cloneElement(t,{ref:c})})}let d=e=>{let{children:t,initial:r,isPresent:s,onExitComplete:i,custom:l,presenceAffectsLayout:d,mode:f}=e,p=(0,c.h)(h),m=(0,a.useId)(),y=(0,a.useCallback)(e=>{for(let t of(p.set(e,!0),p.values()))if(!t)return;i&&i()},[p,i]),g=(0,a.useMemo)(()=>({id:m,initial:r,isPresent:s,custom:l,onExitComplete:y,register:e=>(p.set(e,!1),()=>p.delete(e))}),d?[Math.random(),y]:[s,y]);return(0,a.useMemo)(()=>{p.forEach((e,t)=>p.set(t,!1))},[s]),a.useEffect(()=>{s||p.size||!i||i()},[s]),"popLayout"===f&&(t=(0,o.jsx)(u,{isPresent:s,children:t})),(0,o.jsx)(n.O.Provider,{value:g,children:t})};function h(){return new Map}var f=r(53177);let p=e=>e.key||"";function m(e){let t=[];return a.Children.forEach(e,e=>{(0,a.isValidElement)(e)&&t.push(e)}),t}var y=r(45526);let g=e=>{let{children:t,custom:r,initial:n=!0,onExitComplete:i,presenceAffectsLayout:l=!0,mode:u="sync",propagate:h=!1}=e,[g,E]=(0,f.oO)(h),x=(0,a.useMemo)(()=>m(t),[t]),b=h&&!g?[]:x.map(p),w=(0,a.useRef)(!0),k=(0,a.useRef)(x),j=(0,c.h)(()=>new Map),[v,C]=(0,a.useState)(x),[S,P]=(0,a.useState)(x);(0,y.L)(()=>{w.current=!1,k.current=x;for(let e=0;e<S.length;e++){let t=p(S[e]);b.includes(t)?j.delete(t):!0!==j.get(t)&&j.set(t,!1)}},[S,b.length,b.join("-")]);let T=[];if(x!==v){let e=[...x];for(let t=0;t<S.length;t++){let r=S[t],o=p(r);b.includes(o)||(e.splice(t,0,r),T.push(r))}"wait"===u&&T.length&&(e=T),P(m(e)),C(x);return}let{forceRender:N}=(0,a.useContext)(s.p);return(0,o.jsx)(o.Fragment,{children:S.map(e=>{let t=p(e),a=(!h||!!g)&&(x===S||b.includes(t));return(0,o.jsx)(d,{isPresent:a,initial:(!w.current||!!n)&&void 0,custom:a?void 0:r,presenceAffectsLayout:l,mode:u,onExitComplete:a?void 0:()=>{if(!j.has(t))return;j.set(t,!0);let e=!0;j.forEach(t=>{t||(e=!1)}),e&&(null==N||N(),P(k.current),h&&(null==E||E()),i&&i())},children:e},t)})})}}},function(e){e.O(0,[462,971,69,744],function(){return e(e.s=71313)}),_N_E=e.O()}]);