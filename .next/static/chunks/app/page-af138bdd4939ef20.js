(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{86704:function(e,t,r){Promise.resolve().then(r.bind(r,50200))},18994:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(87461).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},11213:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(87461).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},47907:function(e,t,r){"use strict";var a=r(15313);r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}})},50200:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return p}});var a=r(3827),s=r(38371),n=r(18994),l=r(11213),o=r(87461);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,o.Z)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),u=(0,o.Z)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);var c=r(64090),d=r(83779),h=r(47907);function p(){let{login:e,usuario:t,loading:r}=(0,d.a)(),o=(0,h.useRouter)(),[p,x]=(0,c.useState)(""),[f,m]=(0,c.useState)(""),[b,g]=(0,c.useState)(!1),[y,w]=(0,c.useState)("");(0,c.useEffect)(()=>{t&&!r&&o.push("/dashboard")},[t,r,o]),(0,c.useEffect)(()=>{(async()=>{try{await fetch("/api/auth/seed",{method:"POST"})}catch(e){}})()},[]);let v=async t=>{t.preventDefault(),w(""),g(!0);let r=await e(p,f);r.success?o.push("/dashboard"):w(r.error||"Erro ao fazer login"),g(!1)};return r?(0,a.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-black",children:(0,a.jsx)(n.Z,{className:"h-8 w-8 animate-spin text-blue-500"})}):(0,a.jsxs)("div",{className:"relative flex min-h-screen flex-col items-center justify-center overflow-hidden bg-black",children:[(0,a.jsx)("div",{className:"absolute -top-[20%] -left-[10%] h-[500px] w-[500px] rounded-full bg-blue-600/20 blur-[100px]"}),(0,a.jsx)("div",{className:"absolute top-[40%] -right-[10%] h-[400px] w-[400px] rounded-full bg-purple-600/10 blur-[100px]"}),(0,a.jsx)(s.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},className:"z-10 w-full max-w-md p-8",children:(0,a.jsxs)("div",{className:"glass-panel rounded-2xl p-8 shadow-2xl bg-white/5 border border-white/10 backdrop-blur-xl",children:[(0,a.jsxs)("div",{className:"mb-8 text-center",children:[(0,a.jsx)("img",{src:"/logo.png",alt:"Logo",className:"h-16 w-auto mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-sm text-gray-400",children:"Acesse seu painel de intelig\xeancia comercial"})]}),y&&(0,a.jsx)("div",{className:"mb-4 p-3 rounded-lg bg-red-500/10 border border-red-500/20 text-red-400 text-sm",children:y}),(0,a.jsxs)("form",{className:"space-y-4",onSubmit:v,children:[(0,a.jsxs)("div",{className:"group relative",children:[(0,a.jsx)(l.Z,{className:"absolute left-3 top-3 h-5 w-5 text-gray-500 transition-colors group-focus-within:text-blue-500"}),(0,a.jsx)("input",{type:"text",value:p,onChange:e=>x(e.target.value),placeholder:"Usu\xe1rio ou Email",className:"w-full rounded-lg bg-black/40 border border-white/10 p-2.5 pl-10 text-white placeholder-gray-500 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 transition-all"})]}),(0,a.jsxs)("div",{className:"group relative",children:[(0,a.jsx)(i,{className:"absolute left-3 top-3 h-5 w-5 text-gray-500 transition-colors group-focus-within:text-blue-500"}),(0,a.jsx)("input",{type:"password",value:f,onChange:e=>m(e.target.value),placeholder:"Sua senha",className:"w-full rounded-lg bg-black/40 border border-white/10 p-2.5 pl-10 text-white placeholder-gray-500 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 transition-all"})]}),(0,a.jsx)("button",{type:"submit",disabled:b,className:"group flex w-full items-center justify-center rounded-lg bg-blue-600 p-3 font-semibold text-white transition-all hover:bg-blue-500 hover:shadow-[0_0_20px_rgba(37,99,235,0.3)] disabled:opacity-50",children:b?(0,a.jsx)(n.Z,{className:"h-5 w-5 animate-spin"}):(0,a.jsxs)(a.Fragment,{children:["Entrar no Sistema",(0,a.jsx)(u,{className:"ml-2 h-4 w-4 transition-transform group-hover:translate-x-1"})]})})]}),(0,a.jsxs)("div",{className:"mt-6 text-center space-y-3",children:[(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:["Credenciais padr\xe3o: ",(0,a.jsx)("span",{className:"text-gray-400",children:"admin"})," / ",(0,a.jsx)("span",{className:"text-gray-400",children:"admin123"})]}),(0,a.jsx)("p",{className:"text-xs text-gray-600",children:"Protegido por criptografia de ponta a ponta."})]})]})})]})}},83779:function(e,t,r){"use strict";r.d(t,{H:function(){return o},a:function(){return i}});var a=r(3827),s=r(64090),n=r(47907);let l=(0,s.createContext)(null);function o(e){let{children:t}=e,[r,o]=(0,s.useState)(null),[i,u]=(0,s.useState)(!0),c=(0,n.useRouter)();(0,s.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/auth/me");if(e.ok){let t=await e.json();o(t.usuario)}}catch(e){console.error("Auth check failed:",e)}finally{u(!1)}})()},[]);let d=async(e,t)=>{try{let r=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({identifier:e,senha:t})}),a=await r.json();if(r.ok)return o(a.usuario),{success:!0};return{success:!1,error:a.error||"Erro ao fazer login"}}catch(e){return{success:!1,error:"Erro de conex\xe3o"}}},h=async()=>{try{await fetch("/api/auth/me",{method:"DELETE"})}catch(e){console.error("Logout error:",e)}finally{o(null),c.push("/")}};return(0,a.jsx)(l.Provider,{value:{usuario:r,loading:i,login:d,logout:h,isAdmin:(null==r?void 0:r.role)==="admin"},children:t})}function i(){let e=(0,s.useContext)(l);if(!e)throw Error("useAuth must be used within AuthProvider");return e}}},function(e){e.O(0,[462,971,69,744],function(){return e(e.s=86704)}),_N_E=e.O()}]);