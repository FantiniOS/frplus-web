(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[101],{64444:function(e,t,r){Promise.resolve().then(r.bind(r,46219))},98998:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(87461).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},61524:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(87461).Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},46578:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(87461).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},37211:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(87461).Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},28814:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(87461).Z)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},62457:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(87461).Z)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},41129:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(87461).Z)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]])},70094:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(87461).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},28670:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(87461).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},50489:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(87461).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},52235:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(87461).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},46219:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return f}});var a=r(3827),s=r(70094),o=r(28670),i=r(37211),n=r(62457),c=r(50489),l=r(41129),d=r(5590),u=r(64090),h=r(8792),p=r(38371),x=r(67387);function f(){let{clients:e,removeClient:t}=(0,d.e)(),[r,f]=(0,u.useState)(""),[m,y]=(0,u.useState)(null),g=e.filter(e=>(e.nomeFantasia||e.razaoSocial||"").toLowerCase().includes(r.toLowerCase())||e.cnpj.includes(r)||e.cidade.toLowerCase().includes(r.toLowerCase())).sort((e,t)=>(e.nomeFantasia||e.razaoSocial||"").localeCompare(t.nomeFantasia||t.razaoSocial||"")),b={hidden:{opacity:0,y:20},show:{opacity:1,y:0}};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col justify-between gap-4 md:flex-row md:items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-white",children:"Minha Carteira"}),(0,a.jsxs)("p",{className:"text-sm text-gray-400",children:["Gerencie seus ",e.length," clientes."]})]}),(0,a.jsx)(h.default,{href:"/dashboard/clientes/novo",children:(0,a.jsxs)("button",{className:"flex items-center gap-2 rounded-lg bg-blue-600 px-4 py-2 font-medium text-white hover:bg-blue-500 transition-all shadow-[0_0_15px_rgba(37,99,235,0.3)]",children:[(0,a.jsx)(s.Z,{className:"h-4 w-4"}),"Novo Cliente"]})})]}),(0,a.jsxs)("div",{className:"flex gap-4 rounded-xl border border-white/10 bg-white/5 p-4 backdrop-blur-sm",children:[(0,a.jsxs)("div",{className:"relative flex-1",children:[(0,a.jsx)(o.Z,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"}),(0,a.jsx)("input",{type:"text",placeholder:"Buscar por nome, CNPJ ou cidade...",value:r,onChange:e=>f(e.target.value),className:"w-full rounded-lg bg-black/40 border border-white/10 py-2 pl-10 pr-4 text-sm text-white focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),(0,a.jsxs)("button",{className:"flex items-center gap-2 rounded-lg border border-white/10 bg-white/5 px-4 py-2 text-sm font-medium text-white hover:bg-white/10",children:[(0,a.jsx)(i.Z,{className:"h-4 w-4"}),"Filtros"]})]}),(0,a.jsx)("div",{className:"rounded-xl border border-white/10 bg-white/5 overflow-hidden overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full text-left text-sm",children:[(0,a.jsx)("thead",{className:"bg-white/5 text-xs uppercase text-gray-400",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-4 font-medium",children:"Cliente"}),(0,a.jsx)("th",{className:"px-6 py-4 font-medium",children:"Status"}),(0,a.jsx)("th",{className:"px-6 py-4 font-medium",children:"Localiza\xe7\xe3o"}),(0,a.jsx)("th",{className:"px-6 py-4 font-medium",children:"\xdaltima Compra"}),(0,a.jsx)("th",{className:"px-6 py-4 font-medium text-right",children:"A\xe7\xf5es"})]})}),(0,a.jsxs)(p.E.tbody,{className:"divide-y divide-white/5",variants:{hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},initial:"hidden",animate:"show",children:[g.map(e=>(0,a.jsxs)(p.E.tr,{className:"group hover:bg-white/5 transition-colors",variants:b,children:[(0,a.jsxs)("td",{className:"px-6 py-4",children:[(0,a.jsx)("div",{className:"font-medium text-white",children:e.nomeFantasia||e.razaoSocial}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:e.cnpj})]}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsx)("span",{className:"inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium border ".concat("Ativo"===(e.status||"Ativo")?"bg-green-500/10 text-green-400 border-green-500/20":"Inativo"===e.status?"bg-gray-500/10 text-gray-400 border-gray-500/20":"bg-red-500/10 text-red-400 border-red-500/20"),children:e.status||"Ativo"})}),(0,a.jsx)("td",{className:"px-6 py-4 text-gray-300",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(n.Z,{className:"h-3 w-3 text-gray-500"}),e.cidade]})}),(0,a.jsx)("td",{className:"px-6 py-4 text-gray-300",children:e.ultima_compra?new Date(e.ultima_compra).toLocaleDateString():"-"}),(0,a.jsx)("td",{className:"px-6 py-4 text-right",children:(0,a.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,a.jsx)("button",{onClick:()=>y(e.id),className:"rounded p-2 text-red-500/50 hover:bg-red-500/10 hover:text-red-500 transition-colors",title:"Excluir Cliente",children:(0,a.jsx)(c.Z,{className:"h-4 w-4"})}),(0,a.jsx)(h.default,{href:"/dashboard/clientes/".concat(e.id),children:(0,a.jsx)("button",{className:"rounded p-2 hover:bg-white/10 text-gray-400 hover:text-white transition-colors",title:"Editar Cliente",children:(0,a.jsx)(l.Z,{className:"h-4 w-4"})})})]})})]},e.id)),0===g.length&&(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:5,className:"px-6 py-8 text-center text-gray-500",children:"Nenhum cliente encontrado."})})]})]})}),(0,a.jsx)(x.c,{isOpen:!!m,title:"Excluir Cliente",message:"Tem certeza que deseja excluir este cliente? Esta a\xe7\xe3o n\xe3o pode ser desfeita.",onConfirm:()=>{m&&(t(m),y(null))},onCancel:()=>y(null)})]})}},67387:function(e,t,r){"use strict";r.d(t,{c:function(){return n}});var a=r(3827),s=r(28745),o=r(38371),i=r(61524);function n(e){let{isOpen:t,title:r,message:n,onConfirm:c,onCancel:l}=e;return(0,a.jsx)(s.M,{children:t&&(0,a.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,a.jsx)(o.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm",onClick:l}),(0,a.jsxs)(o.E.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"relative w-full max-w-md overflow-hidden rounded-xl border border-white/10 bg-[#111] p-6 shadow-2xl",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,a.jsx)("div",{className:"rounded-full bg-red-500/10 p-3 text-red-500",children:(0,a.jsx)(i.Z,{className:"h-6 w-6"})}),(0,a.jsx)("h3",{className:"text-xl font-bold text-white",children:r})]}),(0,a.jsx)("p",{className:"text-gray-400 mb-8",children:n}),(0,a.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,a.jsx)("button",{onClick:l,className:"rounded-lg px-4 py-2 text-sm font-medium text-gray-400 hover:bg-white/5 hover:text-white transition-colors",children:"Cancelar"}),(0,a.jsx)("button",{onClick:c,className:"rounded-lg bg-red-600 px-4 py-2 text-sm font-medium text-white hover:bg-red-500 transition-colors shadow-lg shadow-red-900/20",children:"Confirmar Exclus\xe3o"})]})]})]})})}},5590:function(e,t,r){"use strict";r.d(t,{F:function(){return p},e:function(){return x}});var a=r(3827),s=r(64090),o=r(46578),i=r(98998),n=r(28814),c=r(52235),l=r(28745),d=r(38371);function u(e){let{message:t,type:r,isVisible:u=!0,onClose:h}=e;return(0,s.useEffect)(()=>{if(u){let e=setTimeout(()=>{h()},3e3);return()=>clearTimeout(e)}},[u,h]),(0,a.jsx)(l.M,{children:u&&(0,a.jsxs)(d.E.div,{initial:{opacity:0,y:50,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:.9},className:"fixed bottom-6 right-6 z-50 flex items-center gap-3 rounded-xl border border-white/10 bg-black/80 px-4 py-3 text-sm text-white shadow-2xl backdrop-blur-md",children:[(0,a.jsxs)("div",{className:"rounded-full p-1 ".concat("success"===r?"bg-green-500/20 text-green-500":"error"===r?"bg-red-500/20 text-red-500":"bg-blue-500/20 text-blue-500"),children:["success"===r&&(0,a.jsx)(o.Z,{className:"h-4 w-4"}),"error"===r&&(0,a.jsx)(i.Z,{className:"h-4 w-4"}),"info"===r&&(0,a.jsx)(n.Z,{className:"h-4 w-4"})]}),(0,a.jsx)("span",{className:"font-medium pr-2",children:t}),(0,a.jsx)("button",{onClick:h,className:"ml-2 rounded-lg p-1 text-gray-400 hover:bg-white/10 hover:text-white transition-colors",children:(0,a.jsx)(c.Z,{className:"h-3 w-3"})})]})})}let h=(0,s.createContext)(void 0);function p(e){let{children:t}=e,[r,o]=(0,s.useState)([]),[i,n]=(0,s.useState)([]),[c,l]=(0,s.useState)([]),[d,p]=(0,s.useState)([]),[x,f]=(0,s.useState)(!0),[m,y]=(0,s.useState)(null),[g,b]=(0,s.useState)(null),j=(0,s.useCallback)((e,t)=>{b({message:e,type:t})},[]),w=(0,s.useCallback)(async()=>{f(!0);try{let[e,t,r,a]=await Promise.all([fetch("/api/clients"),fetch("/api/products"),fetch("/api/orders"),fetch("/api/fabricas")]);e.ok&&o(await e.json()),t.ok&&n(await t.json()),r.ok&&l(await r.json()),a.ok&&p(await a.json())}catch(e){console.error("Error fetching data:",e),j("Erro ao carregar dados","error")}finally{f(!1)}},[j]);(0,s.useEffect)(()=>{w();let e=localStorage.getItem("frplus_user");e&&y(e)},[w]);let v=async e=>{try{let t=await fetch("/api/clients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(t.ok){let e=await t.json();o(t=>[...t,e]),j("Cliente cadastrado com sucesso!","success")}else j("Erro ao cadastrar cliente","error")}catch(e){console.error("Error adding client:",e),j("Erro ao cadastrar cliente","error")}},N=async(e,t)=>{try{let r=await fetch("/api/clients/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(r.ok){let t=await r.json();o(r=>r.map(r=>r.id===e?t:r)),j("Cliente atualizado com sucesso!","success")}}catch(e){console.error("Error updating client:",e),j("Erro ao atualizar cliente","error")}},k=async e=>{try{(await fetch("/api/clients/".concat(e),{method:"DELETE"})).ok&&(o(t=>t.filter(t=>t.id!==e)),j("Cliente exclu\xeddo com sucesso!","success"))}catch(e){console.error("Error removing client:",e),j("Erro ao excluir cliente","error")}},E=async e=>{try{(await fetch("/api/products",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok?(await w(),j("Produto cadastrado com sucesso!","success")):j("Erro ao cadastrar produto","error")}catch(e){console.error("Error adding product:",e),j("Erro ao cadastrar produto","error")}},C=async(e,t)=>{try{(await fetch("/api/products/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).ok&&(await w(),j("Produto atualizado com sucesso!","success"))}catch(e){console.error("Error updating product:",e),j("Erro ao atualizar produto","error")}},S=async e=>{try{(await fetch("/api/products/".concat(e),{method:"DELETE"})).ok&&(n(t=>t.filter(t=>t.id!==e)),j("Produto exclu\xeddo com sucesso!","success"))}catch(e){console.error("Error removing product:",e),j("Erro ao excluir produto","error")}},Z=async e=>{try{(await fetch("/api/orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok?(await w(),j("Pedido cadastrado com sucesso!","success")):j("Erro ao cadastrar pedido","error")}catch(e){console.error("Error adding order:",e),j("Erro ao cadastrar pedido","error")}},P=async(e,t)=>{try{(await fetch("/api/orders/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).ok&&(await w(),j("Pedido atualizado com sucesso!","success"))}catch(e){console.error("Error updating order:",e),j("Erro ao atualizar pedido","error")}},T=async e=>{try{(await fetch("/api/orders/".concat(e),{method:"DELETE"})).ok&&(l(t=>t.filter(t=>t.id!==e)),j("Pedido exclu\xeddo com sucesso!","success"))}catch(e){console.error("Error removing order:",e),j("Erro ao excluir pedido","error")}},M=async e=>{try{let t=await fetch("/api/fabricas",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(t.ok){let e=await t.json();p(t=>[...t,e]),j("F\xe1brica cadastrada com sucesso!","success")}}catch(e){console.error("Error adding fabrica:",e),j("Erro ao cadastrar f\xe1brica","error")}},z=async(e,t)=>{try{(await fetch("/api/fabricas/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).ok&&(await w(),j("F\xe1brica atualizada com sucesso!","success"))}catch(e){console.error("Error updating fabrica:",e),j("Erro ao atualizar f\xe1brica","error")}},O=async e=>{try{(await fetch("/api/fabricas/".concat(e),{method:"DELETE"})).ok&&(p(t=>t.filter(t=>t.id!==e)),j("F\xe1brica exclu\xedda com sucesso!","success"))}catch(e){console.error("Error removing fabrica:",e),j("Erro ao excluir f\xe1brica","error")}};return(0,a.jsxs)(h.Provider,{value:{clients:r,products:i,orders:c,fabricas:d,loading:x,addClient:v,updateClient:N,removeClient:k,addProduct:E,updateProduct:C,removeProduct:S,addOrder:Z,updateOrder:P,removeOrder:T,addFabrica:M,updateFabrica:z,removeFabrica:O,getDashboardStats:()=>({totalSales:c.reduce((e,t)=>e+t.valorTotal,0),totalOrders:c.length,newClients:r.length,totalProducts:i.length}),showToast:j,user:m,login:e=>{y(e),localStorage.setItem("frplus_user",e)},logout:()=>{y(null),localStorage.removeItem("frplus_user")},refreshData:w},children:[t,g&&(0,a.jsx)(u,{message:g.message,type:g.type,onClose:()=>b(null)})]})}function x(){let e=(0,s.useContext)(h);if(void 0===e)throw Error("useData must be used within a DataProvider");return e}},28745:function(e,t,r){"use strict";r.d(t,{M:function(){return y}});var a=r(3827),s=r(64090),o=r(53856),i=r(72435),n=r(24561),c=r(93449);class l extends s.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=this.props.sizeRef.current;e.height=t.offsetHeight||0,e.width=t.offsetWidth||0,e.top=t.offsetTop,e.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function d(e){let{children:t,isPresent:r}=e,o=(0,s.useId)(),i=(0,s.useRef)(null),n=(0,s.useRef)({width:0,height:0,top:0,left:0}),{nonce:d}=(0,s.useContext)(c._);return(0,s.useInsertionEffect)(()=>{let{width:e,height:t,top:a,left:s}=n.current;if(r||!i.current||!e||!t)return;i.current.dataset.motionPopId=o;let c=document.createElement("style");return d&&(c.nonce=d),document.head.appendChild(c),c.sheet&&c.sheet.insertRule('\n          [data-motion-pop-id="'.concat(o,'"] {\n            position: absolute !important;\n            width: ').concat(e,"px !important;\n            height: ").concat(t,"px !important;\n            top: ").concat(a,"px !important;\n            left: ").concat(s,"px !important;\n          }\n        ")),()=>{document.head.removeChild(c)}},[r]),(0,a.jsx)(l,{isPresent:r,childRef:i,sizeRef:n,children:s.cloneElement(t,{ref:i})})}let u=e=>{let{children:t,initial:r,isPresent:o,onExitComplete:c,custom:l,presenceAffectsLayout:u,mode:p}=e,x=(0,i.h)(h),f=(0,s.useId)(),m=(0,s.useCallback)(e=>{for(let t of(x.set(e,!0),x.values()))if(!t)return;c&&c()},[x,c]),y=(0,s.useMemo)(()=>({id:f,initial:r,isPresent:o,custom:l,onExitComplete:m,register:e=>(x.set(e,!1),()=>x.delete(e))}),u?[Math.random(),m]:[o,m]);return(0,s.useMemo)(()=>{x.forEach((e,t)=>x.set(t,!1))},[o]),s.useEffect(()=>{o||x.size||!c||c()},[o]),"popLayout"===p&&(t=(0,a.jsx)(d,{isPresent:o,children:t})),(0,a.jsx)(n.O.Provider,{value:y,children:t})};function h(){return new Map}var p=r(53177);let x=e=>e.key||"";function f(e){let t=[];return s.Children.forEach(e,e=>{(0,s.isValidElement)(e)&&t.push(e)}),t}var m=r(45526);let y=e=>{let{children:t,custom:r,initial:n=!0,onExitComplete:c,presenceAffectsLayout:l=!0,mode:d="sync",propagate:h=!1}=e,[y,g]=(0,p.oO)(h),b=(0,s.useMemo)(()=>f(t),[t]),j=h&&!y?[]:b.map(x),w=(0,s.useRef)(!0),v=(0,s.useRef)(b),N=(0,i.h)(()=>new Map),[k,E]=(0,s.useState)(b),[C,S]=(0,s.useState)(b);(0,m.L)(()=>{w.current=!1,v.current=b;for(let e=0;e<C.length;e++){let t=x(C[e]);j.includes(t)?N.delete(t):!0!==N.get(t)&&N.set(t,!1)}},[C,j.length,j.join("-")]);let Z=[];if(b!==k){let e=[...b];for(let t=0;t<C.length;t++){let r=C[t],a=x(r);j.includes(a)||(e.splice(t,0,r),Z.push(r))}"wait"===d&&Z.length&&(e=Z),S(f(e)),E(b);return}let{forceRender:P}=(0,s.useContext)(o.p);return(0,a.jsx)(a.Fragment,{children:C.map(e=>{let t=x(e),s=(!h||!!y)&&(b===C||j.includes(t));return(0,a.jsx)(u,{isPresent:s,initial:(!w.current||!!n)&&void 0,custom:s?void 0:r,presenceAffectsLayout:l,mode:d,onExitComplete:s?void 0:()=>{if(!N.has(t))return;N.set(t,!0);let e=!0;N.forEach(t=>{t||(e=!1)}),e&&(null==P||P(),S(v.current),h&&(null==g||g()),c&&c())},children:e},t)})})}}},function(e){e.O(0,[462,792,971,69,744],function(){return e(e.s=64444)}),_N_E=e.O()}]);