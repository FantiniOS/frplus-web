(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[101],{64444:function(e,t,a){Promise.resolve().then(a.bind(a,46219))},46219:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return j}});var s=a(3827),r=a(70094),o=a(28670),c=a(37211),i=a(85159),l=a(23441),n=a(62457),d=a(50489),x=a(41129),h=a(11213),u=a(69475),m=a(5590),p=a(64090),f=a(8792),g=a(38371),y=a(67387);function j(){let{clients:e,removeClient:t}=(0,m.e)(),[a,j]=(0,p.useState)(""),[b,w]=(0,p.useState)(null),[N,v]=(0,p.useState)(null),E=e.filter(e=>(e.nomeFantasia||e.razaoSocial||"").toLowerCase().includes(a.toLowerCase())||e.cnpj.includes(a)||e.cidade.toLowerCase().includes(a.toLowerCase())).sort((e,t)=>(e.nomeFantasia||e.razaoSocial||"").localeCompare(t.nomeFantasia||t.razaoSocial||"")),C={hidden:{opacity:0,y:20},show:{opacity:1,y:0}};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex flex-col justify-between gap-4 md:flex-row md:items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-white",children:"Minha Carteira"}),(0,s.jsxs)("p",{className:"text-sm text-gray-400",children:["Gerencie seus ",e.length," clientes."]})]}),(0,s.jsx)(f.default,{href:"/dashboard/clientes/novo",children:(0,s.jsxs)("button",{className:"flex items-center gap-2 rounded-lg bg-blue-600 px-4 py-2 font-medium text-white hover:bg-blue-500 transition-all shadow-[0_0_15px_rgba(37,99,235,0.3)]",children:[(0,s.jsx)(r.Z,{className:"h-4 w-4"}),"Novo Cliente"]})})]}),(0,s.jsxs)("div",{className:"flex gap-4 rounded-xl border border-white/10 bg-white/5 p-4 backdrop-blur-sm",children:[(0,s.jsxs)("div",{className:"relative flex-1",children:[(0,s.jsx)(o.Z,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"}),(0,s.jsx)("input",{type:"text",placeholder:"Buscar por nome, CNPJ ou cidade...",value:a,onChange:e=>j(e.target.value),className:"w-full rounded-lg bg-black/40 border border-white/10 py-2 pl-10 pr-4 text-sm text-white focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),(0,s.jsxs)("button",{className:"flex items-center gap-2 rounded-lg border border-white/10 bg-white/5 px-4 py-2 text-sm font-medium text-white hover:bg-white/10",children:[(0,s.jsx)(c.Z,{className:"h-4 w-4"}),"Filtros"]})]}),(0,s.jsx)("div",{className:"rounded-xl border border-white/10 bg-white/5 overflow-hidden overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full text-left text-sm",children:[(0,s.jsx)("thead",{className:"bg-white/5 text-xs uppercase text-gray-400",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"w-10 px-4 py-4"}),(0,s.jsx)("th",{className:"px-6 py-4 font-medium",children:"Cliente"}),(0,s.jsx)("th",{className:"px-6 py-4 font-medium hidden md:table-cell",children:"Status"}),(0,s.jsx)("th",{className:"px-6 py-4 font-medium hidden md:table-cell",children:"Localiza\xe7\xe3o"}),(0,s.jsx)("th",{className:"px-6 py-4 font-medium hidden md:table-cell",children:"\xdaltima Compra"}),(0,s.jsx)("th",{className:"px-6 py-4 font-medium text-right",children:"A\xe7\xf5es"})]})}),(0,s.jsxs)("tbody",{className:"divide-y divide-white/5",children:[E.map(e=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(g.E.tr,{className:"group hover:bg-white/5 transition-colors cursor-pointer",onClick:()=>v(N===e.id?null:e.id),variants:C,children:[(0,s.jsx)("td",{className:"px-4 py-4",children:(0,s.jsx)("div",{className:"p-1 rounded bg-blue-500/10 w-fit",children:N===e.id?(0,s.jsx)(i.Z,{className:"h-4 w-4 text-blue-400"}):(0,s.jsx)(l.Z,{className:"h-4 w-4 text-blue-400"})})}),(0,s.jsxs)("td",{className:"px-6 py-4",children:[(0,s.jsx)("div",{className:"font-medium text-white",children:e.nomeFantasia||e.razaoSocial}),(0,s.jsx)("div",{className:"text-xs text-gray-500",children:e.cnpj})]}),(0,s.jsx)("td",{className:"px-6 py-4 hidden md:table-cell",children:(0,s.jsx)("span",{className:"inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium border ".concat("Ativo"===(e.status||"Ativo")?"bg-green-500/10 text-green-400 border-green-500/20":"Inativo"===e.status?"bg-gray-500/10 text-gray-400 border-gray-500/20":"bg-red-500/10 text-red-400 border-red-500/20"),children:e.status||"Ativo"})}),(0,s.jsx)("td",{className:"px-6 py-4 text-gray-300 hidden md:table-cell",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(n.Z,{className:"h-3 w-3 text-gray-500"}),e.cidade]})}),(0,s.jsx)("td",{className:"px-6 py-4 text-gray-300 hidden md:table-cell",children:e.ultima_compra?new Date(e.ultima_compra).toLocaleDateString():"-"}),(0,s.jsx)("td",{className:"px-6 py-4 text-right",children:(0,s.jsxs)("div",{className:"flex justify-end gap-2",onClick:e=>e.stopPropagation(),children:[(0,s.jsx)("button",{onClick:()=>w(e.id),className:"rounded p-2 text-red-500/50 hover:bg-red-500/10 hover:text-red-500 transition-colors",title:"Excluir Cliente",children:(0,s.jsx)(d.Z,{className:"h-4 w-4"})}),(0,s.jsx)(f.default,{href:"/dashboard/clientes/".concat(e.id),children:(0,s.jsx)("button",{className:"rounded p-2 hover:bg-white/10 text-gray-400 hover:text-white transition-colors",title:"Editar Cliente",children:(0,s.jsx)(x.Z,{className:"h-4 w-4"})})})]})})]},e.id),N===e.id&&(0,s.jsx)("tr",{className:"bg-white/5",children:(0,s.jsx)("td",{colSpan:6,className:"p-0",children:(0,s.jsxs)(g.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"p-6 grid grid-cols-1 md:grid-cols-3 gap-6 text-sm",children:[(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("h4",{className:"text-gray-500 text-xs uppercase font-medium flex items-center gap-2",children:[(0,s.jsx)(h.Z,{className:"h-4 w-4"})," Contato"]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-gray-400 text-xs",children:"Email"}),(0,s.jsx)("p",{className:"text-white",children:e.email})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-gray-400 text-xs",children:"Telefone / Celular"}),(0,s.jsxs)("p",{className:"text-white",children:[e.telefone," ",e.celular?"/ ".concat(e.celular):""]})]})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("h4",{className:"text-gray-500 text-xs uppercase font-medium flex items-center gap-2",children:[(0,s.jsx)(n.Z,{className:"h-4 w-4"})," Endere\xe7o"]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:"text-white",children:[e.endereco,", ",e.numero]}),(0,s.jsxs)("p",{className:"text-gray-400",children:[e.bairro," - ",e.cidade,"/",e.estado]}),(0,s.jsxs)("p",{className:"text-gray-500 text-xs mt-1",children:["CEP: ",e.cep]})]})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("h4",{className:"text-gray-500 text-xs uppercase font-medium flex items-center gap-2",children:[(0,s.jsx)(u.Z,{className:"h-4 w-4"})," Dados Fiscais"]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-gray-400 text-xs",children:"Raz\xe3o Social"}),(0,s.jsx)("p",{className:"text-white",children:e.razaoSocial})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-gray-400 text-xs",children:"Inscri\xe7\xe3o Estadual"}),(0,s.jsx)("p",{className:"text-white",children:e.inscricaoEstadual||"Isento"})]})]})]})})})]})),0===E.length&&(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:6,className:"px-6 py-8 text-center text-gray-500",children:"Nenhum cliente encontrado."})})]})]})}),(0,s.jsx)(y.c,{isOpen:!!b,title:"Excluir Cliente",message:"Tem certeza que deseja excluir este cliente? Esta a\xe7\xe3o n\xe3o pode ser desfeita.",onConfirm:()=>{b&&(t(b),w(null))},onCancel:()=>w(null)})]})}},67387:function(e,t,a){"use strict";a.d(t,{c:function(){return i}});var s=a(3827),r=a(28745),o=a(38371),c=a(61524);function i(e){let{isOpen:t,title:a,message:i,onConfirm:l,onCancel:n}=e;return(0,s.jsx)(r.M,{children:t&&(0,s.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,s.jsx)(o.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm",onClick:n}),(0,s.jsxs)(o.E.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"relative w-full max-w-md overflow-hidden rounded-xl border border-white/10 bg-[#111] p-6 shadow-2xl",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,s.jsx)("div",{className:"rounded-full bg-red-500/10 p-3 text-red-500",children:(0,s.jsx)(c.Z,{className:"h-6 w-6"})}),(0,s.jsx)("h3",{className:"text-xl font-bold text-white",children:a})]}),(0,s.jsx)("p",{className:"text-gray-400 mb-8",children:i}),(0,s.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,s.jsx)("button",{onClick:n,className:"rounded-lg px-4 py-2 text-sm font-medium text-gray-400 hover:bg-white/5 hover:text-white transition-colors",children:"Cancelar"}),(0,s.jsx)("button",{onClick:l,className:"rounded-lg bg-red-600 px-4 py-2 text-sm font-medium text-white hover:bg-red-500 transition-colors shadow-lg shadow-red-900/20",children:"Confirmar Exclus\xe3o"})]})]})]})})}},5590:function(e,t,a){"use strict";a.d(t,{F:function(){return u},e:function(){return m}});var s=a(3827),r=a(64090),o=a(46578),c=a(98998),i=a(28814),l=a(52235),n=a(28745),d=a(38371);function x(e){let{message:t,type:a,isVisible:x=!0,onClose:h}=e;return(0,r.useEffect)(()=>{if(x){let e=setTimeout(()=>{h()},3e3);return()=>clearTimeout(e)}},[x,h]),(0,s.jsx)(n.M,{children:x&&(0,s.jsxs)(d.E.div,{initial:{opacity:0,y:50,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:.9},className:"fixed bottom-6 right-6 z-50 flex items-center gap-3 rounded-xl border border-white/10 bg-black/80 px-4 py-3 text-sm text-white shadow-2xl backdrop-blur-md",children:[(0,s.jsxs)("div",{className:"rounded-full p-1 ".concat("success"===a?"bg-green-500/20 text-green-500":"error"===a?"bg-red-500/20 text-red-500":"bg-blue-500/20 text-blue-500"),children:["success"===a&&(0,s.jsx)(o.Z,{className:"h-4 w-4"}),"error"===a&&(0,s.jsx)(c.Z,{className:"h-4 w-4"}),"info"===a&&(0,s.jsx)(i.Z,{className:"h-4 w-4"})]}),(0,s.jsx)("span",{className:"font-medium pr-2",children:t}),(0,s.jsx)("button",{onClick:h,className:"ml-2 rounded-lg p-1 text-gray-400 hover:bg-white/10 hover:text-white transition-colors",children:(0,s.jsx)(l.Z,{className:"h-3 w-3"})})]})})}let h=(0,r.createContext)(void 0);function u(e){let{children:t}=e,[a,o]=(0,r.useState)([]),[c,i]=(0,r.useState)([]),[l,n]=(0,r.useState)([]),[d,u]=(0,r.useState)([]),[m,p]=(0,r.useState)(!0),[f,g]=(0,r.useState)(null),[y,j]=(0,r.useState)(null),b=(0,r.useCallback)((e,t)=>{j({message:e,type:t})},[]),w=(0,r.useCallback)(async()=>{p(!0);try{let[e,t,a,s]=await Promise.all([fetch("/api/clients"),fetch("/api/products"),fetch("/api/orders"),fetch("/api/fabricas")]);e.ok&&o(await e.json()),t.ok&&i(await t.json()),a.ok&&n(await a.json()),s.ok&&u(await s.json())}catch(e){console.error("Error fetching data:",e),b("Erro ao carregar dados","error")}finally{p(!1)}},[b]);(0,r.useEffect)(()=>{w();let e=localStorage.getItem("frplus_user");e&&g(e)},[w]);let N=async e=>{try{let t=await fetch("/api/clients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(t.ok){let e=await t.json();o(t=>[...t,e]),b("Cliente cadastrado com sucesso!","success")}else b("Erro ao cadastrar cliente","error")}catch(e){console.error("Error adding client:",e),b("Erro ao cadastrar cliente","error")}},v=async(e,t)=>{try{let a=await fetch("/api/clients/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(a.ok){let t=await a.json();o(a=>a.map(a=>a.id===e?t:a)),b("Cliente atualizado com sucesso!","success")}}catch(e){console.error("Error updating client:",e),b("Erro ao atualizar cliente","error")}},E=async e=>{try{(await fetch("/api/clients/".concat(e),{method:"DELETE"})).ok&&(o(t=>t.filter(t=>t.id!==e)),b("Cliente exclu\xeddo com sucesso!","success"))}catch(e){console.error("Error removing client:",e),b("Erro ao excluir cliente","error")}},C=async e=>{try{(await fetch("/api/products",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok?(await w(),b("Produto cadastrado com sucesso!","success")):b("Erro ao cadastrar produto","error")}catch(e){console.error("Error adding product:",e),b("Erro ao cadastrar produto","error")}},S=async(e,t)=>{try{(await fetch("/api/products/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).ok&&(await w(),b("Produto atualizado com sucesso!","success"))}catch(e){console.error("Error updating product:",e),b("Erro ao atualizar produto","error")}},k=async e=>{try{(await fetch("/api/products/".concat(e),{method:"DELETE"})).ok&&(i(t=>t.filter(t=>t.id!==e)),b("Produto exclu\xeddo com sucesso!","success"))}catch(e){console.error("Error removing product:",e),b("Erro ao excluir produto","error")}},T=async e=>{try{(await fetch("/api/orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok?(await w(),b("Pedido cadastrado com sucesso!","success")):b("Erro ao cadastrar pedido","error")}catch(e){console.error("Error adding order:",e),b("Erro ao cadastrar pedido","error")}},P=async(e,t)=>{try{(await fetch("/api/orders/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).ok&&(await w(),b("Pedido atualizado com sucesso!","success"))}catch(e){console.error("Error updating order:",e),b("Erro ao atualizar pedido","error")}},z=async e=>{try{(await fetch("/api/orders/".concat(e),{method:"DELETE"})).ok&&(n(t=>t.filter(t=>t.id!==e)),b("Pedido exclu\xeddo com sucesso!","success"))}catch(e){console.error("Error removing order:",e),b("Erro ao excluir pedido","error")}},O=async e=>{try{let t=await fetch("/api/fabricas",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(t.ok){let e=await t.json();u(t=>[...t,e]),b("F\xe1brica cadastrada com sucesso!","success")}}catch(e){console.error("Error adding fabrica:",e),b("Erro ao cadastrar f\xe1brica","error")}},Z=async(e,t)=>{try{(await fetch("/api/fabricas/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).ok&&(await w(),b("F\xe1brica atualizada com sucesso!","success"))}catch(e){console.error("Error updating fabrica:",e),b("Erro ao atualizar f\xe1brica","error")}},_=async e=>{try{(await fetch("/api/fabricas/".concat(e),{method:"DELETE"})).ok&&(u(t=>t.filter(t=>t.id!==e)),b("F\xe1brica exclu\xedda com sucesso!","success"))}catch(e){console.error("Error removing fabrica:",e),b("Erro ao excluir f\xe1brica","error")}};return(0,s.jsxs)(h.Provider,{value:{clients:a,products:c,orders:l,fabricas:d,loading:m,addClient:N,updateClient:v,removeClient:E,addProduct:C,updateProduct:S,removeProduct:k,addOrder:T,updateOrder:P,removeOrder:z,addFabrica:O,updateFabrica:Z,removeFabrica:_,getDashboardStats:()=>({totalSales:l.reduce((e,t)=>e+t.valorTotal,0),totalOrders:l.length,newClients:a.length,totalProducts:c.length}),showToast:b,user:f,login:e=>{g(e),localStorage.setItem("frplus_user",e)},logout:()=>{g(null),localStorage.removeItem("frplus_user")},refreshData:w},children:[t,y&&(0,s.jsx)(x,{message:y.message,type:y.type,onClose:()=>j(null)})]})}function m(){let e=(0,r.useContext)(h);if(void 0===e)throw Error("useData must be used within a DataProvider");return e}}},function(e){e.O(0,[462,792,303,971,69,744],function(){return e(e.s=64444)}),_N_E=e.O()}]);