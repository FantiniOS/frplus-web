(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[823],{31982:function(e,a,s){Promise.resolve().then(s.bind(s,5259))},5259:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return j}});var o=s(3827),r=s(8792),c=s(53879),t=s(70699),i=s(80559),l=s(18994),n=s(28670),d=s(11213),u=s(62457),p=s(48219),m=s(5590),h=s(64090),x=s(47907);function j(){let{addClient:e,showToast:a}=(0,m.e)(),s=(0,x.useRouter)(),[j,b]=(0,h.useState)(!1),[f,g]=(0,h.useState)(!1),[N,v]=(0,h.useState)({status:"Ativo",ultima_compra:"Nunca",tabelaPreco:"50a199",uf:"SP"}),y=e=>{let{name:a,value:s}=e.target;v(e=>({...e,[a]:s}))},w=async()=>{var e;let s=null===(e=N.cnpj)||void 0===e?void 0:e.replace(/\D/g,"");if(!s||14!==s.length){a("CNPJ inv\xe1lido (14 d\xedgitos)","error");return}b(!0);try{let e=await fetch("https://brasilapi.com.br/api/cnpj/v1/".concat(s));if(!e.ok)throw Error("CNPJ n\xe3o encontrado");let o=await e.json();v(e=>{var a;return{...e,razaoSocial:o.razao_social||e.razaoSocial,nomeFantasia:o.nome_fantasia||e.nomeFantasia,cep:(null===(a=o.cep)||void 0===a?void 0:a.replace(/\D/g,""))||e.cep,endereco:o.logradouro||e.endereco,numero:o.numero||e.numero,bairro:o.bairro||e.bairro,cidade:o.municipio||e.cidade,uf:o.uf||e.uf}}),a("Dados do CNPJ carregados!","success")}catch(e){a("CNPJ n\xe3o encontrado","error")}finally{b(!1)}},E=async()=>{var e;let s=null===(e=N.cep)||void 0===e?void 0:e.replace(/\D/g,"");if(!s||8!==s.length){a("CEP inv\xe1lido (8 d\xedgitos)","error");return}g(!0);try{let e=await fetch("https://viacep.com.br/ws/".concat(s,"/json/")),o=await e.json();if(o.erro)throw Error("CEP n\xe3o encontrado");v(e=>({...e,endereco:o.logradouro||e.endereco,bairro:o.bairro||e.bairro,cidade:o.localidade||e.cidade,uf:o.uf||e.uf})),a("Endere\xe7o carregado!","success")}catch(e){a("CEP n\xe3o encontrado","error")}finally{g(!1)}},C=o=>{if(o.preventDefault(),!N.razaoSocial||!N.cnpj){a("Preencha Raz\xe3o Social e CNPJ","error");return}e({id:Date.now().toString(),razaoSocial:N.razaoSocial||"",nomeFantasia:N.nomeFantasia||"",nome:N.razaoSocial||"",cnpj:N.cnpj||"",cidade:"".concat(N.cidade||"",", ").concat(N.uf||""),status:"Ativo",ultima_compra:"Nunca",...N}),s.push("/dashboard/clientes")};return(0,o.jsxs)("div",{className:"max-w-2xl mx-auto space-y-4",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("div",{className:"flex items-center gap-3",children:[(0,o.jsx)(r.default,{href:"/dashboard/clientes",className:"p-1.5 rounded-lg hover:bg-white/10 text-gray-400",children:(0,o.jsx)(c.Z,{className:"h-5 w-5"})}),(0,o.jsx)("h1",{className:"text-xl font-bold text-white",children:"Novo Cliente"})]}),(0,o.jsxs)("button",{onClick:C,className:"flex items-center gap-2 rounded-lg bg-blue-600 px-4 py-1.5 text-sm font-medium text-white hover:bg-blue-500",children:[(0,o.jsx)(t.Z,{className:"h-4 w-4"})," Salvar"]})]}),(0,o.jsxs)("form",{className:"space-y-4",onSubmit:C,children:[(0,o.jsxs)("div",{className:"form-card",children:[(0,o.jsxs)("div",{className:"flex items-center gap-2 mb-3 pb-2 border-b border-white/5",children:[(0,o.jsx)(i.Z,{className:"h-4 w-4 text-blue-400"}),(0,o.jsx)("span",{className:"text-sm font-medium text-white",children:"Dados da Empresa"})]}),(0,o.jsxs)("div",{className:"grid gap-3 grid-cols-2",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"label-compact",children:"CNPJ *"}),(0,o.jsxs)("div",{className:"flex gap-1",children:[(0,o.jsx)("input",{name:"cnpj",value:N.cnpj||"",onChange:y,placeholder:"00.000.000/0000-00",className:"input-compact flex-1"}),(0,o.jsx)("button",{type:"button",onClick:w,disabled:j,className:"px-2 rounded-lg bg-blue-600/20 text-blue-400 hover:bg-blue-600/30 disabled:opacity-50",title:"Buscar dados pelo CNPJ",children:j?(0,o.jsx)(l.Z,{className:"h-4 w-4 animate-spin"}):(0,o.jsx)(n.Z,{className:"h-4 w-4"})})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"label-compact",children:"Inscri\xe7\xe3o Estadual"}),(0,o.jsx)("input",{name:"inscricaoEstadual",value:N.inscricaoEstadual||"",onChange:y,placeholder:"Isento",className:"input-compact"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"label-compact",children:"Raz\xe3o Social *"}),(0,o.jsx)("input",{name:"razaoSocial",value:N.razaoSocial||"",onChange:y,className:"input-compact"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"label-compact",children:"Nome Fantasia"}),(0,o.jsx)("input",{name:"nomeFantasia",value:N.nomeFantasia||"",onChange:y,className:"input-compact"})]})]})]}),(0,o.jsxs)("div",{className:"form-card",children:[(0,o.jsxs)("div",{className:"flex items-center gap-2 mb-3 pb-2 border-b border-white/5",children:[(0,o.jsx)(d.Z,{className:"h-4 w-4 text-purple-400"}),(0,o.jsx)("span",{className:"text-sm font-medium text-white",children:"Contato"})]}),(0,o.jsxs)("div",{className:"grid gap-3 grid-cols-3",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"label-compact",children:"Email"}),(0,o.jsx)("input",{name:"email",type:"email",value:N.email||"",onChange:y,placeholder:"contato@empresa.com",className:"input-compact"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"label-compact",children:"Telefone Fixo"}),(0,o.jsx)("input",{name:"telefone",value:N.telefone||"",onChange:y,placeholder:"(00) 0000-0000",className:"input-compact"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"label-compact",children:"Celular / WhatsApp"}),(0,o.jsx)("input",{name:"celular",value:N.celular||"",onChange:y,placeholder:"(00) 90000-0000",className:"input-compact"})]})]})]}),(0,o.jsxs)("div",{className:"form-card",children:[(0,o.jsxs)("div",{className:"flex items-center gap-2 mb-3 pb-2 border-b border-white/5",children:[(0,o.jsx)(u.Z,{className:"h-4 w-4 text-orange-400"}),(0,o.jsx)("span",{className:"text-sm font-medium text-white",children:"Localiza\xe7\xe3o"})]}),(0,o.jsxs)("div",{className:"grid gap-3 grid-cols-4",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"label-compact",children:"CEP"}),(0,o.jsxs)("div",{className:"flex gap-1",children:[(0,o.jsx)("input",{name:"cep",value:N.cep||"",onChange:y,placeholder:"00000-000",className:"input-compact flex-1"}),(0,o.jsx)("button",{type:"button",onClick:E,disabled:f,className:"px-2 rounded-lg bg-orange-600/20 text-orange-400 hover:bg-orange-600/30 disabled:opacity-50",title:"Buscar endere\xe7o pelo CEP",children:f?(0,o.jsx)(l.Z,{className:"h-4 w-4 animate-spin"}):(0,o.jsx)(n.Z,{className:"h-4 w-4"})})]})]}),(0,o.jsxs)("div",{className:"col-span-3",children:[(0,o.jsx)("label",{className:"label-compact",children:"Endere\xe7o"}),(0,o.jsx)("input",{name:"endereco",value:N.endereco||"",onChange:y,className:"input-compact"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"label-compact",children:"N\xfamero"}),(0,o.jsx)("input",{name:"numero",value:N.numero||"",onChange:y,className:"input-compact"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"label-compact",children:"Bairro"}),(0,o.jsx)("input",{name:"bairro",value:N.bairro||"",onChange:y,className:"input-compact"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"label-compact",children:"Cidade"}),(0,o.jsx)("input",{name:"cidade",value:N.cidade||"",onChange:y,className:"input-compact"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"label-compact",children:"UF"}),(0,o.jsxs)("select",{name:"uf",value:N.uf||"",onChange:y,className:"input-compact",children:[(0,o.jsx)("option",{value:"",children:"-"}),(0,o.jsx)("option",{children:"AC"}),(0,o.jsx)("option",{children:"AL"}),(0,o.jsx)("option",{children:"AP"}),(0,o.jsx)("option",{children:"AM"}),(0,o.jsx)("option",{children:"BA"}),(0,o.jsx)("option",{children:"CE"}),(0,o.jsx)("option",{children:"DF"}),(0,o.jsx)("option",{children:"ES"}),(0,o.jsx)("option",{children:"GO"}),(0,o.jsx)("option",{children:"MA"}),(0,o.jsx)("option",{children:"MT"}),(0,o.jsx)("option",{children:"MS"}),(0,o.jsx)("option",{children:"MG"}),(0,o.jsx)("option",{children:"PA"}),(0,o.jsx)("option",{children:"PB"}),(0,o.jsx)("option",{children:"PR"}),(0,o.jsx)("option",{children:"PE"}),(0,o.jsx)("option",{children:"PI"}),(0,o.jsx)("option",{children:"RJ"}),(0,o.jsx)("option",{children:"RN"}),(0,o.jsx)("option",{children:"RS"}),(0,o.jsx)("option",{children:"RO"}),(0,o.jsx)("option",{children:"RR"}),(0,o.jsx)("option",{children:"SC"}),(0,o.jsx)("option",{children:"SP"}),(0,o.jsx)("option",{children:"SE"}),(0,o.jsx)("option",{children:"TO"})]})]})]})]}),(0,o.jsxs)("div",{className:"form-card",children:[(0,o.jsxs)("div",{className:"flex items-center gap-2 mb-3 pb-2 border-b border-white/5",children:[(0,o.jsx)(p.Z,{className:"h-4 w-4 text-green-400"}),(0,o.jsx)("span",{className:"text-sm font-medium text-white",children:"Perfil Comercial"})]}),(0,o.jsxs)("div",{className:"grid gap-3 grid-cols-2",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"label-compact",children:"Tabela de Pre\xe7o"}),(0,o.jsxs)("select",{name:"tabelaPreco",value:N.tabelaPreco||"",onChange:y,className:"input-compact",children:[(0,o.jsx)("option",{value:"50a199",children:"50 a 199 CX"}),(0,o.jsx)("option",{value:"200a699",children:"200 a 699 CX"}),(0,o.jsx)("option",{value:"atacado",children:"Atacado"}),(0,o.jsx)("option",{value:"atacadoAVista",children:"Atacado \xe0 Vista"}),(0,o.jsx)("option",{value:"redes",children:"Redes"})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"label-compact",children:"Limite de Cr\xe9dito (R$)"}),(0,o.jsx)("input",{name:"limiteCredito",type:"number",value:N.limiteCredito||"",onChange:y,placeholder:"0,00",className:"input-compact"})]}),(0,o.jsxs)("div",{className:"col-span-2",children:[(0,o.jsx)("label",{className:"label-compact",children:"Observa\xe7\xf5es"}),(0,o.jsx)("textarea",{name:"observacoes",rows:2,value:N.observacoes||"",onChange:y,className:"input-compact resize-none"})]})]})]})]})]})}},5590:function(e,a,s){"use strict";s.d(a,{F:function(){return m},e:function(){return h}});var o=s(3827),r=s(64090),c=s(46578),t=s(98998),i=s(28814),l=s(52235),n=s(28745),d=s(38371);function u(e){let{message:a,type:s,isVisible:u=!0,onClose:p}=e;return(0,r.useEffect)(()=>{if(u){let e=setTimeout(()=>{p()},3e3);return()=>clearTimeout(e)}},[u,p]),(0,o.jsx)(n.M,{children:u&&(0,o.jsxs)(d.E.div,{initial:{opacity:0,y:50,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:.9},className:"fixed bottom-6 right-6 z-50 flex items-center gap-3 rounded-xl border border-white/10 bg-black/80 px-4 py-3 text-sm text-white shadow-2xl backdrop-blur-md",children:[(0,o.jsxs)("div",{className:"rounded-full p-1 ".concat("success"===s?"bg-green-500/20 text-green-500":"error"===s?"bg-red-500/20 text-red-500":"bg-blue-500/20 text-blue-500"),children:["success"===s&&(0,o.jsx)(c.Z,{className:"h-4 w-4"}),"error"===s&&(0,o.jsx)(t.Z,{className:"h-4 w-4"}),"info"===s&&(0,o.jsx)(i.Z,{className:"h-4 w-4"})]}),(0,o.jsx)("span",{className:"font-medium pr-2",children:a}),(0,o.jsx)("button",{onClick:p,className:"ml-2 rounded-lg p-1 text-gray-400 hover:bg-white/10 hover:text-white transition-colors",children:(0,o.jsx)(l.Z,{className:"h-3 w-3"})})]})})}let p=(0,r.createContext)(void 0);function m(e){let{children:a}=e,[s,c]=(0,r.useState)([]),[t,i]=(0,r.useState)([]),[l,n]=(0,r.useState)([]),[d,m]=(0,r.useState)([]),[h,x]=(0,r.useState)(!0),[j,b]=(0,r.useState)(null),[f,g]=(0,r.useState)(null),N=(0,r.useCallback)((e,a)=>{g({message:e,type:a})},[]),v=(0,r.useCallback)(async()=>{x(!0);try{let[e,a,s,o]=await Promise.all([fetch("/api/clients"),fetch("/api/products"),fetch("/api/orders"),fetch("/api/fabricas")]);e.ok&&c(await e.json()),a.ok&&i(await a.json()),s.ok&&n(await s.json()),o.ok&&m(await o.json())}catch(e){console.error("Error fetching data:",e),N("Erro ao carregar dados","error")}finally{x(!1)}},[N]);(0,r.useEffect)(()=>{v();let e=localStorage.getItem("frplus_user");e&&b(e)},[v]);let y=async e=>{try{let a=await fetch("/api/clients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(a.ok){let e=await a.json();c(a=>[...a,e]),N("Cliente cadastrado com sucesso!","success")}else N("Erro ao cadastrar cliente","error")}catch(e){console.error("Error adding client:",e),N("Erro ao cadastrar cliente","error")}},w=async(e,a)=>{try{let s=await fetch("/api/clients/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(s.ok){let a=await s.json();c(s=>s.map(s=>s.id===e?a:s)),N("Cliente atualizado com sucesso!","success")}}catch(e){console.error("Error updating client:",e),N("Erro ao atualizar cliente","error")}},E=async e=>{try{(await fetch("/api/clients/".concat(e),{method:"DELETE"})).ok&&(c(a=>a.filter(a=>a.id!==e)),N("Cliente exclu\xeddo com sucesso!","success"))}catch(e){console.error("Error removing client:",e),N("Erro ao excluir cliente","error")}},C=async e=>{try{(await fetch("/api/products",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok?(await v(),N("Produto cadastrado com sucesso!","success")):N("Erro ao cadastrar produto","error")}catch(e){console.error("Error adding product:",e),N("Erro ao cadastrar produto","error")}},S=async(e,a)=>{try{(await fetch("/api/products/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).ok&&(await v(),N("Produto atualizado com sucesso!","success"))}catch(e){console.error("Error updating product:",e),N("Erro ao atualizar produto","error")}},P=async e=>{try{(await fetch("/api/products/".concat(e),{method:"DELETE"})).ok&&(i(a=>a.filter(a=>a.id!==e)),N("Produto exclu\xeddo com sucesso!","success"))}catch(e){console.error("Error removing product:",e),N("Erro ao excluir produto","error")}},k=async e=>{try{(await fetch("/api/orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok?(await v(),N("Pedido cadastrado com sucesso!","success")):N("Erro ao cadastrar pedido","error")}catch(e){console.error("Error adding order:",e),N("Erro ao cadastrar pedido","error")}},T=async(e,a)=>{try{(await fetch("/api/orders/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).ok&&(await v(),N("Pedido atualizado com sucesso!","success"))}catch(e){console.error("Error updating order:",e),N("Erro ao atualizar pedido","error")}},z=async e=>{try{(await fetch("/api/orders/".concat(e),{method:"DELETE"})).ok&&(n(a=>a.filter(a=>a.id!==e)),N("Pedido exclu\xeddo com sucesso!","success"))}catch(e){console.error("Error removing order:",e),N("Erro ao excluir pedido","error")}},O=async e=>{try{let a=await fetch("/api/fabricas",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(a.ok){let e=await a.json();m(a=>[...a,e]),N("F\xe1brica cadastrada com sucesso!","success")}}catch(e){console.error("Error adding fabrica:",e),N("Erro ao cadastrar f\xe1brica","error")}},J=async(e,a)=>{try{(await fetch("/api/fabricas/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).ok&&(await v(),N("F\xe1brica atualizada com sucesso!","success"))}catch(e){console.error("Error updating fabrica:",e),N("Erro ao atualizar f\xe1brica","error")}},D=async e=>{try{(await fetch("/api/fabricas/".concat(e),{method:"DELETE"})).ok&&(m(a=>a.filter(a=>a.id!==e)),N("F\xe1brica exclu\xedda com sucesso!","success"))}catch(e){console.error("Error removing fabrica:",e),N("Erro ao excluir f\xe1brica","error")}};return(0,o.jsxs)(p.Provider,{value:{clients:s,products:t,orders:l,fabricas:d,loading:h,addClient:y,updateClient:w,removeClient:E,addProduct:C,updateProduct:S,removeProduct:P,addOrder:k,updateOrder:T,removeOrder:z,addFabrica:O,updateFabrica:J,removeFabrica:D,getDashboardStats:()=>({totalSales:l.reduce((e,a)=>e+a.valorTotal,0),totalOrders:l.length,newClients:s.length,totalProducts:t.length}),showToast:N,user:j,login:e=>{b(e),localStorage.setItem("frplus_user",e)},logout:()=>{b(null),localStorage.removeItem("frplus_user")},refreshData:v},children:[a,f&&(0,o.jsx)(u,{message:f.message,type:f.type,onClose:()=>g(null)})]})}function h(){let e=(0,r.useContext)(p);if(void 0===e)throw Error("useData must be used within a DataProvider");return e}}},function(e){e.O(0,[462,792,186,971,69,744],function(){return e(e.s=31982)}),_N_E=e.O()}]);