(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[811],{92402:function(e,t,r){Promise.resolve().then(r.bind(r,8164))},98998:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(87461).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},53879:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(87461).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},46578:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(87461).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},95132:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(87461).Z)("Factory",[["path",{d:"M2 20a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8l-7 5V8l-7 5V4a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"159hny"}],["path",{d:"M17 18h1",key:"uldtlt"}],["path",{d:"M12 18h1",key:"s9uhes"}],["path",{d:"M7 18h1",key:"1neino"}]])},28814:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(87461).Z)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},70699:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(87461).Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]])},28670:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(87461).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},11213:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(87461).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},52235:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(87461).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},47907:function(e,t,r){"use strict";var a=r(15313);r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}})},8164:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return x}});var a=r(3827),s=r(95132),o=r(53879),l=r(28670),n=r(11213),c=r(70699),i=r(5590),d=r(64090),u=r(47907);function x(){let{clients:e,products:t,addOrder:r,showToast:x,fabricas:h}=(0,i.e)(),p=(0,u.useRouter)(),[m,g]=(0,d.useState)("factory"),[f,y]=(0,d.useState)(""),[b,j]=(0,d.useState)(""),[N,v]=(0,d.useState)(""),[w,k]=(0,d.useState)(""),[C,E]=(0,d.useState)([]),[S,P]=(0,d.useState)(""),[Z,T]=(0,d.useState)(new Date().toISOString().split("T")[0]),[z,R]=(0,d.useState)("preco50a199"),[I,L]=(0,d.useState)("30 dias"),[M,O]=(0,d.useState)("all"),D=e=>{y(e),g("client"),E([])},F=h.find(e=>e.id===f),A=e=>{j(e),g("order")},V=e.find(e=>e.id===b),q=(0,d.useMemo)(()=>N?e.filter(e=>(e.nomeFantasia||e.razaoSocial||"").toLowerCase().includes(N.toLowerCase())||e.cnpj.includes(N)||(e.cidade||"").toLowerCase().includes(N.toLowerCase())):e,[e,N]),B=(0,d.useMemo)(()=>{if("order"!==m)return[];let e=t.filter(e=>e.fabricaId===f);if(w){let t=w.toLowerCase();e=e.filter(e=>e.nome.toLowerCase().includes(t)||e.codigo.toLowerCase().includes(t))}return"all"!==M&&(e=e.filter(e=>(e.categoria||"Geral")===M)),e},[t,w,f,M,m]),U=(0,d.useMemo)(()=>{let e=new Set;return t.filter(e=>e.fabricaId===f).forEach(t=>e.add(t.categoria||"Geral")),Array.from(e).sort()},[t,f]),J=(e,t)=>{switch(t){case"200a699":return Number(e.preco200a699);case"atacado":return Number(e.precoAtacado);case"atacadoAVista":return Number(e.precoAtacadoAVista);case"redes":return Number(e.precoRedes);default:return Number(e.preco50a199)}},_=e=>J(e,z),H=e=>{R(e),E(r=>r.map(r=>{let a=t.find(e=>e.id===r.produtoId);if(!a)return r;let s=J(a,e);return{...r,precoUnitario:s,total:s*r.quantidade}}))},G=(e,t,r)=>{let a=_(r);if(t<=0){E(t=>t.filter(t=>t.produtoId!==e));return}E(s=>s.find(t=>t.produtoId===e)?s.map(r=>r.produtoId===e?{...r,quantidade:t,total:t*a}:r):[...s,{produtoId:e,nomeProduto:r.nome,quantidade:t,precoUnitario:a,total:t*a}])},K=(e,t)=>{if("Enter"===e.key||"ArrowDown"===e.key){e.preventDefault();let r=document.getElementById("qtd-".concat(t+1));null==r||r.focus()}if("ArrowUp"===e.key){e.preventDefault();let r=document.getElementById("qtd-".concat(t-1));null==r||r.focus()}},Q=C.reduce((e,t)=>e+t.total,0),W=C.reduce((e,t)=>e+t.quantidade,0);return"factory"===m?(0,a.jsxs)("div",{className:"h-[calc(100vh-100px)] flex flex-col items-center justify-center animate-in fade-in zoom-in duration-300",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"Novo Pedido"}),(0,a.jsx)("p",{className:"text-gray-400 mb-8",children:"Passo 1: Selecione a Representada"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 w-full max-w-4xl px-4",children:h.map(e=>(0,a.jsxs)("button",{onClick:()=>D(e.id),className:"bg-white/5 border border-white/10 hover:bg-blue-600/20 hover:border-blue-500 p-8 rounded-xl transition-all group text-left relative overflow-hidden",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500/0 to-blue-500/0 group-hover:to-blue-500/10 transition-all"}),(0,a.jsx)(s.Z,{className:"h-8 w-8 text-gray-400 group-hover:text-blue-400 mb-4"}),(0,a.jsx)("h3",{className:"text-xl font-bold text-white mb-1 relative z-10",children:e.nome}),(0,a.jsxs)("p",{className:"text-sm text-gray-500 group-hover:text-gray-300 relative z-10",children:[t.filter(t=>t.fabricaId===e.id).length," produtos"]})]},e.id))})]}):"client"===m?(0,a.jsx)("div",{className:"h-[calc(100vh-100px)] flex flex-col items-center animate-in slide-in-from-right duration-300",children:(0,a.jsxs)("div",{className:"w-full max-w-5xl px-4 pt-8 flex flex-col h-full",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-white",children:"Selecione o Cliente"}),(0,a.jsxs)("p",{className:"text-gray-400 flex items-center gap-2",children:[(0,a.jsx)(s.Z,{className:"h-3 w-3"}),"Pedido para: ",(0,a.jsx)("span",{className:"text-blue-400",children:null==F?void 0:F.nome})]})]}),(0,a.jsxs)("button",{onClick:()=>g("factory"),className:"text-gray-400 hover:text-white flex items-center gap-2",children:[(0,a.jsx)(o.Z,{className:"h-4 w-4"})," Voltar"]})]}),(0,a.jsxs)("div",{className:"relative mb-6",children:[(0,a.jsx)(l.Z,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-500"}),(0,a.jsx)("input",{autoFocus:!0,type:"text",value:N,onChange:e=>v(e.target.value),placeholder:"Buscar por Raz\xe3o Social, Nome Fantasia, CNPJ ou Cidade...",className:"w-full bg-gray-900 border border-gray-700 rounded-xl text-lg px-12 py-4 focus:border-blue-500 outline-none text-white shadow-lg"})]}),(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto bg-gray-900/50 border border-gray-800 rounded-xl shadow-inner scrollbar-thin scrollbar-thumb-gray-700",children:[(0,a.jsxs)("table",{className:"w-full text-left border-collapse",children:[(0,a.jsx)("thead",{className:"bg-gray-800/50 sticky top-0 backdrop-blur-sm z-10",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase",children:"Cliente / Raz\xe3o Social"}),(0,a.jsx)("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase",children:"CNPJ"}),(0,a.jsx)("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase",children:"Cidade/UF"}),(0,a.jsx)("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase text-right",children:"A\xe7\xe3o"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-gray-800",children:q.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-blue-600/10 transition-colors group cursor-pointer",onClick:()=>A(e.id),children:[(0,a.jsxs)("td",{className:"p-4",children:[(0,a.jsx)("div",{className:"font-bold text-white group-hover:text-blue-300",children:e.nomeFantasia}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:e.razaoSocial})]}),(0,a.jsx)("td",{className:"p-4 text-sm text-gray-400 font-mono",children:e.cnpj}),(0,a.jsxs)("td",{className:"p-4 text-sm text-gray-400",children:[e.cidade," ",(0,a.jsxs)("span",{className:"text-gray-600 text-xs",children:["/ ",e.estado]})]}),(0,a.jsx)("td",{className:"p-4 text-right",children:(0,a.jsx)("button",{className:"bg-blue-600/20 text-blue-400 p-2 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity",children:(0,a.jsx)(o.Z,{className:"h-4 w-4 rotate-180"})})})]},e.id))})]}),0===q.length&&(0,a.jsxs)("div",{className:"p-12 text-center text-gray-500",children:[(0,a.jsx)(n.Z,{className:"h-12 w-12 mx-auto mb-4 opacity-20"}),(0,a.jsxs)("p",{children:['Nenhum cliente encontrado com "',N,'"']})]})]})]})}):(0,a.jsxs)("div",{className:"h-[calc(100vh-100px)] flex flex-col bg-gray-900 text-white animate-in slide-in-from-right duration-300",children:[(0,a.jsxs)("div",{className:"h-14 bg-gray-800 border-b border-gray-700 flex items-center justify-between px-4 sticky top-0 z-20 shadow-md",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("button",{onClick:()=>g("client"),className:"text-gray-400 hover:text-white flex items-center gap-2 text-sm font-medium",children:[(0,a.jsx)(o.Z,{className:"h-4 w-4"}),"Trocar Cliente"]}),(0,a.jsx)("div",{className:"h-6 w-px bg-gray-600 mx-2"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(s.Z,{className:"h-4 w-4 text-blue-400"}),(0,a.jsx)("span",{className:"font-bold text-lg",children:null==F?void 0:F.nome})]}),(0,a.jsx)("div",{className:"h-6 w-px bg-gray-600 mx-2"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,a.jsx)(n.Z,{className:"h-4 w-4 text-gray-400"}),(0,a.jsx)("span",{className:"font-medium text-gray-300",children:null==V?void 0:V.nomeFantasia})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"text-xs text-gray-400 uppercase",children:"Total do Pedido"}),(0,a.jsx)("p",{className:"text-xl font-bold text-green-400 leading-none",children:Q.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})})]}),(0,a.jsxs)("button",{onClick:()=>b?0===C.length?x("Adicione produtos","error"):void(r({clienteId:b,fabricaId:f,nomeCliente:(null==V?void 0:V.nomeFantasia)||"",data:new Date(Z+"T12:00:00").toISOString(),itens:C,valorTotal:Q,observacoes:S,status:"Pendente",tabelaPreco:z,condicaoPagamento:I}),p.push("/dashboard/pedidos")):x("Selecione um cliente","error"),disabled:0===C.length,className:"bg-green-600 hover:bg-green-500 text-white px-6 py-2 rounded font-bold text-sm disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[(0,a.jsx)(c.Z,{className:"h-4 w-4"}),"FINALIZAR (F2)"]})]})]}),(0,a.jsxs)("div",{className:"flex-1 flex overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex-1 flex flex-col border-r border-gray-700",children:[(0,a.jsxs)("div",{className:"bg-gray-800 p-2 flex gap-2 border-b border-gray-700",children:[(0,a.jsxs)("div",{className:"relative flex-1",children:[(0,a.jsx)(l.Z,{className:"absolute left-2 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-500"}),(0,a.jsx)("input",{autoFocus:!0,type:"text",value:w,onChange:e=>k(e.target.value),placeholder:"Buscar produto em ".concat(null==F?void 0:F.nome,"..."),className:"w-full bg-gray-900 border border-gray-600 rounded text-sm px-8 py-1 focus:border-blue-500 outline-none text-white h-8"})]}),(0,a.jsxs)("select",{value:M,onChange:e=>O(e.target.value),className:"bg-gray-900 border border-gray-600 rounded text-sm px-3 py-1 outline-none text-white h-8 w-48",children:[(0,a.jsx)("option",{value:"all",children:"Todas Categorias"}),U.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]})]}),(0,a.jsxs)("div",{className:"flex-1 overflow-auto bg-gray-900",children:[(0,a.jsxs)("table",{className:"w-full text-left border-collapse",children:[(0,a.jsx)("thead",{className:"bg-gray-800 text-xs text-gray-400 uppercase font-semibold sticky top-0 z-10 shadow-sm",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-3 py-2 border-b border-gray-700 w-20",children:"C\xf3d"}),(0,a.jsx)("th",{className:"px-3 py-2 border-b border-gray-700",children:"Produto"}),(0,a.jsx)("th",{className:"px-3 py-2 border-b border-gray-700 w-32",children:"Categ."}),(0,a.jsx)("th",{className:"px-3 py-2 border-b border-gray-700 w-28 text-right",children:"Pre\xe7o"}),(0,a.jsx)("th",{className:"px-3 py-2 border-b border-gray-700 w-24 text-center bg-gray-700/50",children:"Qtd."}),(0,a.jsx)("th",{className:"px-3 py-2 border-b border-gray-700 w-32 text-right",children:"Total"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-gray-800",children:B.map((e,t)=>{let r=C.find(t=>t.produtoId===e.id),s=(null==r?void 0:r.quantidade)||0,o=_(e);return(0,a.jsxs)("tr",{className:"\n                                                group transition-colors \n                                                ".concat(s>0?"bg-blue-900/20":"even:bg-gray-800/30 hover:bg-gray-800","\n                                            "),children:[(0,a.jsx)("td",{className:"px-3 py-1.5 text-xs text-gray-500 font-mono border-r border-gray-800/50",children:e.codigo}),(0,a.jsx)("td",{className:"px-3 py-1.5 text-sm font-medium text-gray-200 border-r border-gray-800/50",children:e.nome}),(0,a.jsx)("td",{className:"px-3 py-1.5 text-xs text-gray-500 border-r border-gray-800/50 truncate max-w-[100px]",children:e.categoria||"-"}),(0,a.jsx)("td",{className:"px-3 py-1.5 text-sm text-gray-400 text-right border-r border-gray-800/50",children:o.toLocaleString("pt-BR",{minimumFractionDigits:2})}),(0,a.jsx)("td",{className:"px-1 py-1 text-center border-r border-gray-800/50 bg-gray-800/20",children:(0,a.jsx)("input",{id:"qtd-".concat(t),type:"number",min:"0",value:s||"",onKeyDown:e=>K(e,t),onChange:t=>G(e.id,Number(t.target.value),e),className:"\n                                                        w-full text-center bg-transparent outline-none font-bold text-sm\n                                                        ".concat(s>0?"text-blue-400":"text-gray-600 focus:text-white","\n                                                    "),placeholder:"-"})}),(0,a.jsx)("td",{className:"px-3 py-1.5 text-sm text-right",children:s>0?(0,a.jsx)("span",{className:"text-green-400 font-bold",children:(s*o).toLocaleString("pt-BR",{minimumFractionDigits:2})}):(0,a.jsx)("span",{className:"text-gray-700",children:"-"})})]},e.id)})})]}),0===B.length&&(0,a.jsx)("div",{className:"p-8 text-center text-gray-500",children:"Nenhum produto encontrado."})]})]}),(0,a.jsxs)("div",{className:"w-80 bg-gray-900 border-l border-gray-700 flex flex-col",children:[(0,a.jsxs)("div",{className:"p-4 space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-xs uppercase font-bold text-gray-500",children:"Cliente Selecionado"}),(0,a.jsxs)("div",{className:"bg-gray-800 border-l-4 border-blue-500 p-3 rounded",children:[(0,a.jsx)("div",{className:"font-bold text-white leading-tight",children:null==V?void 0:V.nomeFantasia}),(0,a.jsx)("div",{className:"text-xs text-gray-400 mt-1",children:null==V?void 0:V.cnpj}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 mt-0.5",children:[null==V?void 0:V.cidade,"/",null==V?void 0:V.estado]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("label",{className:"text-xs uppercase font-bold text-gray-500",children:"Tabela"}),(0,a.jsxs)("select",{value:z,onChange:e=>H(e.target.value),className:"w-full bg-gray-800 border border-gray-700 rounded text-xs px-2 py-1.5 outline-none text-white",children:[(0,a.jsx)("option",{value:"preco50a199",children:"Padr\xe3o"}),(0,a.jsx)("option",{value:"preco200a699",children:"200 a 699"}),(0,a.jsx)("option",{value:"atacado",children:"Atacado"}),(0,a.jsx)("option",{value:"atacadoAVista",children:"Atacado \xe0 Vista"}),(0,a.jsx)("option",{value:"redes",children:"Redes"})]})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("label",{className:"text-xs uppercase font-bold text-gray-500",children:"Pagto."}),(0,a.jsxs)("select",{value:I,onChange:e=>L(e.target.value),className:"w-full bg-gray-800 border border-gray-700 rounded text-xs px-2 py-1.5 outline-none text-white",children:[(0,a.jsx)("option",{children:"A Vista"}),(0,a.jsx)("option",{children:"30 Dias"}),(0,a.jsx)("option",{children:"30/60 Dias"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("label",{className:"text-xs uppercase font-bold text-gray-500",children:"Data de Emiss\xe3o"}),(0,a.jsx)("input",{type:"date",value:Z,onChange:e=>T(e.target.value),className:"w-full bg-gray-800 border border-gray-700 rounded text-xs px-2 py-1.5 outline-none text-white"})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("label",{className:"text-xs uppercase font-bold text-gray-500",children:"Observa\xe7\xf5es"}),(0,a.jsx)("textarea",{value:S,onChange:e=>P(e.target.value),rows:4,className:"w-full bg-gray-800 border border-gray-700 rounded text-xs px-2 py-1.5 outline-none text-white resize-none",placeholder:"..."})]})]}),(0,a.jsxs)("div",{className:"mt-auto p-4 bg-gray-800/50 border-t border-gray-700",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm mb-1",children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Itens"}),(0,a.jsx)("span",{className:"text-white font-mono",children:W})]}),(0,a.jsxs)("div",{className:"flex justify-between text-lg font-bold mb-4",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Total"}),(0,a.jsx)("span",{className:"text-green-400",children:Q.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})})]})]})]})]})]})}},5590:function(e,t,r){"use strict";r.d(t,{F:function(){return h},e:function(){return p}});var a=r(3827),s=r(64090),o=r(46578),l=r(98998),n=r(28814),c=r(52235),i=r(28745),d=r(38371);function u(e){let{message:t,type:r,isVisible:u=!0,onClose:x}=e;return(0,s.useEffect)(()=>{if(u){let e=setTimeout(()=>{x()},3e3);return()=>clearTimeout(e)}},[u,x]),(0,a.jsx)(i.M,{children:u&&(0,a.jsxs)(d.E.div,{initial:{opacity:0,y:50,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:.9},className:"fixed bottom-6 right-6 z-50 flex items-center gap-3 rounded-xl border border-white/10 bg-black/80 px-4 py-3 text-sm text-white shadow-2xl backdrop-blur-md",children:[(0,a.jsxs)("div",{className:"rounded-full p-1 ".concat("success"===r?"bg-green-500/20 text-green-500":"error"===r?"bg-red-500/20 text-red-500":"bg-blue-500/20 text-blue-500"),children:["success"===r&&(0,a.jsx)(o.Z,{className:"h-4 w-4"}),"error"===r&&(0,a.jsx)(l.Z,{className:"h-4 w-4"}),"info"===r&&(0,a.jsx)(n.Z,{className:"h-4 w-4"})]}),(0,a.jsx)("span",{className:"font-medium pr-2",children:t}),(0,a.jsx)("button",{onClick:x,className:"ml-2 rounded-lg p-1 text-gray-400 hover:bg-white/10 hover:text-white transition-colors",children:(0,a.jsx)(c.Z,{className:"h-3 w-3"})})]})})}let x=(0,s.createContext)(void 0);function h(e){let{children:t}=e,[r,o]=(0,s.useState)([]),[l,n]=(0,s.useState)([]),[c,i]=(0,s.useState)([]),[d,h]=(0,s.useState)([]),[p,m]=(0,s.useState)(!0),[g,f]=(0,s.useState)(null),[y,b]=(0,s.useState)(null),j=(0,s.useCallback)((e,t)=>{b({message:e,type:t})},[]),N=(0,s.useCallback)(async()=>{m(!0);try{let[e,t,r,a]=await Promise.all([fetch("/api/clients"),fetch("/api/products"),fetch("/api/orders"),fetch("/api/fabricas")]);e.ok&&o(await e.json()),t.ok&&n(await t.json()),r.ok&&i(await r.json()),a.ok&&h(await a.json())}catch(e){console.error("Error fetching data:",e),j("Erro ao carregar dados","error")}finally{m(!1)}},[j]);(0,s.useEffect)(()=>{N();let e=localStorage.getItem("frplus_user");e&&f(e)},[N]);let v=async e=>{try{let t=await fetch("/api/clients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(t.ok){let e=await t.json();o(t=>[...t,e]),j("Cliente cadastrado com sucesso!","success")}else j("Erro ao cadastrar cliente","error")}catch(e){console.error("Error adding client:",e),j("Erro ao cadastrar cliente","error")}},w=async(e,t)=>{try{let r=await fetch("/api/clients/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(r.ok){let t=await r.json();o(r=>r.map(r=>r.id===e?t:r)),j("Cliente atualizado com sucesso!","success")}}catch(e){console.error("Error updating client:",e),j("Erro ao atualizar cliente","error")}},k=async e=>{try{(await fetch("/api/clients/".concat(e),{method:"DELETE"})).ok&&(o(t=>t.filter(t=>t.id!==e)),j("Cliente exclu\xeddo com sucesso!","success"))}catch(e){console.error("Error removing client:",e),j("Erro ao excluir cliente","error")}},C=async e=>{try{(await fetch("/api/products",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok?(await N(),j("Produto cadastrado com sucesso!","success")):j("Erro ao cadastrar produto","error")}catch(e){console.error("Error adding product:",e),j("Erro ao cadastrar produto","error")}},E=async(e,t)=>{try{(await fetch("/api/products/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).ok&&(await N(),j("Produto atualizado com sucesso!","success"))}catch(e){console.error("Error updating product:",e),j("Erro ao atualizar produto","error")}},S=async e=>{try{(await fetch("/api/products/".concat(e),{method:"DELETE"})).ok&&(n(t=>t.filter(t=>t.id!==e)),j("Produto exclu\xeddo com sucesso!","success"))}catch(e){console.error("Error removing product:",e),j("Erro ao excluir produto","error")}},P=async e=>{try{(await fetch("/api/orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok?(await N(),j("Pedido cadastrado com sucesso!","success")):j("Erro ao cadastrar pedido","error")}catch(e){console.error("Error adding order:",e),j("Erro ao cadastrar pedido","error")}},Z=async(e,t)=>{try{(await fetch("/api/orders/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).ok&&(await N(),j("Pedido atualizado com sucesso!","success"))}catch(e){console.error("Error updating order:",e),j("Erro ao atualizar pedido","error")}},T=async e=>{try{(await fetch("/api/orders/".concat(e),{method:"DELETE"})).ok&&(i(t=>t.filter(t=>t.id!==e)),j("Pedido exclu\xeddo com sucesso!","success"))}catch(e){console.error("Error removing order:",e),j("Erro ao excluir pedido","error")}},z=async e=>{try{let t=await fetch("/api/fabricas",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(t.ok){let e=await t.json();h(t=>[...t,e]),j("F\xe1brica cadastrada com sucesso!","success")}}catch(e){console.error("Error adding fabrica:",e),j("Erro ao cadastrar f\xe1brica","error")}},R=async(e,t)=>{try{(await fetch("/api/fabricas/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).ok&&(await N(),j("F\xe1brica atualizada com sucesso!","success"))}catch(e){console.error("Error updating fabrica:",e),j("Erro ao atualizar f\xe1brica","error")}},I=async e=>{try{(await fetch("/api/fabricas/".concat(e),{method:"DELETE"})).ok&&(h(t=>t.filter(t=>t.id!==e)),j("F\xe1brica exclu\xedda com sucesso!","success"))}catch(e){console.error("Error removing fabrica:",e),j("Erro ao excluir f\xe1brica","error")}};return(0,a.jsxs)(x.Provider,{value:{clients:r,products:l,orders:c,fabricas:d,loading:p,addClient:v,updateClient:w,removeClient:k,addProduct:C,updateProduct:E,removeProduct:S,addOrder:P,updateOrder:Z,removeOrder:T,addFabrica:z,updateFabrica:R,removeFabrica:I,getDashboardStats:()=>({totalSales:c.reduce((e,t)=>e+t.valorTotal,0),totalOrders:c.length,newClients:r.length,totalProducts:l.length}),showToast:j,user:g,login:e=>{f(e),localStorage.setItem("frplus_user",e)},logout:()=>{f(null),localStorage.removeItem("frplus_user")},refreshData:N},children:[t,y&&(0,a.jsx)(u,{message:y.message,type:y.type,onClose:()=>b(null)})]})}function p(){let e=(0,s.useContext)(x);if(void 0===e)throw Error("useData must be used within a DataProvider");return e}},28745:function(e,t,r){"use strict";r.d(t,{M:function(){return f}});var a=r(3827),s=r(64090),o=r(53856),l=r(72435),n=r(24561),c=r(93449);class i extends s.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=this.props.sizeRef.current;e.height=t.offsetHeight||0,e.width=t.offsetWidth||0,e.top=t.offsetTop,e.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function d(e){let{children:t,isPresent:r}=e,o=(0,s.useId)(),l=(0,s.useRef)(null),n=(0,s.useRef)({width:0,height:0,top:0,left:0}),{nonce:d}=(0,s.useContext)(c._);return(0,s.useInsertionEffect)(()=>{let{width:e,height:t,top:a,left:s}=n.current;if(r||!l.current||!e||!t)return;l.current.dataset.motionPopId=o;let c=document.createElement("style");return d&&(c.nonce=d),document.head.appendChild(c),c.sheet&&c.sheet.insertRule('\n          [data-motion-pop-id="'.concat(o,'"] {\n            position: absolute !important;\n            width: ').concat(e,"px !important;\n            height: ").concat(t,"px !important;\n            top: ").concat(a,"px !important;\n            left: ").concat(s,"px !important;\n          }\n        ")),()=>{document.head.removeChild(c)}},[r]),(0,a.jsx)(i,{isPresent:r,childRef:l,sizeRef:n,children:s.cloneElement(t,{ref:l})})}let u=e=>{let{children:t,initial:r,isPresent:o,onExitComplete:c,custom:i,presenceAffectsLayout:u,mode:h}=e,p=(0,l.h)(x),m=(0,s.useId)(),g=(0,s.useCallback)(e=>{for(let t of(p.set(e,!0),p.values()))if(!t)return;c&&c()},[p,c]),f=(0,s.useMemo)(()=>({id:m,initial:r,isPresent:o,custom:i,onExitComplete:g,register:e=>(p.set(e,!1),()=>p.delete(e))}),u?[Math.random(),g]:[o,g]);return(0,s.useMemo)(()=>{p.forEach((e,t)=>p.set(t,!1))},[o]),s.useEffect(()=>{o||p.size||!c||c()},[o]),"popLayout"===h&&(t=(0,a.jsx)(d,{isPresent:o,children:t})),(0,a.jsx)(n.O.Provider,{value:f,children:t})};function x(){return new Map}var h=r(53177);let p=e=>e.key||"";function m(e){let t=[];return s.Children.forEach(e,e=>{(0,s.isValidElement)(e)&&t.push(e)}),t}var g=r(45526);let f=e=>{let{children:t,custom:r,initial:n=!0,onExitComplete:c,presenceAffectsLayout:i=!0,mode:d="sync",propagate:x=!1}=e,[f,y]=(0,h.oO)(x),b=(0,s.useMemo)(()=>m(t),[t]),j=x&&!f?[]:b.map(p),N=(0,s.useRef)(!0),v=(0,s.useRef)(b),w=(0,l.h)(()=>new Map),[k,C]=(0,s.useState)(b),[E,S]=(0,s.useState)(b);(0,g.L)(()=>{N.current=!1,v.current=b;for(let e=0;e<E.length;e++){let t=p(E[e]);j.includes(t)?w.delete(t):!0!==w.get(t)&&w.set(t,!1)}},[E,j.length,j.join("-")]);let P=[];if(b!==k){let e=[...b];for(let t=0;t<E.length;t++){let r=E[t],a=p(r);j.includes(a)||(e.splice(t,0,r),P.push(r))}"wait"===d&&P.length&&(e=P),S(m(e)),C(b);return}let{forceRender:Z}=(0,s.useContext)(o.p);return(0,a.jsx)(a.Fragment,{children:E.map(e=>{let t=p(e),s=(!x||!!f)&&(b===E||j.includes(t));return(0,a.jsx)(u,{isPresent:s,initial:(!N.current||!!n)&&void 0,custom:s?void 0:r,presenceAffectsLayout:i,mode:d,onExitComplete:s?void 0:()=>{if(!w.has(t))return;w.set(t,!0);let e=!0;w.forEach(t=>{t||(e=!1)}),e&&(null==Z||Z(),S(v.current),x&&(null==y||y()),c&&c())},children:e},t)})})}}},function(e){e.O(0,[462,971,69,744],function(){return e(e.s=92402)}),_N_E=e.O()}]);